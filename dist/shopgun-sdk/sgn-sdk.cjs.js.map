{"version":3,"file":"sgn-sdk.cjs.js","sources":["../../lib/configDefaults.js","../../lib/config.js","../../lib/util.js","../../lib/storage/client-cookie.js","../../lib/kits/core/session.js","../../lib/kits/core/request.js","../../vendor/gator.js","../../lib/kits/core-ui/offer-details.js","../../lib/key-codes.js","../../lib/kits/core-ui/popover.js","../../lib/kits/core-ui/single-choice-popover.js","../../lib/kits/core-ui/index.js","../../lib/storage/client-local.js","../../lib/kits/events/tracker.js","../../lib/incito-browser/utils.js","../../lib/incito-browser/views/view.js","../../lib/incito-browser/views/absolute-layout.js","../../lib/incito-browser/views/flex-layout.js","../../lib/incito-browser/views/image.js","../../lib/incito-browser/views/text.js","../../lib/incito-browser/views/video.js","../../lib/incito-browser/views/video-embed.js","../../lib/incito-browser/incito.js","../../lib/kits/incito-publication/event-tracking.js","../../lib/kits/incito-publication/viewer.js","../../lib/kits/incito-publication/controls.js","../../lib/kits/incito-publication/bootstrapper.js","../../lib/translations.js","../../lib/kits/paged-publication/controls.js","../../lib/verso-browser/animation.js","../../lib/verso-browser/page_spread.js","../../lib/verso-browser/vendor/hammer.js","../../lib/verso-browser/verso.js","../../lib/kits/paged-publication/page-spread.js","../../lib/kits/paged-publication/page-spreads.js","../../lib/kits/paged-publication/core.js","../../lib/kits/paged-publication/event-tracking.js","../../lib/kits/paged-publication/hotspots.js","../../lib/kits/paged-publication/viewer.js","../../lib/kits/paged-publication/bootstrapper.js","../../lib/storage/client-session.js","../../lib/sgn-sdk.js"],"sourcesContent":["export const locale = 'en_US';\nexport const coreUrl = 'https://squid-api.tjek.com';\nexport const eventsTrackUrl = 'https://wolf-api.tjek.com/sync';\n","import MicroEvent from 'microevent';\nimport * as configDefaults from './configDefaults';\n\nclass Config extends MicroEvent {\n    attrs = {...configDefaults};\n\n    set(config = {}) {\n        const changedAttributes = {};\n\n        for (let key in config) {\n            const value = config[key];\n            if (this.keys.includes(key)) {\n                this.attrs[key] = value;\n                changedAttributes[key] = value;\n            }\n        }\n\n        this.trigger('change', changedAttributes);\n    }\n\n    get(option) {\n        return this.attrs[option];\n    }\n}\nConfig.prototype.keys = [\n    'appVersion',\n    'appKey',\n    'appSecret',\n    'authToken',\n    'eventTracker',\n    'locale',\n    'coreSessionToken',\n    'coreSessionClientId',\n    'coreUrl',\n    'eventsTrackUrl'\n];\n\nexport default Config;\n","export function isBrowser() {\n    return typeof window === 'object' && typeof document === 'object';\n}\n\nexport function isNode() {\n    return typeof process === 'object';\n}\n\nexport function error(err, options) {\n    err.message = err.message || null;\n\n    if (typeof options === 'string') {\n        err.message = options;\n    } else if (typeof options === 'object' && options != null) {\n        for (let key in options) {\n            const value = options[key];\n            err[key] = value;\n        }\n\n        if (options.message != null) {\n            err.message = options.message;\n        }\n        if (options.code != null || options.message != null) {\n            err.code = options.code || options.name;\n        }\n        if (options.stack != null) {\n            err.stack = options.stack;\n        }\n    }\n\n    err.name = options?.name || err.name || err.code || 'Error';\n    err.time = new Date();\n\n    return err;\n}\n\nexport function uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n        const r = (Math.random() * 16) | 0;\n        const v = c === 'x' ? r : (r & 0x3) | 0x8;\n\n        return v.toString(16);\n    });\n}\n\nexport function getQueryParam(field, url) {\n    const href = url || window.location.href;\n    const reg = new RegExp('[?&]' + field + '=([^&#]*)', 'i');\n    const string = reg.exec(href);\n\n    if (string) {\n        return string[1];\n    }\n    return undefined;\n}\n\nexport function getRandomNumberBetween(from, to) {\n    return Math.floor(Math.random() * to) + from;\n}\n\nexport function getOS() {\n    let name = null;\n    const ua = window.navigator.userAgent;\n\n    if (ua.indexOf('Windows') > -1) {\n        name = 'Windows';\n    } else if (ua.indexOf('Mac') > -1) {\n        name = 'macOS';\n    } else if (ua.indexOf('X11') > -1) {\n        name = 'unix';\n    } else if (ua.indexOf('Linux') > -1) {\n        name = 'Linux';\n    } else if (ua.indexOf('iOS') > -1) {\n        name = 'iOS';\n    } else if (ua.indexOf('Android') > -1) {\n        name = 'Android';\n    }\n\n    return name;\n}\n\nexport function getDeviceCategory() {\n    let deviceCategory = 'desktop';\n\n    if (navigator.platform === 'iPod' || navigator.platform === 'iPhone') {\n        deviceCategory = 'mobile';\n    } else if (navigator.platform === 'iPad') {\n        deviceCategory = 'tablet';\n    } else if (\n        navigator.platform === 'Android' ||\n        /android/gi.test(navigator.userAgent)\n    ) {\n        if (/tablet/gi.test(navigator.userAgent)) {\n            deviceCategory = 'tablet';\n        } else {\n            deviceCategory = 'mobile';\n        }\n    }\n\n    return deviceCategory;\n}\n\nexport function getPointer() {\n    let pointer = 'fine';\n\n    if (matchMedia('(pointer:coarse)').matches) {\n        pointer = 'coarse';\n    }\n\n    return pointer;\n}\n\nexport function getOrientation(width, height) {\n    if (width === height) {\n        return 'quadratic';\n    } else if (width > height) {\n        return 'horizontal';\n    } else {\n        return 'vertical';\n    }\n}\n\nexport function getScreenDimensions() {\n    const density = window.devicePixelRatio ?? 1;\n    const logical = {\n        width: window.screen.width,\n        height: window.screen.height\n    };\n    const physical = {\n        width: Math.round(logical.width * density),\n        height: Math.round(logical.height * density)\n    };\n\n    return {\n        density,\n        logical,\n        physical\n    };\n}\n\nexport function getUtcOffsetSeconds() {\n    const now = new Date();\n    const jan1 = new Date(now.getFullYear(), 0, 1, 0, 0, 0, 0);\n    const tmp = jan1.toGMTString();\n    const jan2 = new Date(tmp.substring(0, tmp.lastIndexOf(' ') - 1));\n    const stdTimeOffset = (jan1 - jan2) / 1000;\n\n    return stdTimeOffset;\n}\n\nexport function getUtcDstOffsetSeconds() {\n    return new Date().getTimezoneOffset() * 60 * -1;\n}\n\nexport function getColorBrightness(color) {\n    color = color.replace('#', '');\n    var hex = parseInt((hex + '').replace(/[^a-f0-9]/gi, ''), 16);\n    const rgb = [];\n    let sum = 0;\n    let x = 0;\n\n    while (x < 3) {\n        const s = parseInt(color.substring(2 * x, 2), 16);\n        rgb[x] = s;\n\n        if (s > 0) {\n            sum += s;\n        }\n\n        ++x;\n    }\n\n    if (sum <= 381) {\n        return 'dark';\n    } else {\n        return 'light';\n    }\n}\n\nexport function btoa(str) {\n    if (isBrowser()) {\n        return window.btoa(str);\n    } else {\n        let buffer = null;\n\n        if (str instanceof Buffer) {\n            buffer = str;\n        } else {\n            buffer = Buffer.from(str.toString(), 'binary');\n        }\n\n        return buffer.toString('base64');\n    }\n}\n\nexport function chunk(arr, size) {\n    const results = [];\n\n    while (arr.length) {\n        results.push(arr.splice(0, size));\n    }\n\n    return results;\n}\n\nexport function throttle(fn, threshold = 250, scope) {\n    let last = undefined;\n    let deferTimer = undefined;\n\n    return function () {\n        const context = scope || this;\n        const now = new Date().getTime();\n        const args = arguments;\n\n        if (last && now < last + threshold) {\n            clearTimeout(deferTimer);\n\n            deferTimer = setTimeout(() => {\n                last = now;\n\n                fn.apply(context, args);\n            }, threshold);\n        } else {\n            last = now;\n            fn.apply(context, args);\n        }\n    };\n}\n\nexport function loadImage(src, callback) {\n    const img = new Image();\n\n    img.onload = () => callback(null, img.width, img.height);\n    img.onerror = () => callback(new Error());\n    img.src = src;\n\n    return img;\n}\n\nexport function distance(lat1, lng1, lat2, lng2) {\n    const radlat1 = (Math.PI * lat1) / 180;\n    const radlat2 = (Math.PI * lat2) / 180;\n    const theta = lng1 - lng2;\n    const radtheta = (Math.PI * theta) / 180;\n    let dist =\n        Math.sin(radlat1) * Math.sin(radlat2) +\n        Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\n    dist = Math.acos(dist);\n    dist = (dist * 180) / Math.PI;\n    dist = dist * 60 * 1.1515;\n    dist = dist * 1.609344 * 1000;\n\n    return dist;\n}\n\n// Method for wrapping a function that takes a callback in any position\n// to return promises if no callback is given in a call.\n// The second argument, cbParameterIndex, is the position of the callback in the original functions parameter list.\n// CoffeeScript optional parameters messes with this function arity detection,\n// not sure what to do about that, other than always setting cbParameterIndex at callsites.\nexport function promiseCallbackInterop(fun, cbParameterIndex = fun.length - 1) {\n    // This is the function that actually wraps and calls a method to return a promise.\n    const makePromise = (fun, cbParameterIndex, parameters) =>\n        new Promise((resolve, reject) => {\n            const neoCallback = (error, result) => {\n                if (error) {\n                    return reject(error);\n                }\n                return resolve(result);\n            };\n\n            const callParameters = [];\n            for (\n                let i = 0,\n                    end = Math.max(parameters.length, cbParameterIndex) + 1,\n                    asc = 0 <= end;\n                asc ? i < end : i > end;\n                asc ? i++ : i--\n            ) {\n                callParameters.push(\n                    i === cbParameterIndex ? neoCallback : parameters[i]\n                );\n            }\n\n            return fun.apply(this, callParameters);\n        });\n    // Wrapper function that decides what to do per-call.\n    return (...parameters) => {\n        if (typeof parameters[cbParameterIndex] === 'function') {\n            // Callback given, do a regular old call.\n            return fun.apply(null, parameters);\n        } else if (typeof Promise === 'function') {\n            // No callback given, and we have promise support, use makePromise to wrap the call.\n            return makePromise(fun, cbParameterIndex, parameters);\n        } else {\n            // Ain't got callback, ain't got promise support; we gotta tell the developer.\n            throw new Error(`To be able to use this asynchronous method you should:\nSupply a callback function as argument #${1 + cbParameterIndex}.\nThis callback function will be called with the method call response.\nAlternatively, when supported, it can return a Promise if no callback function is given.\\\n`);\n        }\n    };\n}\n","import {isNode} from '../util';\n\nconst prefixKey = 'sgn-';\n\nexport function get(key) {\n    let value;\n    if (isNode()) {\n        return;\n    }\n\n    try {\n        const name = `${prefixKey}${key}=`;\n        const ca = document.cookie.split(';');\n\n        ca.forEach((c) => {\n            const ct = c.trim();\n\n            if (ct.indexOf(name) === 0) {\n                value = ct.substring(name.length, ct.length);\n            }\n        });\n\n        value = JSON.parse(value);\n    } catch (err) {\n        value = {};\n    }\n\n    return value;\n}\n\nexport function set(key, value) {\n    if (isNode()) {\n        return;\n    }\n\n    try {\n        const days = 365;\n        const date = new Date();\n        const str = JSON.stringify(value);\n\n        date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n\n        document.cookie = `${prefixKey}${key}=${str};expires=${date.toUTCString()};path=/`;\n    } catch (err) {}\n}\n","import fetch from 'cross-fetch';\nimport sha256 from 'sha256';\nimport SGN from '../../sgn-sdk';\nimport * as clientCookieStorage from '../../storage/client-cookie';\nlet callbackQueue = [];\nlet renewed = false;\n\nconst ttl = 1 * 60 * 60 * 24 * 60;\n\nexport function saveToken(token) {\n    if (!token) {\n        throw new Error('No token provided for saving');\n    }\n\n    SGN.config.set({coreSessionToken: token});\n\n    saveCookie();\n}\n\nexport function saveClientId(clientId) {\n    SGN.config.set({coreSessionClientId: clientId});\n\n    saveCookie();\n}\n\nexport function saveCookie() {\n    clientCookieStorage.set('session', {\n        token: SGN.config.get('coreSessionToken'),\n        client_id: SGN.config.get('coreSessionClientId')\n    });\n}\n\nexport function create(callback) {\n    const key = SGN.config.get('appKey');\n\n    const req = fetch(\n        SGN.config.get('coreUrl') +\n            `/v2/sessions?api_key=${key}&token_ttl=${ttl}`,\n        {method: 'post'}\n    );\n\n    req.then((response) =>\n        response.json().then((json) => {\n            if (response.status === 201) {\n                saveToken(json.token);\n                saveClientId(json.client_id);\n\n                callback(null, json);\n            } else {\n                callback(new Error('Could not create session'));\n            }\n        })\n    ).catch((err) => {\n        callback(err);\n    });\n}\n\nexport function update(callback) {\n    const headers = {};\n    const token = SGN.config.get('coreSessionToken');\n    const appSecret = SGN.config.get('appSecret');\n\n    headers['X-Token'] = token;\n    if (appSecret != null) {\n        headers['X-Signature'] = sign(appSecret, token);\n    }\n\n    const req = fetch(SGN.config.get('coreUrl') + '/v2/sessions', {\n        method: 'put',\n        headers\n    });\n\n    req.then((response) =>\n        response.json().then((json) => {\n            if (response.status === 200) {\n                saveToken(json.token);\n                saveClientId(json.client_id);\n\n                callback(null, json);\n            } else {\n                callback(new Error('Could not update session'));\n            }\n        })\n    ).catch((err) => {\n        callback(err);\n    });\n}\n\nexport function renew(callback) {\n    const headers = {};\n    const token = SGN.config.get('coreSessionToken');\n    const appSecret = SGN.config.get('appSecret');\n\n    headers['X-Token'] = token;\n    if (appSecret) {\n        headers['X-Signature'] = sign(appSecret, token);\n    }\n\n    const req = fetch(SGN.config.get('coreUrl') + '/v2/sessions', {\n        method: 'put',\n        headers\n    });\n\n    req.then((response) =>\n        response.json().then((json) => {\n            if (response.status === 200) {\n                saveToken(json.token);\n                saveClientId(json.client_id);\n\n                callback(null, json);\n            } else {\n                callback(new Error('Could not renew session'));\n            }\n        })\n    ).catch((err) => {\n        callback(err);\n    });\n}\n\nexport function ensure(callback) {\n    const queueCount = callbackQueue.length;\n    const complete = (err) => {\n        callbackQueue = callbackQueue.filter((fn) => {\n            fn(err);\n\n            return false;\n        });\n    };\n\n    callbackQueue.push(callback);\n\n    if (queueCount === 0) {\n        if (SGN.config.get('coreSessionToken') == null) {\n            create(complete);\n        } else if (renewed === false) {\n            renewed = true;\n            renew((err) => {\n                if (err != null) {\n                    create(complete);\n                } else {\n                    complete();\n                }\n            });\n        } else {\n            complete();\n        }\n    }\n}\n\nexport function sign(appSecret, token) {\n    return sha256([appSecret, token].join(''));\n}\n","import fetch from 'cross-fetch';\nimport SGN from '../../sgn-sdk';\nimport {error, promiseCallbackInterop} from '../../util';\nimport {ensure, saveToken, sign} from './session';\n\nfunction request(options = {}, callback, secondTime) {\n    ensure((err) => {\n        if (err != null) {\n            return callback(err);\n        }\n\n        let url = SGN.config.get('coreUrl') + (options.url ?? '');\n        const headers = options.headers ?? {};\n        const json = typeof options.json === 'boolean' ? options.json : true;\n        let token = SGN.config.get('coreSessionToken');\n        const appKey = SGN.config.get('appKey');\n        const appVersion = SGN.config.get('appVersion');\n        const appSecret = SGN.config.get('appSecret');\n        const locale = SGN.config.get('locale');\n        const qs = options.qs ?? {};\n        const geo = options.geolocation;\n        let {body} = options;\n\n        headers['X-Api-Key'] = appKey;\n        headers['X-Token'] = token;\n        if (appSecret != null) {\n            headers['X-Signature'] = sign(appSecret, token);\n        }\n\n        if (json) {\n            headers['Content-Type'] = 'application/json';\n            headers['Accept'] = 'application/json';\n\n            if (body) {\n                body = JSON.stringify(body);\n            }\n        }\n\n        if (locale != null) {\n            qs.r_locale = locale;\n        }\n        if (appVersion != null) {\n            qs.api_av = appVersion;\n        }\n\n        if (geo != null) {\n            if (geo.latitude != null && qs.r_lat == null) {\n                qs.r_lat = geo.latitude;\n            }\n            if (geo.longitude != null && qs.r_lng == null) {\n                qs.r_lng = geo.longitude;\n            }\n            if (geo.radius != null && qs.r_radius == null) {\n                qs.r_radius = geo.radius;\n            }\n            if (geo.sensor != null && qs.r_sensor == null) {\n                qs.r_sensor = geo.sensor;\n            }\n        }\n\n        if (Object.keys(qs).length) {\n            const params = Object.keys(qs)\n                .map((k) => {\n                    if (Array.isArray(k)) {\n                        return qs[k]\n                            .map(\n                                (val) =>\n                                    `${encodeURIComponent(\n                                        k\n                                    )}[]=${encodeURIComponent(val)}`\n                            )\n                            .join('&');\n                    }\n\n                    return `${encodeURIComponent(k)}=${encodeURIComponent(\n                        qs[k]\n                    )}`;\n                })\n                .join('&');\n\n            url += '?' + params;\n        }\n\n        const req = fetch(url, {\n            method: options.method,\n            body,\n            headers\n        });\n\n        return req\n            .then((response) =>\n                response.json().then((json) => {\n                    token = SGN.config.get('coreSessionToken');\n                    const responseToken = response.headers.get('x-token');\n\n                    if (responseToken && token !== responseToken) {\n                        saveToken(responseToken);\n                    }\n\n                    if (\n                        (response.status >= 200 && response.status < 300) ||\n                        response.status === 304\n                    ) {\n                        callback(null, json);\n                    } else {\n                        if (\n                            secondTime !== true &&\n                            [1101, 1107, 1108].includes(json?.code)\n                        ) {\n                            SGN.config.set({coreSessionToken: undefined});\n\n                            request(options, callback, true);\n                        } else {\n                            callback(\n                                error(new Error('Core API error'), {\n                                    code: 'CoreAPIError',\n                                    statusCode: response.status\n                                }),\n                                json\n                            );\n                        }\n                    }\n                })\n            )\n            .catch(callback);\n    });\n}\n\nexport default promiseCallbackInterop(request, 1);\n","/**\n * Copyright 2014 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * GATOR.JS\n * Simple Event Delegation\n *\n * @version 1.2.4\n *\n * Compatible with IE 9+, FF 3.6+, Safari 5+, Chrome\n *\n * Include legacy.js for compatibility with older browsers\n *\n *             .-._   _ _ _ _ _ _ _ _\n *  .-''-.__.-'00  '-' ' ' ' ' ' ' ' '-.\n * '.___ '    .   .--_'-' '-' '-' _'-' '._\n *  V: V 'vv-'   '_   '.       .'  _..' '.'.\n *    '=.____.=_.--'   :_.__.__:_   '.   : :\n *            (((____.-'        '-.  /   : :\n *                              (((-'\\ .' /\n *                            _____..'  .'\n *                           '-._____.-'\n */\nvar _matcher,\n  _level = 0,\n  _id = 0,\n  _handlers = {},\n  _gatorInstances = {};\n\nfunction _addEvent(gator, type, callback) {\n  // blur and focus do not bubble up but if you use event capturing\n  // then you will get them\n  var useCapture = type == \"blur\" || type == \"focus\";\n  gator.element.addEventListener(type, callback, useCapture);\n}\n\nfunction _cancel(e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\n\n/**\n     * returns function to use for determining if an element\n     * matches a query selector\n     *\n     * @returns {Function}\n     */\nfunction _getMatcher(element) {\n  if (_matcher) {\n    return _matcher;\n  }\n\n  if (element.matches) {\n    _matcher = element.matches;\n    return _matcher;\n  }\n\n  if (element.webkitMatchesSelector) {\n    _matcher = element.webkitMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.mozMatchesSelector) {\n    _matcher = element.mozMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.msMatchesSelector) {\n    _matcher = element.msMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.oMatchesSelector) {\n    _matcher = element.oMatchesSelector;\n    return _matcher;\n  }\n\n  // if it doesn't match a native browser method\n  // fall back to the gator function\n  _matcher = Gator.matchesSelector;\n  return _matcher;\n}\n\n/**\n     * determines if the specified element matches a given selector\n     *\n     * @param {Node} element - the element to compare against the selector\n     * @param {string} selector\n     * @param {Node} boundElement - the element the listener was attached to\n     * @returns {void|Node}\n     */\nfunction _matchesSelector(element, selector, boundElement) {\n  // no selector means this event was bound directly to this element\n  if (selector == \"_root\") {\n    return boundElement;\n  }\n\n  // if we have moved up to the element you bound the event to\n  // then we have come too far\n  if (element === boundElement) {\n    return;\n  }\n\n  // if this is a match then we are done!\n  if (_getMatcher(element).call(element, selector)) {\n    return element;\n  }\n\n  // if this element did not match but has a parent we should try\n  // going up the tree to see if any of the parent elements match\n  // for example if you are looking for a click on an <a> tag but there\n  // is a <span> inside of the a tag that it is the target,\n  // it should still work\n  if (element.parentNode) {\n    _level++;\n    return _matchesSelector(element.parentNode, selector, boundElement);\n  }\n}\n\nfunction _addHandler(gator, event, selector, callback) {\n  if (!_handlers[gator.id]) {\n    _handlers[gator.id] = {};\n  }\n\n  if (!_handlers[gator.id][event]) {\n    _handlers[gator.id][event] = {};\n  }\n\n  if (!_handlers[gator.id][event][selector]) {\n    _handlers[gator.id][event][selector] = [];\n  }\n\n  _handlers[gator.id][event][selector].push(callback);\n}\n\nfunction _removeHandler(gator, event, selector, callback) {\n  // if there are no events tied to this element at all\n  // then don't do anything\n  if (!_handlers[gator.id]) {\n    return;\n  }\n\n  // if there is no event type specified then remove all events\n  // example: Gator(element).off()\n  if (!event) {\n    for (var type in _handlers[gator.id]) {\n      if (_handlers[gator.id].hasOwnProperty(type)) {\n        _handlers[gator.id][type] = {};\n      }\n    }\n    return;\n  }\n\n  // if no callback or selector is specified remove all events of this type\n  // example: Gator(element).off('click')\n  if (!callback && !selector) {\n    _handlers[gator.id][event] = {};\n    return;\n  }\n\n  // if a selector is specified but no callback remove all events\n  // for this selector\n  // example: Gator(element).off('click', '.sub-element')\n  if (!callback) {\n    delete _handlers[gator.id][event][selector];\n    return;\n  }\n\n  // if we have specified an event type, selector, and callback then we\n  // need to make sure there are callbacks tied to this selector to\n  // begin with.  if there aren't then we can stop here\n  if (!_handlers[gator.id][event][selector]) {\n    return;\n  }\n\n  // if there are then loop through all the callbacks and if we find\n  // one that matches remove it from the array\n  for (var i = 0; i < _handlers[gator.id][event][selector].length; i++) {\n    if (_handlers[gator.id][event][selector][i] === callback) {\n      _handlers[gator.id][event][selector].splice(i, 1);\n      break;\n    }\n  }\n}\n\nfunction _handleEvent(id, e, type) {\n  if (!_handlers[id][type]) {\n    return;\n  }\n\n  var target = e.target || e.srcElement,\n    selector,\n    match,\n    matches = {},\n    i = 0,\n    j = 0;\n\n  // find all events that match\n  _level = 0;\n  for (selector in _handlers[id][type]) {\n    if (_handlers[id][type].hasOwnProperty(selector)) {\n      match = _matchesSelector(target, selector, _gatorInstances[id].element);\n\n      if (\n        match &&\n        Gator.matchesEvent(\n          type,\n          _gatorInstances[id].element,\n          match,\n          selector == \"_root\",\n          e\n        )\n      ) {\n        _level++;\n        _handlers[id][type][selector].match = match;\n        matches[_level] = _handlers[id][type][selector];\n      }\n    }\n  }\n\n  // stopPropagation() fails to set cancelBubble to true in Webkit\n  // @see http://code.google.com/p/chromium/issues/detail?id=162270\n  e.stopPropagation = function() {\n    e.cancelBubble = true;\n  };\n\n  for (i = 0; i <= _level; i++) {\n    if (matches[i]) {\n      for (j = 0; j < matches[i].length; j++) {\n        if (matches[i][j].call(matches[i].match, e) === false) {\n          Gator.cancel(e);\n          return;\n        }\n\n        if (e.cancelBubble) {\n          return;\n        }\n      }\n    }\n  }\n}\n\n/**\n     * binds the specified events to the element\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @param {boolean=} remove\n     * @returns {Object}\n     */\nfunction _bind(events, selector, callback, remove) {\n  // fail silently if you pass null or undefined as an alement\n  // in the Gator constructor\n  if (!this.element) {\n    return;\n  }\n\n  if (!(events instanceof Array)) {\n    events = [events];\n  }\n\n  if (!callback && typeof selector == \"function\") {\n    callback = selector;\n    selector = \"_root\";\n  }\n\n  var id = this.id,\n    i;\n\n  function _getGlobalCallback(type) {\n    return function(e) {\n      _handleEvent(id, e, type);\n    };\n  }\n\n  for (i = 0; i < events.length; i++) {\n    if (remove) {\n      _removeHandler(this, events[i], selector, callback);\n      continue;\n    }\n\n    if (!_handlers[id] || !_handlers[id][events[i]]) {\n      Gator.addEvent(this, events[i], _getGlobalCallback(events[i]));\n    }\n\n    _addHandler(this, events[i], selector, callback);\n  }\n\n  return this;\n}\n\n/**\n     * Gator object constructor\n     *\n     * @param {Node} element\n     */\nfunction Gator(element, id) {\n  // called as function\n  if (!(this instanceof Gator)) {\n    // only keep one Gator instance per node to make sure that\n    // we don't create a ton of new objects if you want to delegate\n    // multiple events from the same node\n    //\n    // for example: Gator(document).on(...\n    for (var key in _gatorInstances) {\n      if (_gatorInstances[key].element === element) {\n        return _gatorInstances[key];\n      }\n    }\n\n    _id++;\n    _gatorInstances[_id] = new Gator(element, _id);\n\n    return _gatorInstances[_id];\n  }\n\n  this.element = element;\n  this.id = id;\n}\n\n/**\n     * adds an event\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @returns {Object}\n     */\nGator.prototype.on = function(events, selector, callback) {\n  return _bind.call(this, events, selector, callback);\n};\n\n/**\n     * removes an event\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @returns {Object}\n     */\nGator.prototype.off = function(events, selector, callback) {\n  return _bind.call(this, events, selector, callback, true);\n};\n\nGator.matchesSelector = function() {};\nGator.cancel = _cancel;\nGator.addEvent = _addEvent;\nGator.matchesEvent = function() {\n  return true;\n};\n\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports = Gator;\n}\n\nif (typeof window !== \"undefined\" && window.exports) {\n  window.Gator = Gator;\n}\n","import './offer-details.styl';\n\nexport default class OfferDetails {\n    constructor({minWidth = 300, maxWidth = '100vw', anchorEl, contentEl}) {\n        this.resize = this.resize.bind(this);\n        this.minWidth = minWidth;\n        this.maxWidth = maxWidth;\n        this.anchorEl = anchorEl;\n        this.contentEl = contentEl;\n        this.elInner = document.createElement('div');\n        this.elInner.className = 'sgn-offer-details-inner';\n\n        this.el = document.createElement('div');\n\n        this.el.className = 'sgn-offer-details';\n        this.el.setAttribute('tabindex', -1);\n        this.el.appendChild(this.elInner);\n        this.el.appendChild(this.contentEl);\n\n        this.position();\n    }\n\n    appendTo(el) {\n        el.appendChild(this.el);\n\n        this.el.offsetWidth;\n\n        this.show();\n\n        return this;\n    }\n\n    show() {\n        this.el.className += ' in';\n\n        window.addEventListener('resize', this.resize, false);\n\n        return this;\n    }\n\n    destroy() {\n        window.removeEventListener('resize', this.resize, false);\n\n        this.el.parentNode.removeChild(this.el);\n    }\n\n    position() {\n        const rect = this.anchorEl.getBoundingClientRect();\n        const top = window.pageYOffset + rect.top + this.anchorEl.offsetHeight;\n        let left = window.pageXOffset + rect.left;\n        const width = this.anchorEl.offsetWidth;\n\n        this.el.style.top = top + 'px';\n\n        const rightAligned = rect.left >= window.outerWidth / 2;\n        left = window.pageXOffset + rect.left;\n        const right = window.pageXOffset + (window.outerWidth - rect.right);\n\n        if (rightAligned) {\n            this.el.style.left = 'auto';\n            this.el.style.right = right + 'px';\n\n            this.elInner.style.left = 'auto';\n            this.elInner.style.right = 0;\n        } else {\n            this.el.style.left = left + 'px';\n            this.el.style.right = 'auto';\n\n            this.elInner.style.left = 0;\n            this.elInner.style.right = 'auto';\n        }\n\n        this.el.style.minWidth =\n            typeof this.minWidth === 'number'\n                ? Math.max(width, this.minWidth) + 'px'\n                : this.minWidth;\n        this.el.style.maxWidth = this.maxWidth;\n\n        this.elInner.style.width = width - 8 + 'px';\n    }\n\n    resize() {\n        this.position();\n    }\n}\n","export const ESC = 27;\nexport const ARROW_RIGHT = 39;\nexport const ARROW_LEFT = 37;\nexport const SPACE = 32;\nexport const NUMBER_ONE = 49;\n","import MicroEvent from 'microevent';\nimport Mustache from 'mustache';\nimport Gator from '../../../vendor/gator';\nimport * as keyCodes from '../../key-codes';\nimport './popover.styl';\n\nconst defaultTemplate = `\\\n<div class=\"sgn-popover__background\" data-close></div>\n<div class=\"sgn-popover__menu\">\n    {{#header}}\n        <div class=\"sgn-popover__header\">{{header}}</div>\n    {{/header}}\n    <div class=\"sgn-popover__content\">\n        <ul>\n            {{#singleChoiceItems}}\n                <li data-index=\"{{index}}\">\n                    <p class=\"sgn-popover-item__title\">{{item.title}}</p>\n                    {{#item.subtitle}}\n                        <p class=\"sgn-popover-item__subtitle\">{{item.subtitle}}</p>\n                    {{/item.subtitle}}\n                </li>\n            {{/singleChoiceItems}}\n        </ul>\n    </div>\n</div>\\\n`;\n\nclass Popover extends MicroEvent {\n    constructor(options = {}) {\n        super();\n        this.keyUp = this.keyUp.bind(this);\n        this.resize = this.resize.bind(this);\n        this.scroll = this.scroll.bind(this);\n        this.options = options;\n        this.el = document.createElement('div');\n        this.backgroundEl = document.createElement('div');\n    }\n\n    render() {\n        const {\n            header,\n            singleChoiceItems,\n            template = defaultTemplate\n        } = this.options;\n\n        const view = {\n            header,\n            singleChoiceItems: singleChoiceItems?.map((item, index) => ({\n                item,\n                index\n            }))\n        };\n\n        this.el.className = 'sgn-popover';\n        this.el.setAttribute('tabindex', -1);\n        this.el.innerHTML = Mustache.render(template, view);\n\n        this.position();\n        this.addEventListeners();\n\n        return this;\n    }\n\n    destroy() {\n        Gator(this.el).off();\n\n        window.removeEventListener('resize', this.resize, false);\n        window.removeEventListener('scroll', this.scroll, false);\n\n        if (this.el.parentNode) {\n            this.el.parentNode.removeChild(this.el);\n\n            this.trigger('destroyed');\n        }\n    }\n\n    position() {\n        let top = this.options.y;\n        let left = this.options.x;\n\n        const menuEl = this.el.querySelector('.sgn-popover__menu');\n\n        const width = menuEl.offsetWidth;\n        const height = menuEl.offsetHeight;\n        const parentWidth = this.el.parentNode.offsetWidth;\n        const parentHeight = this.el.parentNode.offsetHeight;\n        const boundingRect = this.el.parentNode.getBoundingClientRect();\n\n        top -= boundingRect.top;\n        left -= boundingRect.left;\n\n        top -= window.pageYOffset;\n        left -= window.pageXOffset;\n\n        if (top + height > parentHeight) {\n            menuEl.style.top = parentHeight - height + 'px';\n        } else {\n            menuEl.style.top = top + 'px';\n        }\n\n        if (left + width > parentWidth) {\n            menuEl.style.left = parentWidth - width + 'px';\n        } else {\n            menuEl.style.left = left + 'px';\n        }\n    }\n\n    addEventListeners() {\n        const trigger = this.trigger.bind(this);\n\n        this.el.addEventListener('keyup', this.keyUp);\n\n        Gator(this.el).on('click', '[data-index]', function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            trigger('selected', {index: +this.getAttribute('data-index')});\n        });\n\n        Gator(this.el).on('click', '[data-close]', (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n\n            this.destroy();\n        });\n\n        Gator(this.el).on('click', '.sgn-popover__menu', (e) => {\n            e.stopPropagation();\n        });\n\n        window.addEventListener('resize', this.resize, false);\n        window.addEventListener('scroll', this.scroll, false);\n    }\n\n    keyUp(e) {\n        if (e.keyCode === keyCodes.ESC) {\n            this.destroy();\n        }\n    }\n\n    resize() {\n        this.destroy();\n    }\n\n    scroll() {\n        this.destroy();\n    }\n}\n\nexport default Popover;\n","import Popover from './popover';\n\nexport default function singleChoicePopover(ctx, callback) {\n    const {items} = ctx;\n    let popover = null;\n\n    if (items.length === 1) {\n        callback(items[0]);\n    } else if (items.length > 1) {\n        popover = new Popover({\n            header: ctx.header,\n            x: ctx.x,\n            y: ctx.y,\n            singleChoiceItems: items\n        });\n\n        popover.bind('selected', (e) => {\n            callback(items[e.index]);\n\n            popover.destroy();\n        });\n\n        popover.bind('destroyed', () => {\n            ctx.el.focus();\n        });\n\n        ctx.el.appendChild(popover.el);\n        popover.render().el.focus();\n    }\n\n    return {\n        destroy() {\n            popover?.destroy();\n        }\n    };\n}\n","import Gator from '../../../vendor/gator';\nexport {default as OfferDetails} from './offer-details';\nexport {default as Popover} from './popover';\nexport {default as singleChoicePopover} from './single-choice-popover';\n\nexport const on = (el, events, selector, callback) =>\n    Gator(el).on(events, selector, callback);\n\nexport const off = (el, events, selector, callback) =>\n    Gator(el).off(events, selector, callback);\n","const prefixKey = 'sgn-';\n\nconst storage = (() => {\n    try {\n        const storage = window.localStorage;\n\n        storage[`${prefixKey}test-storage`] = 'foobar';\n        delete storage[`${prefixKey}test-storage`];\n\n        return storage;\n    } catch (error) {\n        return {};\n    }\n})();\n\nexport function get(key) {\n    try {\n        return JSON.parse(storage[`${prefixKey}${key}`]);\n    } catch (error) {}\n}\n\nexport function set(key, value) {\n    try {\n        storage[`${prefixKey}${key}`] = JSON.stringify(value);\n    } catch (error) {}\n}\n","import fetch from 'cross-fetch';\nimport md5 from 'md5';\nimport {eventsTrackUrl as defaultEventsTrackUrl} from '../../configDefaults';\nimport * as clientLocalStorage from '../../storage/client-local';\nimport {btoa, error, throttle, uuid} from '../../util';\n\nconst createTrackerClient = () => {\n    let id = clientLocalStorage.get('client-id');\n    if (id?.data) {\n        id = id.data;\n    }\n\n    if (id == null) {\n        id = uuid();\n\n        clientLocalStorage.set('client-id', id);\n    }\n\n    return {id};\n};\n\nfunction getPool() {\n    let data = clientLocalStorage.get('event-tracker-pool');\n    if (Array.isArray(data) === false) {\n        data = [];\n    }\n    data = data.filter((evt) => typeof evt._i === 'string');\n\n    return data;\n}\n\nlet pool = getPool();\n\nclass Tracker {\n    constructor(options = {}) {\n        for (let key in this.defaultOptions) {\n            const value = this.defaultOptions[key];\n            this[key] = options[key] || value;\n        }\n\n        this.client = options?.client || createTrackerClient();\n        this.eventsTrackUrl = options?.eventsTrackUrl || defaultEventsTrackUrl;\n        this.location = {\n            geohash: null,\n            time: null,\n            country: null\n        };\n        this.dispatching = false;\n        this.hasMadeInitialDispatch = false;\n\n        if (this.eventsTrackUrl) {\n            dispatch(this.eventsTrackUrl);\n            this.hasMadeInitialDispatch = true;\n        }\n    }\n    setEventsTrackUrl(eventsTrackUrl) {\n        this.eventsTrackUrl = eventsTrackUrl;\n        if (!this.hasMadeInitialDispatch) {\n            dispatch(this.eventsTrackUrl);\n            this.hasMadeInitialDispatch = true;\n        }\n    }\n    trackEvent(type, properties = {}, version = 2) {\n        if (typeof type !== 'number') {\n            throw error(new Error('Event type is required'));\n        }\n        if (this.trackId == null) {\n            return;\n        }\n\n        const evt = Object.assign({}, properties, {\n            _e: type,\n            _v: version,\n            _i: uuid(),\n            _t: Math.round(new Date().getTime() / 1000),\n            _a: this.trackId\n        });\n\n        if (this.location.geohash) {\n            evt['l.h'] = this.location.geohash;\n        }\n        if (this.location.time) {\n            evt['l.ht'] = this.location.time;\n        }\n        if (this.location.country) {\n            evt['l.c'] = this.location.country;\n        }\n\n        pool.push(evt);\n        while (pool.length > this.poolLimit) {\n            pool.shift();\n        }\n\n        dispatch(this.eventsTrackUrl);\n\n        return this;\n    }\n\n    setLocation(location = {}) {\n        for (let key in location) {\n            const value = location[key];\n            if (Object.prototype.hasOwnProperty.call(this.location, key)) {\n                this.location[key] = value;\n            }\n        }\n\n        return this;\n    }\n\n    trackPagedPublicationOpened(properties, version) {\n        return this.trackEvent(1, properties, version);\n    }\n\n    trackPagedPublicationPageDisappeared(properties, version) {\n        return this.trackEvent(2, properties, version);\n    }\n\n    trackOfferOpened(properties, version) {\n        return this.trackEvent(3, properties, version);\n    }\n\n    trackSearched(properties, version) {\n        return this.trackEvent(5, properties, version);\n    }\n\n    trackIncitoPublicationOpened(properties, version) {\n        return this.trackEvent(11, properties, version);\n    }\n\n    createViewToken(...parts) {\n        const str = [this.client.id].concat(parts).join('');\n        const viewToken = btoa(\n            String.fromCharCode.apply(\n                null,\n                md5(str, {asBytes: true}).slice(0, 8)\n            )\n        );\n\n        return viewToken;\n    }\n}\nTracker.prototype.defaultOptions = {\n    trackId: null,\n    poolLimit: 1000\n};\nexport default Tracker;\n\nlet dispatching = false;\nconst dispatchLimit = 100;\n\nfunction ship(events = [], eventsTrackUrl) {\n    return fetch(eventsTrackUrl, {\n        method: 'post',\n        timeout: 1000 * 20,\n        headers: {\n            'Content-Type': 'application/json; charset=utf-8'\n        },\n        body: JSON.stringify({events})\n    }).then((response) => response.json());\n}\n\nlet dispatchRetryInterval = null;\nfunction _dispatch(eventsTrackUrl) {\n    if (dispatching === true || pool.length === 0) {\n        return;\n    }\n\n    const events = pool.slice(0, dispatchLimit);\n    let nacks = 0;\n    dispatching = true;\n\n    ship(events, eventsTrackUrl)\n        .then((response) => {\n            dispatching = false;\n            if (dispatchRetryInterval) {\n                clearInterval(dispatchRetryInterval);\n                dispatchRetryInterval = null;\n            }\n\n            response.events.forEach((resEvent) => {\n                if (\n                    resEvent.status === 'validation_error' ||\n                    resEvent.status === 'ack'\n                ) {\n                    pool = pool.filter(\n                        (poolEvent) => poolEvent._i !== resEvent.id\n                    );\n                } else {\n                    nacks++;\n                }\n            });\n\n            // Keep dispatching until the pool size reaches a sane level.\n            if (pool.length >= dispatchLimit && nacks === 0) {\n                dispatch(eventsTrackUrl);\n            }\n        })\n        .catch((err) => {\n            dispatching = false;\n            // Try dispatching again in 20 seconds, if we aren't already trying\n            if (!dispatchRetryInterval) {\n                console.warn(\n                    \"We're gonna keep trying, but there was an error while dispatching events:\",\n                    err\n                );\n\n                dispatchRetryInterval = setInterval(\n                    () => dispatch(eventsTrackUrl),\n                    20000\n                );\n            }\n        });\n}\nvar dispatch = throttle(_dispatch, 4000);\n\nclientLocalStorage.set('event-tracker-pool', []);\n\ntry {\n    window.addEventListener(\n        'beforeunload',\n        () => {\n            pool = pool.concat(getPool());\n\n            clientLocalStorage.set('event-tracker-pool', pool);\n        },\n        false\n    );\n} catch (error) {}\n","export const formatUnit = (unit) => {\n    if (unit == null) {\n        return 0;\n    } else if (typeof unit === 'number') {\n        return `${unit}px`;\n    } else if (typeof unit === 'string') {\n        return unit.replace('dp', 'px');\n    } else {\n        return 0;\n    }\n};\n\nexport const isDefinedStr = (value) =>\n    typeof value === 'string' && value.length > 0;\n\nexport const escapeHTML = (unsafe = '') =>\n    unsafe\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;')\n        .replace(/'/g, '&#039;');\n\nexport const throttle = (fn, delay) => {\n    if (delay === 0) {\n        return fn;\n    }\n\n    let timer = false;\n\n    return () => {\n        if (timer) {\n            return;\n        }\n\n        timer = true;\n\n        return setTimeout(function () {\n            timer = false;\n\n            fn(...arguments);\n        }, delay);\n    };\n};\n","import {formatUnit, isDefinedStr} from '../utils';\nimport './view.styl';\n\nclass View {\n    constructor(attrs = {}) {\n        this.attrs = attrs;\n        this.el = this.createElement();\n\n        this.setAttributes();\n    }\n\n    render() {\n        return this;\n    }\n\n    createElement() {\n        const el = document.createElement(this.tagName);\n        const className = this.className ?? '';\n\n        el.className = 'incito__view ' + className;\n\n        return el;\n    }\n\n    setAttributes() {\n        // Identifier.\n        if (isDefinedStr(this.attrs.id)) {\n            this.el.setAttribute('data-id', this.attrs.id);\n        }\n\n        // Role.\n        if (isDefinedStr(this.attrs.role)) {\n            this.el.setAttribute('data-role', this.attrs.role);\n        }\n\n        // Accessibility label.\n        if (isDefinedStr(this.attrs.accessibility_label)) {\n            this.el.setAttribute('aria-label', this.attrs.accessibility_label);\n        }\n\n        // Accessibility visibility.\n        if (this.attrs.accessibility_hidden === true) {\n            this.el.setAttribute('aria-hidden', true);\n        }\n\n        // Feature labels.\n        if (Array.isArray(this.attrs.feature_labels)) {\n            const featureLabels = this.attrs.feature_labels.filter(\n                (featureLabel) => /^[a-z_-]{1,14}$/.test(featureLabel)\n            );\n\n            if (featureLabels.length) {\n                this.el.setAttribute(\n                    'data-feature-labels',\n                    featureLabels.join(',')\n                );\n            }\n        }\n\n        // Title.\n        if (isDefinedStr(this.attrs.title)) {\n            this.el.setAttribute('title', this.attrs.title);\n        }\n\n        // Gravity.\n        if (isDefinedStr(this.attrs.gravity)) {\n            this.el.setAttribute('data-gravity', this.attrs.gravity);\n        }\n\n        // Link.\n        if (isDefinedStr(this.attrs.link)) {\n            this.el.setAttribute('data-link', '');\n            this.el.addEventListener(\n                'click',\n                () => {\n                    window.open(this.attrs.link, '_blank');\n                },\n                false\n            );\n        }\n\n        // Width.\n        if (this.attrs.layout_width === 'match_parent') {\n            this.el.style.width = '100%';\n        } else if (this.attrs.layout_width === 'wrap_content') {\n            this.el.style.display = 'inline-block';\n        } else if (this.attrs.layout_width != null) {\n            this.el.style.width = formatUnit(this.attrs.layout_width);\n        }\n\n        // Height.\n        if (this.attrs.layout_height === 'match_parent') {\n            this.el.style.height = '100%';\n        } else if (this.attrs.layout_height === 'wrap_content') {\n            this.el.style.height = 'auto';\n        } else if (this.attrs.layout_height != null) {\n            this.el.style.height = formatUnit(this.attrs.layout_height);\n        }\n\n        // Min width.\n        if (this.attrs.min_width != null) {\n            this.el.style.minWidth = formatUnit(this.attrs.min_width);\n        }\n\n        // Max width.\n        if (this.attrs.max_width != null) {\n            this.el.style.maxWidth = formatUnit(this.attrs.max_width);\n        }\n\n        // Min height.\n        if (this.attrs.min_height != null) {\n            this.el.style.minHeight = formatUnit(this.attrs.min_height);\n        }\n\n        // Max height.\n        if (this.attrs.max_height != null) {\n            this.el.style.maxHeight = formatUnit(this.attrs.max_height);\n        }\n\n        // Position in relation to parent.\n        if (this.attrs.layout_top != null) {\n            this.el.style.top = formatUnit(this.attrs.layout_top);\n        }\n        if (this.attrs.layout_left != null) {\n            this.el.style.left = formatUnit(this.attrs.layout_left);\n        }\n        if (this.attrs.layout_right != null) {\n            this.el.style.right = formatUnit(this.attrs.layout_right);\n        }\n        if (this.attrs.layout_bottom != null) {\n            this.el.style.bottom = formatUnit(this.attrs.layout_bottom);\n        }\n\n        // Background.\n        if (isDefinedStr(this.attrs.background_color)) {\n            this.el.style.backgroundColor = this.attrs.background_color;\n        }\n        if (isDefinedStr(this.attrs.background_image)) {\n            this.el.setAttribute('data-src', this.attrs.background_image);\n            this.lazyload = true;\n        }\n        if (\n            ['repeat_x', 'repeat_y', 'repeat'].indexOf(\n                this.attrs.background_tile_mode\n            ) !== -1\n        ) {\n            this.el.style.backgroundRepeat = this.attrs.background_tile_mode.replace(\n                '_',\n                '-'\n            );\n        }\n        if (isDefinedStr(this.attrs.background_image_position)) {\n            this.el.style.backgroundPosition = this.attrs.background_image_position.replace(\n                '_',\n                ' '\n            );\n        }\n        if (this.attrs.background_image_scale_type === 'center_crop') {\n            this.el.style.backgroundSize = 'cover';\n        } else if (this.attrs.background_image_scale_type === 'center_inside') {\n            this.el.style.backgroundSize = 'contain';\n        }\n\n        // Margin.\n        if (this.attrs.layout_margin != null) {\n            this.el.style.margin = formatUnit(this.attrs.layout_margin);\n        }\n        if (this.attrs.layout_margin_top != null) {\n            this.el.style.marginTop = formatUnit(this.attrs.layout_margin_top);\n        }\n        if (this.attrs.layout_margin_left != null) {\n            this.el.style.marginLeft = formatUnit(\n                this.attrs.layout_margin_left\n            );\n        }\n        if (this.attrs.layout_margin_right != null) {\n            this.el.style.marginRight = formatUnit(\n                this.attrs.layout_margin_right\n            );\n        }\n        if (this.attrs.layout_margin_bottom != null) {\n            this.el.style.marginBottom = formatUnit(\n                this.attrs.layout_margin_bottom\n            );\n        }\n\n        // Padding.\n        if (this.attrs.padding != null) {\n            this.el.style.padding = formatUnit(this.attrs.padding);\n        }\n        if (this.attrs.padding_top != null) {\n            this.el.style.paddingTop = formatUnit(this.attrs.padding_top);\n        }\n        if (this.attrs.padding_left != null) {\n            this.el.style.paddingLeft = formatUnit(this.attrs.padding_left);\n        }\n        if (this.attrs.padding_right != null) {\n            this.el.style.paddingRight = formatUnit(this.attrs.padding_right);\n        }\n        if (this.attrs.padding_bottom != null) {\n            this.el.style.paddingBottom = formatUnit(this.attrs.padding_bottom);\n        }\n\n        // Corner radius.\n        if (this.attrs.corner_radius != null) {\n            this.el.style.borderRadius = formatUnit(this.attrs.corner_radius);\n        }\n        if (this.attrs.corner_top_left_radius != null) {\n            this.el.style.borderTopLeftRadius = formatUnit(\n                this.attrs.corner_top_left_radius\n            );\n        }\n        if (this.attrs.corner_top_right_radius != null) {\n            this.el.style.borderTopRightRadius = formatUnit(\n                this.attrs.corner_top_right_radius\n            );\n        }\n        if (this.attrs.corner_bottom_left_radius != null) {\n            this.el.style.borderBottomLeftRadius = formatUnit(\n                this.attrs.corner_bottom_left_radius\n            );\n        }\n        if (this.attrs.corner_bottom_right_radius != null) {\n            this.el.style.borderBottomRightRadius = formatUnit(\n                this.attrs.corner_bottom_right_radius\n            );\n        }\n\n        // Clip children.\n        if (this.attrs.clip_children === false) {\n            this.el.style.overflow = 'visible';\n        }\n\n        // Shadow.\n        const shadow = this.getShadow();\n\n        if (shadow != null) {\n            this.el.style.boxShadow = `${shadow.dx}px ${shadow.dy}px ${shadow.radius}px ${shadow.color}`;\n        }\n\n        // Stroke.\n        const strokeStyles = ['solid', 'dotted', 'dashed'];\n\n        if (this.attrs.stroke_width != null) {\n            this.el.style.borderWidth = formatUnit(this.attrs.stroke_width);\n        }\n        if (this.attrs.stroke_color != null) {\n            this.el.style.borderColor = this.attrs.stroke_color;\n        }\n        if (strokeStyles.indexOf(this.attrs.stroke_style) !== -1) {\n            this.el.style.borderStyle = this.attrs.stroke_style;\n        }\n\n        if (this.attrs.stroke_top_width != null) {\n            this.el.style.borderTopWidth = formatUnit(\n                this.attrs.stroke_top_width\n            );\n        }\n        if (this.attrs.stroke_top_color != null) {\n            this.el.style.borderTopColor = this.attrs.stroke_top_color;\n        }\n\n        if (this.attrs.stroke_left_width != null) {\n            this.el.style.borderLeftWidth = formatUnit(\n                this.attrs.stroke_left_width\n            );\n        }\n        if (this.attrs.stroke_left_color != null) {\n            this.el.style.borderLeftColor = this.attrs.stroke_left_color;\n        }\n\n        if (this.attrs.stroke_right_width != null) {\n            this.el.style.borderRightWidth = formatUnit(\n                this.attrs.stroke_right_width\n            );\n        }\n        if (this.attrs.stroke_right_color != null) {\n            this.el.style.borderRightColor = this.attrs.stroke_right_color;\n        }\n\n        if (this.attrs.stroke_bottom_width != null) {\n            this.el.style.borderBottomWidth = formatUnit(\n                this.attrs.stroke_bottom_width\n            );\n        }\n        if (this.attrs.stroke_bottom_color != null) {\n            this.el.style.borderBottomColor = this.attrs.stroke_bottom_color;\n        }\n\n        // Flex.\n        if (typeof this.attrs.layout_flex_shrink === 'number') {\n            this.el.style.flexShrink = this.attrs.layout_flex_shrink;\n            this.el.style.msFlexShrink = this.attrs.layout_flex_shrink;\n        }\n        if (typeof this.attrs.layout_flex_grow === 'number') {\n            this.el.style.flexGrow = this.attrs.layout_flex_grow;\n            this.el.style.msFlexGrow = this.attrs.layout_flex_grow;\n        }\n        if (this.attrs.layout_flex_basis != null) {\n            this.el.style.flexBasis = formatUnit(this.attrs.layout_flex_basis);\n            this.el.style.msFlexBasis = formatUnit(\n                this.attrs.layout_flex_basis\n            );\n        }\n\n        // Transforms.\n        const transforms = this.getTransforms();\n\n        if (transforms.length > 0) {\n            this.el.style.transform = transforms.join(' ');\n        }\n\n        // Transform origin.\n        if (\n            Array.isArray(this.attrs.transform_origin) &&\n            this.attrs.transform_origin.length === 2\n        ) {\n            this.el.style.transformOrigin = [\n                formatUnit(this.attrs.transform_origin[0]),\n                formatUnit(this.attrs.transform_origin[1])\n            ].join(' ');\n        }\n    }\n\n    getTransforms() {\n        const transforms = [];\n        const translateX = formatUnit(this.attrs.transform_translate_x);\n        const translateY = formatUnit(this.attrs.transform_translate_y);\n\n        if (translateX !== 0) {\n            transforms.push(`translateX(${translateX})`);\n        }\n\n        if (translateY !== 0) {\n            transforms.push(`translateY(${translateY})`);\n        }\n\n        if (\n            typeof this.attrs.transform_rotate === 'number' &&\n            this.attrs.transform_rotate !== 0\n        ) {\n            transforms.push(`rotate(${this.attrs.transform_rotate}deg)`);\n        }\n\n        if (\n            typeof this.attrs.transform_scale === 'number' &&\n            this.attrs.transform_scale !== 1\n        ) {\n            transforms.push(`scale(${this.attrs.transform_scale})`);\n        }\n\n        return transforms;\n    }\n\n    getShadow() {\n        if (isDefinedStr(this.attrs.shadow_color)) {\n            const dx =\n                typeof this.attrs.shadow_dx === 'number'\n                    ? this.attrs.shadow_dx\n                    : 0;\n            const dy =\n                typeof this.attrs.shadow_dy === 'number'\n                    ? this.attrs.shadow_dy\n                    : 0;\n            const radius =\n                typeof this.attrs.shadow_radius === 'number'\n                    ? this.attrs.shadow_radius\n                    : 0;\n            const color = this.attrs.shadow_color;\n\n            return {\n                dx,\n                dy,\n                radius,\n                color\n            };\n        }\n    }\n}\nView.prototype.tagName = 'div';\nView.prototype.className = null;\nexport default View;\n","import './absolute-layout.styl';\nimport View from './view';\n\nclass AbsoluteLayout extends View {}\nAbsoluteLayout.prototype.className = 'incito__absolute-layout-view';\nexport default AbsoluteLayout;\n","import './flex-layout.styl';\nimport View from './view';\n\nconst alignItemModes = [\n    'stretch',\n    'center',\n    'flex-start',\n    'flex-end',\n    'baseline'\n];\nconst flexJustifyModes = [\n    'flex-start',\n    'flex-end',\n    'center',\n    'space-between',\n    'space-around'\n];\nconst flexDirectionModes = ['row', 'column'];\n\nclass FlexLayout extends View {\n    render() {\n        if (alignItemModes.indexOf(this.attrs.layout_flex_align_items) !== -1) {\n            this.el.style.alignItems = this.attrs.layout_flex_align_items;\n            this.el.style.msAlignItems = this.attrs.layout_flex_align_items;\n        }\n\n        if (\n            flexJustifyModes.indexOf(this.attrs.layout_flex_justify_content) !==\n            -1\n        ) {\n            this.el.style.justifyContent = this.attrs.layout_flex_justify_content;\n            this.el.style.msFlexPack = this.attrs.layout_flex_justify_content;\n        }\n\n        if (\n            flexDirectionModes.indexOf(this.attrs.layout_flex_direction) !== -1\n        ) {\n            this.el.style.flexDirection = this.attrs.layout_flex_direction;\n            this.el.style.msFlexDirection = this.attrs.layout_flex_direction;\n        }\n\n        return this;\n    }\n}\nFlexLayout.prototype.className = 'incito__flex-layout-view';\nexport default FlexLayout;\n","import {isDefinedStr} from '../utils';\nimport './image.styl';\nimport View from './view';\n\nclass Image extends View {\n    render() {\n        if (isDefinedStr(this.attrs.src)) {\n            this.el.setAttribute('data-src', this.attrs.src);\n        }\n\n        if (isDefinedStr(this.attrs.label)) {\n            this.el.setAttribute('alt', this.attrs.label);\n        } else {\n            this.el.setAttribute('alt', '');\n        }\n\n        return this;\n    }\n}\nImage.prototype.tagName = 'img';\nImage.prototype.className = 'incito__image-view';\nImage.prototype.lazyload = true;\nexport default Image;\n","import {escapeHTML, isDefinedStr} from '../utils';\nimport './text.styl';\nimport View from './view';\n\nclass TextView extends View {\n    render() {\n        if (!isDefinedStr(this.attrs.text)) {\n            return this;\n        }\n\n        const textStyles = (this.attrs.text_style || '').split('|');\n        let {text} = this.attrs;\n\n        if (Array.isArray(this.attrs.spans) && this.attrs.spans.length > 0) {\n            const parsedText = this.parseSpans(text, this.attrs.spans);\n            text = parsedText.map((item) => {\n                const escapedText = escapeHTML(item.text || '');\n\n                if (item.span?.name === 'link' && item.span.url != null) {\n                    return `<a href=\"${encodeURI(\n                        item.span.url\n                    )}\" rel=\"external\" target=\"_blank\">${escapedText}</a>`;\n                }\n                if (item.span?.name != null) {\n                    const spanName = item.span.name;\n\n                    return `<span data-name=\"${spanName}\">${escapedText}</span>`;\n                }\n                return escapedText;\n            });\n            text = text.join('');\n        } else {\n            text = escapeHTML(text);\n        }\n\n        if (this.attrs.text_prevent_widow) {\n            text = text\n                .replace(/&nbsp;([^\\s]+)$/, ' $1')\n                .replace(/\\s([^\\s]+)\\s*$/, '&nbsp;$1');\n        }\n\n        this.el.innerHTML = text.replace(/\\n/g, '<br>');\n\n        // Font family.\n        if (\n            Array.isArray(this.attrs.font_family) &&\n            this.attrs.font_family.length > 0\n        ) {\n            this.el.style.fontFamily = `${this.attrs.font_family.join(\n                ', '\n            )} !important`;\n        } else {\n            this.el.style.fontFamily = 'inherit !important';\n        }\n\n        // Text size.\n        if (this.attrs.text_size != null) {\n            this.el.style.fontSize = `${this.attrs.text_size}px`;\n        }\n\n        // Line height.\n        if (this.attrs.line_spacing_multiplier != null) {\n            this.el.style.lineHeight = this.attrs.line_spacing_multiplier;\n        }\n\n        // Text color.\n        if (this.attrs.text_color != null) {\n            this.el.style.color = this.attrs.text_color;\n        }\n\n        // Text styles.\n        if (textStyles.indexOf('bold') !== -1) {\n            this.el.style.fontWeight = 'bold';\n        }\n        if (textStyles.indexOf('italic') !== -1) {\n            this.el.style.fontStyle = 'italic';\n        }\n\n        if (Array.isArray(this.attrs.text_decoration_line)) {\n            this.el.style.textDecorationLine = this.attrs.text_decoration_line.join(\n                ' '\n            );\n        }\n\n        // Text shadow.\n        const textShadow = this.getTextShadow();\n\n        if (isDefinedStr(this.attrs.text_shadow)) {\n            this.el.style.textShadow = this.attrs.text_shadow;\n        } else if (textShadow != null) {\n            this.el.style.textShadow = `${textShadow.dx}px ${textShadow.dy}px ${textShadow.radius}px ${textShadow.color}`;\n        }\n\n        // Text alignment.\n        if (this.attrs.text_alignment === 'left') {\n            this.el.style.textAlign = 'left';\n        } else if (this.attrs.text_alignment === 'center') {\n            this.el.style.textAlign = 'center';\n        } else if (this.attrs.text_alignment === 'right') {\n            this.el.style.textAlign = 'right';\n        }\n\n        // Max lines.\n        if (this.attrs.single_line === true || this.attrs.max_lines === 1) {\n            this.el.setAttribute('data-single-line', true);\n        } else if (typeof this.attrs.max_lines === 'number') {\n            this.el.style.display = '-webkit-box';\n            this.el.style.webkitLineClamp = this.attrs.max_lines;\n            this.el.style.webkitBoxOrient = 'vertical';\n        }\n\n        // All caps.\n        if (this.attrs.text_all_caps === true) {\n            this.el.style.textTransform = 'uppercase';\n        }\n\n        return this;\n    }\n\n    parseSpans(text, spans = []) {\n        const result = [];\n\n        if (spans.length === 0) {\n            result.push({\n                text\n            });\n        } else if (spans[0].start > 0) {\n            result.push({\n                text: text.slice(0, spans[0].start)\n            });\n        }\n\n        spans.forEach((span, i) => {\n            const startIndex = span.start;\n            const endIndex = span.end;\n\n            result.push({\n                text: text.slice(startIndex, endIndex),\n                span\n            });\n\n            if (i === spans.length - 1) {\n                if (endIndex < text.length) {\n                    result.push({\n                        text: text.slice(endIndex, text.length)\n                    });\n                }\n            } else if (endIndex < spans[i + 1].start) {\n                result.push({\n                    text: text.slice(endIndex, spans[i + 1].start)\n                });\n            }\n        });\n\n        return result;\n    }\n\n    getTextShadow() {\n        if (isDefinedStr(this.attrs.text_shadow_color)) {\n            const dx =\n                typeof this.attrs.text_shadow_dx === 'number'\n                    ? this.attrs.text_shadow_dx\n                    : 0;\n            const dy =\n                typeof this.attrs.text_shadow_dy === 'number'\n                    ? this.attrs.text_shadow_dy\n                    : 0;\n            const radius =\n                typeof this.attrs.text_shadow_radius === 'number'\n                    ? this.attrs.text_shadow_radius\n                    : 0;\n            const color = this.attrs.text_shadow_color;\n\n            return {\n                dx,\n                dy,\n                radius,\n                color\n            };\n        }\n    }\n}\nTextView.prototype.tagName = 'p';\nTextView.prototype.className = 'incito__text-view';\nexport default TextView;\n","import {isDefinedStr} from '../utils';\nimport View from './view';\n\nclass Video extends View {\n    render() {\n        if (!isDefinedStr(this.attrs.src)) {\n            return this;\n        }\n\n        this.el.muted = true;\n        this.el.preload = 'metadata';\n        this.el.setAttribute('muted', '');\n        this.el.setAttribute('playsinline', 'true');\n        this.el.setAttribute('webkit-playsinline', 'true');\n        this.el.setAttribute('data-src', this.attrs.src);\n        this.el.setAttribute('data-mime', this.attrs.mime);\n\n        if (this.attrs.autoplay === true) {\n            this.el.autoplay = true;\n        }\n\n        if (this.attrs.loop === true) {\n            this.el.loop = true;\n        }\n\n        if (this.attrs.controls === true) {\n            this.el.controls = true;\n        }\n\n        return this;\n    }\n}\nVideo.prototype.className = 'incito__video-view';\nVideo.prototype.tagName = 'video';\nVideo.prototype.lazyload = true;\nexport default Video;\n","import {isDefinedStr} from '../utils';\nimport './video-embed.styl';\nimport View from './view';\n\nconst allowedHostnames = ['.youtube.com', '.vimeo.com', '.twentythree.net'];\n\nclass FlexLayout extends View {\n    render() {\n        if (!isDefinedStr(this.attrs.src)) {\n            return this;\n        }\n\n        const {src} = this.attrs;\n        const linkEl = document.createElement('a');\n\n        linkEl.setAttribute('href', src);\n\n        const isSupported = allowedHostnames.find(\n            (hostname) => linkEl.hostname.slice(-hostname.length) === hostname\n        );\n\n        if (isSupported) {\n            this.el.setAttribute('data-src', src);\n            this.lazyload = true;\n        }\n\n        return this;\n    }\n}\nFlexLayout.prototype.className = 'incito__video-embed-view';\nFlexLayout.prototype.lazyload = false;\nexport default FlexLayout;\n","import './incito.styl';\nimport {isDefinedStr, throttle} from './utils';\nimport * as views from './views';\n\nlet requestIdleCallback;\nif (\n    typeof window !== 'undefined' &&\n    typeof window.requestIdleCallback === 'function'\n) {\n    ({requestIdleCallback} = window);\n} else {\n    requestIdleCallback = (cb) =>\n        setTimeout(function () {\n            const start = Date.now();\n            return cb({\n                didTimeout: false,\n                timeRemaining() {\n                    return Math.max(0, 50 - (Date.now() - start));\n                }\n            });\n        }, 1);\n}\n\n// like requestIdleCallback but effectively synchronous\n// as we give infinite time to run\nconst syncIdleCallback = function (cb) {\n    cb({\n        timeRemaining() {\n            return Number.MAX_VALUE;\n        },\n        didTimeout: false\n    });\n};\n\nexport default class Incito {\n    constructor(\n        containerEl,\n        {\n            incito = {},\n            renderLaziness = 1 // 0: All synchronous. 1: Visible synchronous, rest lazy. 2: All lazy.\n        }\n    ) {\n        this.containerEl = containerEl;\n        this.incito = incito;\n        this.renderLaziness = renderLaziness;\n        this.el = document.createElement('div');\n        this.ids = {};\n        this.views = flattenViews([], this.incito.root_view);\n        this.viewsLength = this.views.length;\n        this.viewIndex = 0;\n        this.lazyloadables = [];\n        this.lazyloader = throttle(this.lazyload.bind(this), 150);\n        this.renderedOutsideOfViewport = false;\n        this._events = {};\n    }\n\n    bind(event, fn) {\n        this._events[event] = this._events[event] || [];\n        return this._events[event].push(fn);\n    }\n\n    unbind(event, fn) {\n        if (this._events[event]) {\n            return this._events[event].splice(\n                this._events[event].indexOf(fn),\n                1\n            );\n        }\n    }\n\n    trigger(event) {\n        if (this._events[event]) {\n            return this._events[event].map(function (e) {\n                return e.apply(this, Array.prototype.slice.call(arguments, 1));\n            });\n        }\n    }\n\n    start() {\n        let triggeredVisibleRendered = false;\n        var render = (IdleDeadline) => {\n            this.render(IdleDeadline);\n\n            if (this.viewIndex <= this.viewsLength - 1) {\n                this.renderCallbackHandle = requestIdleCallback(render);\n            } else {\n                // make sure visibleRendered gets triggered even\n                // if renderedOutsideOfViewport wasn't\n                this.renderedOutsideOfViewport = true;\n                this.trigger('allRendered');\n            }\n\n            if (this.renderedOutsideOfViewport && !triggeredVisibleRendered) {\n                this.trigger('visibleRendered');\n\n                triggeredVisibleRendered = true;\n            }\n\n            if (this.renderedOutsideOfViewport) {\n                this.lazyload(0);\n            }\n        };\n\n        this.el.className = 'incito';\n        if (this.incito.locale != null) {\n            this.el.setAttribute('lang', this.incito.locale);\n        }\n\n        loadFonts(this.incito.font_assets);\n        this.applyTheme(this.incito.theme);\n\n        this.containerEl.appendChild(this.el);\n\n        // do first render synchronously unless we're very lazy\n        if (this.renderLaziness === 2) {\n            this.renderCallbackHandle = requestIdleCallback(render);\n        } else {\n            syncIdleCallback(render);\n        }\n\n        document.addEventListener('scroll', this.lazyloader, true);\n        window.addEventListener('resize', this.lazyloader, false);\n\n        return this;\n    }\n\n    destroy() {\n        cancelIdleCallback(this.renderCallbackHandle);\n        this.containerEl.removeChild(this.el);\n\n        document.removeEventListener('scroll', this.lazyloader, true);\n        window.removeEventListener('resize', this.lazyloader, false);\n\n        this.trigger('destroyed');\n    }\n\n    render(IdleDeadline) {\n        while (\n            IdleDeadline.timeRemaining() > 0 &&\n            this.viewIndex <= this.viewsLength - 1\n        ) {\n            const item = this.views[this.viewIndex];\n            const {attrs} = item;\n            const match = views[attrs.view_name] ?? views.View;\n            const view = new match(attrs).render();\n\n            if (attrs.id != null && typeof attrs.meta === 'object') {\n                this.ids[attrs.id] = attrs.meta;\n            }\n\n            if (view.lazyload === true) {\n                this.lazyloadables.push(view.el);\n            }\n\n            item.view = view;\n\n            if (item.parent?.view != null) {\n                item.parent.view.el.appendChild(view.el);\n            } else {\n                this.el.appendChild(view.el);\n            }\n\n            this.viewIndex++;\n\n            // check if we rendered something out of the viewport for the first time and yield.\n            // the check is expensive so it's faster to only check every few iterations, the downside is that\n            // we might overrender a tiny bit but it comes out to faster than checking every iteration.\n            if (\n                this.renderLaziness &&\n                !(this.viewIndex % 20) &&\n                !this.renderedOutsideOfViewport &&\n                !isInsideViewport(view.el)\n            ) {\n                this.renderedOutsideOfViewport = true;\n\n                break;\n            }\n        }\n    }\n\n    applyTheme(theme = {}) {\n        if (Array.isArray(theme.font_family)) {\n            this.el.style.fontFamily = theme.font_family.join(', ');\n        }\n\n        if (isDefinedStr(theme.background_color)) {\n            this.el.style.backgroundColor = theme.background_color;\n        }\n\n        if (isDefinedStr(theme.text_color)) {\n            this.el.style.color = theme.text_color;\n        }\n\n        if (typeof theme.line_spacing_multiplier === 'number') {\n            this.el.style.lineHeight = theme.line_spacing_multiplier;\n        }\n    }\n\n    lazyload(threshold) {\n        this.lazyloadables = this.lazyloadables.filter(function (el) {\n            if (isInsideViewport(el, threshold)) {\n                revealElement(el);\n\n                return false;\n            } else {\n                return true;\n            }\n        });\n    }\n}\n\nvar flattenViews = function (views, attrs, parent) {\n    const item = {\n        attrs,\n        view: null,\n        parent\n    };\n\n    views.push(item);\n\n    if (Array.isArray(attrs.child_views)) {\n        attrs.child_views.forEach((childAttrs) =>\n            flattenViews(views, childAttrs, item)\n        );\n    }\n\n    return views;\n};\n\nvar loadFonts = function (fontAssets = {}) {\n    let key, urls, value;\n    if ('FontFace' in window) {\n        for (key in fontAssets) {\n            value = fontAssets[key];\n            urls = value.src.map((src) => `url(${src[1]})`).join(', ');\n            const font = new FontFace(key, urls, {\n                style: value.style ?? 'normal',\n                weight: value.weight ?? 'normal',\n                display: 'swap'\n            });\n\n            document.fonts.add(font);\n\n            font.load();\n        }\n    } else {\n        const styleEl = document.createElement('style');\n\n        for (key in fontAssets) {\n            value = fontAssets[key];\n            urls = value.src\n                .map((src) => `url('${src[1]}') format('${src[0]}')`)\n                .join(', ');\n            const text = `\\\n@font-face {\n    font-family: '${key}';\n    font-display: swap;\n    src: ${urls};\n}\\\n`;\n\n            styleEl.appendChild(document.createTextNode(text));\n        }\n\n        document.head.appendChild(styleEl);\n    }\n};\n\nvar isInsideViewport = function (el, threshold) {\n    const windowHeight = window.innerHeight;\n    threshold = threshold ?? windowHeight;\n    const rect = el.getBoundingClientRect();\n\n    return (\n        rect.top <= windowHeight + threshold &&\n        rect.top + rect.height >= -threshold\n    );\n};\n\nvar revealElement = function (el) {\n    const src = el.getAttribute('data-src');\n\n    if (el.tagName.toLowerCase() === 'img') {\n        el.addEventListener('load', function () {\n            el.className += ' incito--loaded';\n        });\n        el.setAttribute('src', src);\n    } else if (el.tagName.toLowerCase() === 'video') {\n        const sourceEl = document.createElement('source');\n\n        sourceEl.setAttribute('src', src);\n        sourceEl.setAttribute('type', el.getAttribute('data-mime'));\n\n        el.appendChild(sourceEl);\n    } else if (/incito__video-embed-view/gi.test(el.className)) {\n        const iframeEl = document.createElement('iframe');\n\n        iframeEl.setAttribute(\n            'allow',\n            'fullscreen; accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture'\n        );\n        iframeEl.setAttribute('src', src);\n\n        el.appendChild(iframeEl);\n    } else {\n        el.style.backgroundImage = `url(${src})`;\n    }\n};\n","import MicroEvent from 'microevent';\n\nclass IncitoPublicationEventTracking extends MicroEvent {\n    constructor(eventTracker, details) {\n        super();\n        this.eventTracker = eventTracker;\n        this.details = details;\n    }\n\n    trackOpened() {\n        if (this.eventTracker == null || this.details == null) {\n            return this;\n        }\n\n        this.eventTracker.trackIncitoPublicationOpened({\n            'ip.paged': this.details.types.indexOf('paged') > -1,\n            'ip.id': this.details.id,\n            vt: this.eventTracker.createViewToken(this.details.id)\n        });\n\n        return this;\n    }\n}\n\nexport default IncitoPublicationEventTracking;\n","import MicroEvent from 'microevent';\nimport Incito from '../../incito-browser/incito';\nimport EventTracking from './event-tracking';\nimport './viewer.styl';\n\nclass Viewer extends MicroEvent {\n    static Incito = Incito;\n    constructor(el, options = {}) {\n        super();\n        this.el = el;\n        this.options = options;\n        this.incito = new Incito(this.el, {\n            incito: this.options.incito,\n            renderLaziness: this.options.renderLaziness\n        });\n        this._eventTracking = new EventTracking(\n            this.options.eventTracker,\n            this.options.details\n        );\n    }\n\n    start() {\n        this.incito.start();\n        this.el.classList.add('sgn-incito--started');\n        this._eventTracking.trackOpened();\n\n        return this;\n    }\n\n    destroy() {\n        this.incito.destroy();\n    }\n}\n\nexport default Viewer;\n","export default class Controls {\n    constructor(viewer) {\n        this.scroll = this.scroll.bind(this);\n        this.viewer = viewer;\n        this.progressEl = this.viewer.el.querySelector('.sgn-incito__progress');\n        this.isScrolling = false;\n\n        if (this.progressEl) {\n            this.progressEl.textContent = '0 %';\n\n            window.addEventListener('scroll', this.scroll, false);\n\n            this.viewer.bind('destroyed', () => {\n                window.removeEventListener('scroll', this.scroll, false);\n            });\n        }\n    }\n\n    scroll() {\n        const winHeight = window.innerHeight;\n        const rect = this.viewer.el.getBoundingClientRect();\n        const progress = Math.min(\n            100,\n            Math.round((Math.abs(rect.top - winHeight) / rect.height) * 100)\n        );\n\n        clearTimeout(this.scrollTimeout);\n        this.scrollTimeout = setTimeout(() => {\n            this.isScrolling = false;\n\n            this.viewer.el.classList.remove('sgn-incito--scrolling');\n        }, 1000);\n\n        if (this.isScrolling === false) {\n            this.viewer.el.classList.add('sgn-incito--scrolling');\n\n            this.isScrolling = true;\n        }\n\n        this.progressEl.textContent = `${progress} %`;\n        this.viewer.trigger('progress', {progress});\n    }\n}\n","import fetch from 'cross-fetch';\nimport Gator from '../../../vendor/gator';\nimport SGN from '../../sgn-sdk';\nimport * as clientLocalStorage from '../../storage/client-local';\nimport {error, getDeviceCategory, getOrientation, getPointer} from '../../util';\nimport request from '../core/request';\nimport Controls from './controls';\nimport Viewer from './viewer';\n\nexport default class Bootstrapper {\n    constructor(options = {}) {\n        this.fetchDetails = this.fetchDetails.bind(this);\n        this.options = options;\n        this.deviceCategory = this.getDeviceCategory();\n        this.pixelRatio = this.getPixelRatio();\n        this.pointer = this.getPointer();\n        this.orientation = this.getOrientation();\n        this.time = this.getTime();\n        this.locale = this.getLocale();\n        this.maxWidth = this.getMaxWidth();\n        this.featureLabels = this.getFeatureLabels();\n        this.versionsSupported = ['1.0.0'];\n    }\n\n    getDeviceCategory() {\n        return getDeviceCategory();\n    }\n\n    getPixelRatio() {\n        return window.devicePixelRatio || 1;\n    }\n\n    getPointer() {\n        return getPointer();\n    }\n\n    getOrientation() {\n        let orientation = getOrientation(screen.width, screen.height);\n        if (orientation === 'quadratic') {\n            orientation = 'horizontal';\n        }\n\n        return orientation;\n    }\n\n    getTime() {\n        return new Date().toISOString();\n    }\n\n    getLocale() {\n        let localeChain = [];\n        let locale = null;\n\n        if (\n            Array.isArray(navigator.languages) &&\n            navigator.languages.length > 0\n        ) {\n            localeChain = localeChain.concat(navigator.languages);\n        } else if (\n            typeof navigator.language === 'string' &&\n            navigator.language.length > 0\n        ) {\n            localeChain.push(navigator.language);\n        } else if (\n            typeof navigator.browserLanguage === 'string' &&\n            navigator.browserLanguage.length > 0\n        ) {\n            localeChain.push(navigator.browserLanguage);\n        }\n\n        localeChain.push('en_US');\n\n        for (let prefLocale of localeChain) {\n            if (prefLocale == null) {\n                continue;\n            }\n\n            prefLocale = prefLocale.replace('-', '_');\n\n            if (/[a-z][a-z]_[A-Z][A-Z]/g.test(prefLocale)) {\n                locale = prefLocale;\n\n                break;\n            }\n        }\n\n        return locale;\n    }\n\n    getMaxWidth() {\n        if (Math.abs(window.orientation) === 90) {\n            return Math.min(this.options.el.offsetWidth, screen.width);\n        } else {\n            return this.options.el.offsetWidth;\n        }\n    }\n\n    getFeatureLabels() {\n        let featureLabels = clientLocalStorage.get('incito-feature-labels');\n        if (Array.isArray(featureLabels) === false) {\n            featureLabels = [];\n        }\n\n        return featureLabels;\n    }\n\n    anonymizeFeatureLabels() {\n        const count = this.featureLabels.length;\n        const vector = this.featureLabels.reduce((acc, cur) => {\n            if (!acc[cur]) {\n                acc[cur] = {\n                    key: cur,\n                    value: 0\n                };\n            }\n\n            acc[cur].value++;\n\n            return acc;\n        }, {});\n\n        return Object.values(vector).map((featureLabel) => ({\n            key: featureLabel.key,\n            value: Math.round((featureLabel.value / count) * 100) / 100\n        }));\n    }\n\n    fetch(callback) {\n        this.fetchDetails(this.options.id, (err, details) => {\n            if (err != null) {\n                return callback(err);\n            }\n            this.fetchIncito(details.incito_publication_id, (err1, incito) => {\n                if (err1 != null) {\n                    return callback(err1);\n                }\n                callback(null, {\n                    details,\n                    incito\n                });\n            });\n        });\n    }\n\n    fetchDetails(id, callback) {\n        request({url: `/v2/catalogs/${this.options.id}`}, callback);\n    }\n\n    fetchIncito(id, callback) {\n        const res = fetch(\n            SGN.config.get('coreUrl') +\n                '/v4/rpc/generate_incito_from_publication',\n            {\n                method: 'post',\n                headers: {\n                    'X-Api-Key': SGN.config.get('appKey'),\n                    'Content-Type': 'application/json',\n                    Accept: 'application/json'\n                },\n                body: JSON.stringify({\n                    id,\n                    device_category: this.deviceCategory,\n                    pointer: this.pointer,\n                    orientation: this.orientation,\n                    pixel_ratio: this.pixelRatio,\n                    max_width: this.maxWidth,\n                    versions_supported: this.versionsSupported,\n                    locale_code: this.locale,\n                    time: this.time,\n                    feature_labels: this.anonymizeFeatureLabels(\n                        this.featureLabels\n                    )\n                })\n            }\n        );\n\n        res.then((response) => response.json())\n            .then((incito) => callback(null, incito))\n            .catch((err) => callback(err));\n    }\n\n    createViewer(data) {\n        if (data.incito == null) {\n            throw error(\n                new Error(),\n                'You need to supply valid Incito to create a viewer'\n            );\n        }\n\n        const viewer = new Viewer(this.options.el, {\n            id: this.options.id,\n            details: data.details,\n            incito: data.incito,\n            eventTracker: this.options.eventTracker\n        });\n        // Awfully this Controls instance is destroyed implicitly\n        // via the `destroyed` event of Viewer.\n        new Controls(viewer);\n        const self = this;\n\n        // Persist clicks on feature labels for later anonymization.\n        Gator(viewer.el).on(\n            'click',\n            '.incito__view[data-feature-labels]',\n            function () {\n                const featureLabels = this.getAttribute(\n                    'data-feature-labels'\n                ).split(',');\n\n                self.featureLabels = self.featureLabels.concat(featureLabels);\n\n                while (self.featureLabels.length > 1000) {\n                    self.featureLabels.shift();\n                }\n\n                clientLocalStorage.set(\n                    'incito-feature-labels',\n                    self.featureLabels\n                );\n            }\n        );\n\n        return viewer;\n    }\n}\n","import Mustache from 'mustache';\nconst pairs = {\n    'paged_publication.hotspot_picker.header': 'Which offer did you mean?',\n    'incito_publication.product_picker.header': 'Which product?'\n};\n\nexport function t(key, view) {\n    const template = pairs[key] ?? '';\n\n    return Mustache.render(template, view);\n}\n\nexport function update(translations) {\n    for (let key in translations) {\n        const value = translations[key];\n        pairs[key] = value;\n    }\n}\n","import MicroEvent from 'microevent';\nimport * as keyCodes from '../../key-codes';\nimport {throttle} from '../../util';\n\nclass PagedPublicationControls extends MicroEvent {\n    constructor(el, options = {}) {\n        super();\n        this.destroy = this.destroy.bind(this);\n        this.beforeNavigation = this.beforeNavigation.bind(this);\n        this.prevClicked = this.prevClicked.bind(this);\n        this.nextClicked = this.nextClicked.bind(this);\n        this.closeClicked = this.closeClicked.bind(this);\n        this.keyDown = this.keyDown.bind(this);\n        this.options = options;\n        this.els = {\n            root: el,\n            progress: el.querySelector('.sgn-pp__progress'),\n            progressBar: el.querySelector('.sgn-pp-progress__bar'),\n            progressLabel: el.querySelector('.sgn-pp__progress-label'),\n            prevControl: el.querySelector(\n                '.sgn-pp__control[data-direction=prev]'\n            ),\n            nextControl: el.querySelector(\n                '.sgn-pp__control[data-direction=next]'\n            ),\n            close: el.querySelector('.sgn-pp--close')\n        };\n\n        this.keyDownHandler = throttle(this.keyDown, 150, this);\n        if (this.options.keyboard === true) {\n            this.els.root.addEventListener(\n                'keydown',\n                this.keyDownHandler,\n                false\n            );\n        }\n        this.els.prevControl?.addEventListener(\n            'mousedown',\n            this.prevClicked,\n            false\n        );\n        this.els.nextControl?.addEventListener(\n            'mousedown',\n            this.nextClicked,\n            false\n        );\n        this.els.close?.addEventListener('mousedown', this.closeClicked, false);\n\n        this.bind('beforeNavigation', this.beforeNavigation);\n        this.bind('destroyed', this.destroy);\n    }\n\n    destroy() {\n        if (this.options.keyboard === true) {\n            this.els.root.removeEventListener(\n                'keydown',\n                this.keyDownHandler,\n                false\n            );\n        }\n        this.els.prevControl?.removeEventListener(\n            'mousedown',\n            this.prevClicked,\n            false\n        );\n\n        this.els.nextControl?.removeEventListener(\n            'mousedown',\n            this.nextClicked,\n            false\n        );\n\n        this.els.close?.removeEventListener(\n            'mousedown',\n            this.closeClicked,\n            false\n        );\n    }\n\n    beforeNavigation(e) {\n        const showProgress =\n            typeof e.progressLabel === 'string' && e.progressLabel.length > 0;\n        const visibilityClassName = 'sgn-pp--hidden';\n\n        if (this.els.progress && this.els.progressBar) {\n            this.els.progressBar.style.width = `${e.progress}%`;\n\n            if (showProgress === true) {\n                this.els.progress.classList.remove(visibilityClassName);\n            } else {\n                this.els.progress.classList.add(visibilityClassName);\n            }\n        }\n\n        if (this.els.progressLabel) {\n            if (showProgress === true) {\n                this.els.progressLabel.textContent = e.progressLabel;\n                this.els.progressLabel.classList.remove(visibilityClassName);\n            } else {\n                this.els.progressLabel.classList.add(visibilityClassName);\n            }\n        }\n\n        if (this.els.prevControl) {\n            if (e.verso.newPosition === 0) {\n                this.els.prevControl.classList.add(visibilityClassName);\n            } else {\n                this.els.prevControl.classList.remove(visibilityClassName);\n            }\n        }\n\n        if (this.els.nextControl) {\n            if (e.verso.newPosition === e.pageSpreadCount - 1) {\n                this.els.nextControl.classList.add(visibilityClassName);\n            } else {\n                this.els.nextControl.classList.remove(visibilityClassName);\n            }\n        }\n    }\n\n    prevClicked(e) {\n        e.preventDefault();\n\n        this.trigger('prev');\n    }\n\n    nextClicked(e) {\n        e.preventDefault();\n\n        this.trigger('next');\n    }\n\n    closeClicked(e) {\n        e.preventDefault();\n\n        this.trigger('close');\n    }\n\n    keyDown(e) {\n        const {keyCode} = e;\n\n        if (keyCodes.ARROW_LEFT === keyCode) {\n            this.trigger('prev', {duration: 0});\n        } else if (\n            keyCodes.ARROW_RIGHT === keyCode ||\n            keyCodes.SPACE === keyCode\n        ) {\n            this.trigger('next', {duration: 0});\n        } else if (keyCodes.NUMBER_ONE === keyCode) {\n            this.trigger('first', {duration: 0});\n        }\n    }\n}\n\nexport default PagedPublicationControls;\n","export default class Animation {\n    run = 0;\n    constructor(el) {\n        this.el = el;\n    }\n\n    animate(options = {}, callback = () => {}) {\n        const x = options.x ?? 0;\n        const y = options.y ?? 0;\n        const scale = options.scale ?? 1;\n        const easing = options.easing ?? 'ease-out';\n        const duration = options.duration ?? 0;\n        const run = ++this.run;\n        const transform = `translateX(${x}) translateY(${y}) scale(${scale})`;\n\n        if (this.el.style.transform === transform) {\n            callback();\n        } else if (duration > 0) {\n            var transitionEnd = () => {\n                if (run !== this.run) {\n                    return;\n                }\n\n                this.el.removeEventListener('transitionend', transitionEnd);\n                this.el.style.transition = 'none';\n\n                callback();\n            };\n\n            this.el.addEventListener('transitionend', transitionEnd, false);\n\n            this.el.style.transition = `transform ${easing} ${duration}ms`;\n            this.el.style.transform = transform;\n        } else {\n            this.el.style.transition = 'none';\n            this.el.style.transform = transform;\n\n            callback();\n        }\n\n        return this;\n    }\n}\n","import './page_spread.styl';\n\nexport default class PageSpread {\n    visibility = 'gone';\n    positioned = false;\n    active = false;\n    constructor(el, options = {}) {\n        this.el = el;\n        this.options = options;\n        this.id = this.options.id;\n        this.type = this.options.type;\n        this.pageIds = this.options.pageIds;\n        this.width = this.options.width;\n        this.left = this.options.left;\n        this.maxZoomScale = this.options.maxZoomScale;\n    }\n\n    isZoomable() {\n        return (\n            this.getMaxZoomScale() > 1 &&\n            this.getEl().getAttribute('data-zoomable') !== 'false'\n        );\n    }\n\n    isScrollable() {\n        return this.getEl().classList.contains('verso--scrollable');\n    }\n\n    getEl() {\n        return this.el;\n    }\n\n    getOverlayEls() {\n        return this.getEl().querySelectorAll('.verso__overlay');\n    }\n\n    getPageEls() {\n        return this.getEl().querySelectorAll('.verso__page');\n    }\n\n    getRect() {\n        return this.getEl().getBoundingClientRect();\n    }\n\n    getContentRect() {\n        const rect = {\n            top: null,\n            left: null,\n            right: null,\n            bottom: null,\n            width: null,\n            height: null\n        };\n\n        for (let pageEl of Array.from(this.getPageEls())) {\n            const pageRect = pageEl.getBoundingClientRect();\n\n            if (pageRect.top < rect.top || rect.top == null) {\n                rect.top = pageRect.top;\n            }\n            if (pageRect.left < rect.left || rect.left == null) {\n                rect.left = pageRect.left;\n            }\n            if (pageRect.right > rect.right || rect.right == null) {\n                rect.right = pageRect.right;\n            }\n            if (pageRect.bottom > rect.bottom || rect.bottom == null) {\n                rect.bottom = pageRect.bottom;\n            }\n        }\n\n        rect.top = rect.top ?? 0;\n        rect.left = rect.left ?? 0;\n        rect.right = rect.right ?? 0;\n        rect.bottom = rect.bottom ?? 0;\n        rect.width = rect.right - rect.left;\n        rect.height = rect.bottom - rect.top;\n\n        return rect;\n    }\n\n    getId() {\n        return this.id;\n    }\n\n    getType() {\n        return this.type;\n    }\n\n    getPageIds() {\n        return this.pageIds;\n    }\n\n    getWidth() {\n        return this.width;\n    }\n\n    getLeft() {\n        return this.left;\n    }\n\n    getMaxZoomScale() {\n        return this.maxZoomScale;\n    }\n\n    getVisibility() {\n        return this.visibility;\n    }\n\n    setVisibility(visibility) {\n        if (this.visibility !== visibility) {\n            this.getEl().style.display =\n                visibility === 'visible' ? 'block' : 'none';\n\n            this.visibility = visibility;\n        }\n\n        return this;\n    }\n\n    position() {\n        if (this.positioned === false) {\n            this.getEl().style.left = `${this.getLeft()}%`;\n\n            this.positioned = true;\n        }\n\n        return this;\n    }\n\n    activate() {\n        this.active = true;\n        this.getEl().setAttribute('data-active', this.active);\n    }\n\n    deactivate() {\n        this.active = false;\n        this.getEl().setAttribute('data-active', this.active);\n    }\n}\n","/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n//(function(window, document, exportName, undefined) {\n'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = () =>\n    typeof document != 'undefined' && document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) return;\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            if (Object.hasOwnProperty.call(obj, i)) {\n                iterator.call(context, obj[i], i, obj);\n            }\n        }\n    }\n}\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) Object.assign(childP, properties);\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return val1 === undefined ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    splitStr(types).forEach((type) =>\n        target.addEventListener(type, handler, false)\n    );\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    splitStr(types).forEach((type) =>\n        target.removeEventListener(type, handler, false)\n    );\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) return true;\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nconst toArray = (obj) => Array.prototype.slice.call(obj, 0);\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(array, key, sort) {\n    var results = [];\n    var values = [];\n\n    array.forEach((item, i) => {\n        var val = key ? item[key] : item;\n        if (values.indexOf(val) < 0) results.push(item);\n        values[i] = val;\n    });\n\n    if (sort) results.sort(!key ? undefined : (a, b) => a[key] > b[key]);\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    const camelProp = property[0].toUpperCase() + property.slice(1);\n\n    return VENDOR_PREFIXES.find(\n        (prefix) => (prefix ? prefix + camelProp : property) in obj\n    );\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nlet _uniqueId = 1;\nconst uniqueId = () => _uniqueId++;\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (\n        doc.defaultView ||\n        doc.parentWindow ||\n        (typeof window !== 'undefined' && window)\n    );\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = () =>\n    typeof window !== 'undefined' && 'ontouchstart' in window;\nvar SUPPORT_POINTER_EVENTS = () =>\n    typeof window !== 'undefined' &&\n    prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = () =>\n    SUPPORT_TOUCH() && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function (ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler() {},\n\n    /**\n     * bind the events\n     */\n    init() {\n        this.evEl &&\n            addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget &&\n            addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin &&\n            addEventListeners(\n                getWindowForElement(this.element),\n                this.evWin,\n                this.domHandler\n            );\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy() {\n        this.evEl &&\n            removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget &&\n            removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin &&\n            removeEventListeners(\n                getWindowForElement(this.element),\n                this.evWin,\n                this.domHandler\n            );\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    const inputClass = manager.options.inputClass;\n\n    let Type;\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS()) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH()) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH()) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new Type(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst =\n        eventType & INPUT_START && pointersLen - changedPointersLen === 0;\n    var isFinal =\n        eventType & (INPUT_END | INPUT_CANCEL) &&\n        pointersLen - changedPointersLen === 0;\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) manager.session = {};\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) session.firstInput = simpleCloneInputData(input);\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = (input.center = getCenter(pointers));\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(\n        input.deltaTime,\n        input.deltaX,\n        input.deltaY\n    );\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity =\n        abs(overallVelocity.x) > abs(overallVelocity.y)\n            ? overallVelocity.x\n            : overallVelocity.y;\n\n    input.scale = firstMultiple\n        ? getScale(firstMultiple.pointers, pointers)\n        : 1;\n    input.rotation = firstMultiple\n        ? getRotation(firstMultiple.pointers, pointers)\n        : 0;\n\n    input.maxPointers = !session.prevInput\n        ? input.pointers.length\n        : input.pointers.length > session.prevInput.maxPointers\n        ? input.pointers.length\n        : session.prevInput.maxPointers;\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target))\n        target = input.srcEvent.target;\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity,\n        velocityX,\n        velocityY,\n        direction;\n\n    if (\n        input.eventType != INPUT_CANCEL &&\n        (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)\n    ) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = abs(v.x) > abs(v.y) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    const pointers = input.pointers.map((pointer) => ({\n        clientX: round(pointer.clientX),\n        clientY: round(pointer.clientY)\n    }));\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    let x = 0;\n    let y = 0;\n    pointers.forEach(({clientX, clientY}) => {\n        x += clientX;\n        y += clientY;\n    });\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nconst getVelocity = (deltaTime, x, y) => ({\n    x: x / deltaTime || 0,\n    y: y / deltaTime || 0\n});\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) return DIRECTION_NONE;\n\n    if (abs(x) >= abs(y)) return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nconst getDistance = (p1, p2, [xKey, yKey] = PROPS_XY) =>\n    Math.sqrt(\n        Math.pow(p2[xKey] - p1[xKey], 2) + Math.pow(p2[yKey] - p1[yKey], 2)\n    );\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nconst getAngle = (p1, p2, [xKey, yKey] = PROPS_XY) =>\n    (Math.atan2(p2[yKey] - p1[yKey], p2[xKey] - p1[xKey]) * 180) / Math.PI;\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nconst getRotation = (start, end) =>\n    getAngle(end[1], end[0], PROPS_CLIENT_XY) +\n    getAngle(start[1], start[0], PROPS_CLIENT_XY);\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nconst getScale = (start, end) =>\n    getDistance(end[0], end[1], PROPS_CLIENT_XY) /\n    getDistance(start[0], start[1], PROPS_CLIENT_XY);\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (\n    typeof window !== 'undefined' &&\n    window.MSPointerEvent &&\n    !window.PointerEvent\n) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = this.manager.session.pointerEvents = [];\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType =\n            IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = pointerType == INPUT_TYPE_TOUCH;\n\n        // get index of the event in the store\n        var storeIndex = store.findIndex(\n            (item) => item.pointerId == ev.pointerId\n        );\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) return;\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        // remove from the store\n        if (removePointer) store.splice(storeIndex, 1);\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler(srcEvent) {\n        var type = SINGLE_TOUCH_INPUT_MAP[srcEvent.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) this.started = true;\n\n        if (!this.started) return;\n\n        var [pointers, changedPointers] = normalizeSingleTouches(\n            srcEvent,\n            type\n        );\n\n        // when done, reset the started state\n        if (\n            type & (INPUT_END | INPUT_CANCEL) &&\n            pointers.length - changedPointers.length === 0\n        ) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers,\n            changedPointers,\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) return;\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter((touch) =>\n        hasParent(touch.target, target)\n    );\n\n    // collect touches\n    if (type === INPUT_START) {\n        targetTouches.forEach((targetTouch) => {\n            targetIds[targetTouch.identifier] = true;\n        });\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    changedTouches.forEach((changedTouch) => {\n        if (targetIds[changedTouch.identifier])\n            changedTargetTouches.push(changedTouch);\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL))\n            delete targetIds[changedTouch.identifier];\n    });\n\n    if (!changedTargetTouches.length) return;\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(\n            targetTouches.concat(changedTargetTouches),\n            'identifier',\n            true\n        ),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = this.handler.bind(this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler(manager, inputEvent, inputData) {\n        var isTouch = inputData.pointerType == INPUT_TYPE_TOUCH,\n            isMouse = inputData.pointerType == INPUT_TYPE_MOUSE;\n\n        if (\n            isMouse &&\n            inputData.sourceCapabilities &&\n            inputData.sourceCapabilities.firesTouchEvents\n        ) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function () {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent({srcEvent: {clientX, clientY}}) {\n    return !!this.lastTouches.find(\n        (lastTouch) =>\n            Math.abs(clientX - lastTouch.x) <= DEDUP_DISTANCE &&\n            Math.abs(clientY - lastTouch.y) <= DEDUP_DISTANCE\n    );\n}\n\nvar PREFIXED_TOUCH_ACTION = () => {\n    const te = TEST_ELEMENT();\n    if (te) return prefixed(te.style, 'touchAction');\n};\nvar NATIVE_TOUCH_ACTION = () => PREFIXED_TOUCH_ACTION() !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        var TOUCH_ACTION_MAP = getTouchActionProps();\n        if (\n            NATIVE_TOUCH_ACTION() &&\n            this.manager.element.style &&\n            TOUCH_ACTION_MAP[value]\n        ) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION()] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute() {\n        var actions = [];\n        this.manager.recognizers.forEach((recognizer) => {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var TOUCH_ACTION_MAP = getTouchActionProps();\n        var hasNone =\n            inStr(actions, TOUCH_ACTION_NONE) &&\n            !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY =\n            inStr(actions, TOUCH_ACTION_PAN_Y) &&\n            !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX =\n            inStr(actions, TOUCH_ACTION_PAN_X) &&\n            !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (\n            hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)\n        ) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) return TOUCH_ACTION_NONE;\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) return TOUCH_ACTION_NONE;\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY)\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION))\n        return TOUCH_ACTION_MANIPULATION;\n\n    return TOUCH_ACTION_AUTO;\n}\n\nconst touchVals = [\n    'auto',\n    'manipulation',\n    'pan-y',\n    'pan-x',\n    'pan-x pan-y',\n    'none'\n];\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION()) return false;\n    var cssSupports =\n        typeof window !== 'undefined' && window.CSS && window.CSS.supports;\n    return touchVals.reduce((touchMap, val) => {\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports\n            ? window.CSS.supports('touch-action', val)\n            : true;\n\n        return touchMap;\n    }, {});\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = {...this.defaults, ...options};\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set(options) {\n        Object.assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) return this;\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this))\n            return this;\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this))\n            return this;\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (requireFail.indexOf(otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this))\n            return this;\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = this.requireFail.indexOf(otherRecognizer);\n        if (index > -1) this.requireFail.splice(index, 1);\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) {\n            // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit(input) {\n        if (this.canEmit()) return this.emit(input);\n\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (\n                !(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))\n            ) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = {...inputData};\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (\n            this.state &\n            (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)\n        ) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process() {}, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction() {},\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset() {}\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nconst getRecognizerByNameIfManager = (otherRecognizer, {manager}) =>\n    manager ? manager.get(otherRecognizer) : otherRecognizer;\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction() {\n        var direction = this.options.direction;\n\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) actions.push(TOUCH_ACTION_PAN_Y);\n        if (direction & DIRECTION_VERTICAL) actions.push(TOUCH_ACTION_PAN_X);\n        return actions;\n    },\n\n    directionTest(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction =\n                    x === 0\n                        ? DIRECTION_NONE\n                        : x < 0\n                        ? DIRECTION_LEFT\n                        : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction =\n                    y === 0\n                        ? DIRECTION_NONE\n                        : y < 0\n                        ? DIRECTION_UP\n                        : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return (\n            hasMoved &&\n            distance > options.threshold &&\n            direction & options.direction\n        );\n    },\n\n    attrTest(input) {\n        return (\n            AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN ||\n                (!(this.state & STATE_BEGAN) && this.directionTest(input)))\n        );\n    },\n\n    emit(input) {\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) input.additionalEvent = this.options.event + direction;\n\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest(input) {\n        return (\n            this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold ||\n                this.state & STATE_BEGAN)\n        );\n    },\n\n    emit(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (\n            !validMovement ||\n            !validPointers ||\n            (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)\n        ) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeout(() => {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset() {\n        clearTimeout(this._timer);\n    },\n\n    emit(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && input.eventType & INPUT_END) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest(input) {\n        return (\n            this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold ||\n                this.state & STATE_BEGAN)\n        );\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return (\n            this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity &&\n            input.eventType & INPUT_END\n        );\n    },\n\n    emit(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) this.manager.emit(this.options.event + direction, input);\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if (input.eventType & INPUT_START && this.count === 0)\n            return this.failTimeout();\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) return this.failTimeout();\n\n            var validInterval = this.pTime\n                ? input.timeStamp - this.pTime < options.interval\n                : true;\n            var validMultiTap =\n                !this.pCenter ||\n                getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeout(() => {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout() {\n        this._timer = setTimeout(() => {\n            this.state = STATE_FAILED;\n        }, this.options.interval);\n        return STATE_FAILED;\n    },\n\n    reset() {\n        clearTimeout(this._timer);\n    },\n\n    emit() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(\n        options.recognizers,\n        Hammer.defaults.preset\n    );\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = {...Hammer.defaults, ...options};\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    if (this.options.recognizers) {\n        this.options.recognizers.forEach((item) => {\n            var recognizer = this.add(new item[0](item[1]));\n            item[2] && recognizer.recognizeWith(item[2]);\n            item[3] && recognizer.requireFailure(item[3]);\n        });\n    }\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set(options) {\n        Object.assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) this.touchAction.update();\n\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize(inputData) {\n        var session = this.session;\n        if (session.stopped) return;\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (\n            !curRecognizer ||\n            (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)\n        ) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        recognizers.forEach((recognizer) => {\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (\n                session.stopped !== FORCED_STOP && // 1\n                (!curRecognizer ||\n                    recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))\n            ) {\n                // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (\n                !curRecognizer &&\n                recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)\n            ) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n        });\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get(recognizer) {\n        if (recognizer instanceof Recognizer) return recognizer;\n\n        return (\n            this.recognizers.find(({options}) => options.event == recognizer) ||\n            null\n        );\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) return this;\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) this.remove(existing);\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) return this;\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            const index = this.recognizers.indexOf(recognizer);\n\n            if (index !== -1) {\n                this.recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on(events, handler) {\n        if (events === undefined || handler === undefined) return;\n\n        const handlers = this.handlers;\n        splitStr(events).forEach((event) => {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off(events, handler) {\n        if (events === undefined) return;\n\n        var handlers = this.handlers;\n        splitStr(events).forEach((event) => {\n            if (!handler) {\n                delete handlers[event];\n            } else if (handlers[event]) {\n                handlers[event].splice(handlers[event].indexOf(handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) triggerDomEvent(event, data);\n\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        // no handlers, so skip it all\n        if (!handlers || !handlers.length) return;\n\n        data.type = event;\n        data.preventDefault = function () {\n            data.srcEvent.preventDefault();\n        };\n\n        handlers.forEach((handler) => handler(data));\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    const element = manager.element;\n    if (!element.style) return;\n\n    let prop;\n    Object.entries(manager.options.cssProps).forEach(([value, name]) => {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) manager.oldCssProps = {};\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nObject.assign(Hammer, {\n    INPUT_START,\n    INPUT_MOVE,\n    INPUT_END,\n    INPUT_CANCEL,\n\n    STATE_POSSIBLE,\n    STATE_BEGAN,\n    STATE_CHANGED,\n    STATE_ENDED,\n    STATE_RECOGNIZED,\n    STATE_CANCELLED,\n    STATE_FAILED,\n\n    DIRECTION_NONE,\n    DIRECTION_LEFT,\n    DIRECTION_RIGHT,\n    DIRECTION_UP,\n    DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL,\n    DIRECTION_ALL,\n\n    Manager,\n    Input,\n    TouchAction,\n\n    TouchInput,\n    MouseInput,\n    PointerEventInput,\n    TouchMouseInput,\n    SingleTouchInput,\n\n    Recognizer,\n    AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each,\n    inherit,\n    prefixed\n});\n\nmodule.exports = Hammer;\n","import Animation from './animation';\nimport PageSpread from './page_spread';\nimport Hammer from './vendor/hammer';\nimport './verso.styl';\n\nexport default class Verso {\n    constructor(el, options = {}) {\n        this.el = el;\n        this.options = options;\n        this.swipeVelocity = this.options.swipeVelocity ?? 0.3;\n        this.swipeThreshold = this.options.swipeThreshold ?? 10;\n        this.navigationDuration = this.options.navigationDuration ?? 240;\n        this.navigationPanDuration = this.options.navigationPanDuration ?? 200;\n        this.zoomDuration = this.options.zoomDuration ?? 200;\n        this.doubleTapDelay = this.options.doubleTapDelay ?? 300;\n\n        this.position = -1;\n        this.pinching = false;\n        this.panning = false;\n        this.transform = {left: 0, top: 0, scale: 1};\n        this.startTransform = {left: 0, top: 0, scale: 1};\n        this.tap = {\n            count: 0,\n            delay: this.doubleTapDelay\n        };\n        this.started = false;\n        this.destroyed = false;\n        this._events = {};\n    }\n    bind(event, fn) {\n        this._events[event] = this._events[event] || [];\n        return this._events[event].push(fn);\n    }\n\n    unbind(event, fn) {\n        if (this._events[event]) {\n            return this._events[event].splice(\n                this._events[event].indexOf(fn),\n                1\n            );\n        }\n    }\n\n    trigger(event, ...args) {\n        this._events[event]?.forEach((e) => e.apply(this, args));\n    }\n\n    start() {\n        this.scrollerEl = this.el.querySelector('.verso__scroller');\n        this.pageSpreadEls = this.el.querySelectorAll('.verso__page-spread');\n        this.pageSpreads = this.traversePageSpreads(this.pageSpreadEls);\n        this.pageIds = this.buildPageIds(this.pageSpreads);\n        this.animation = new Animation(this.scrollerEl);\n        this.hammer = new Hammer.Manager(this.scrollerEl, {\n            touchAction: 'none',\n            enable: false,\n            inputClass: this.getHammerInputClass()\n        });\n\n        this.hammer.add(\n            new Hammer.Pan({threshold: 5, direction: Hammer.DIRECTION_ALL})\n        );\n        this.hammer.add(new Hammer.Tap({event: 'singletap', interval: 0}));\n        this.hammer.add(new Hammer.Pinch());\n        this.hammer.add(new Hammer.Press({time: 500}));\n        this.hammer.on('panstart', this.onPanStart.bind(this));\n        this.hammer.on('panmove', this.onPanMove.bind(this));\n        this.hammer.on('panend', this.onPanEnd.bind(this));\n        this.hammer.on('pancancel', this.onPanEnd.bind(this));\n        this.hammer.on('singletap', this.onSingletap.bind(this));\n        this.hammer.on('pinchstart', this.onPinchStart.bind(this));\n        this.hammer.on('pinchmove', this.onPinchMove.bind(this));\n        this.hammer.on('pinchend', this.onPinchEnd.bind(this));\n        this.hammer.on('pinchcancel', this.onPinchEnd.bind(this));\n        this.hammer.on('press', this.onPress.bind(this));\n\n        this.scrollerEl.addEventListener(\n            'contextmenu',\n            this.onContextmenu.bind(this),\n            false\n        );\n        this.scrollerEl.addEventListener(\n            'wheel',\n            this.onWheel.bind(this),\n            false\n        );\n        const pageId =\n            this.getPageSpreadPositionFromPageId(this.options.pageId) ?? 0;\n\n        this.hammer.set({enable: true});\n        this.started = true;\n        this.destroyed = false;\n        this.navigateTo(pageId, {duration: 0});\n\n        this.resizeListener = this.onResize.bind(this);\n        this.touchStartListener = this.onTouchStart.bind(this);\n        this.touchEndListener = this.onTouchEnd.bind(this);\n\n        this.el.addEventListener('touchstart', this.touchStartListener, false);\n        this.el.addEventListener('touchend', this.touchEndListener, false);\n\n        if (typeof window !== 'undefined' && window !== null) {\n            window.addEventListener('resize', this.resizeListener, false);\n        }\n        return this;\n    }\n\n    destroy() {\n        if (!this.started) {\n            return console.warn(\n                \"You've called .destroy() on a viewer that was not started yet, this is a no-op.\"\n            );\n        }\n        if (this.destroyed) {\n            return console.warn(\n                \"You've called .destroy() on a viewer that has already been destroyed and not restarted, this is a no-op.\"\n            );\n        }\n        this.scrollerEl.removeEventListener(\n            'contextmenu',\n            this.onContextmenu.bind(this)\n        );\n        this.scrollerEl.removeEventListener('wheel', this.onWheel.bind(this));\n\n        this.hammer.destroy();\n\n        this.el.removeEventListener('touchstart', this.touchStartListener);\n        this.el.removeEventListener('touchend', this.touchEndListener);\n\n        window.removeEventListener('resize', this.resizeListener);\n        this.started = false;\n        this.destroyed = true;\n        return this;\n    }\n\n    first(options) {\n        return this.navigateTo(0, options);\n    }\n\n    prev(options) {\n        return this.navigateTo(this.getPosition() - 1, options);\n    }\n\n    next(options) {\n        return this.navigateTo(this.getPosition() + 1, options);\n    }\n\n    last(options) {\n        return this.navigateTo(this.getPageSpreadCount() - 1, options);\n    }\n\n    navigateTo(position, options = {}) {\n        if (this.destroyed) {\n            return console.warn(`\\\nYou've called a navigation method on a viewer that was previously destroyed, this is a no-op.\nPlease call viewer.start() again, if you want to reuse this Viewer instance.\n\nYou might have forgotten to remove an event handler that\ncalls first/prev/next/last/navigateTo on the viewer.\\\n`);\n        }\n        if (!this.started) {\n            return console.warn(`\nYou've called a navigation method on a viewer that hasn't been started yet, this is a no-op.\nPlease call viewer.start() first.\n\nYou might have forgotten to remove an event handler that\ncalls .first()/.prev()/.next()/.last()/.navigateTo() on the viewer.\n`);\n        }\n\n        if (position < 0 || position > this.getPageSpreadCount() - 1) {\n            return;\n        }\n\n        const currentPosition = this.getPosition();\n        const currentPageSpread = this.getPageSpreadFromPosition(\n            currentPosition\n        );\n        const activePageSpread = this.getPageSpreadFromPosition(position);\n        let carousel = this.getCarouselFromPageSpread(activePageSpread);\n        const velocity = options.velocity ?? 1;\n        let duration = options.duration ?? this.navigationDuration;\n        duration = duration / Math.abs(velocity);\n        const touchAction = activePageSpread.isScrollable() ? 'pan-y' : 'none';\n\n        currentPageSpread?.deactivate();\n        activePageSpread.activate();\n\n        carousel.visible.forEach((pageSpread) =>\n            pageSpread.position().setVisibility('visible')\n        );\n\n        this.hammer.set({touchAction});\n\n        this.transform.left = this.getLeftTransformFromPageSpread(\n            position,\n            activePageSpread\n        );\n        this.setPosition(position);\n\n        if (this.transform.scale > 1) {\n            this.transform.top = 0;\n            this.transform.scale = 1;\n\n            this.trigger('zoomedOut', {position: currentPosition});\n        }\n\n        this.trigger('beforeNavigation', {\n            currentPosition,\n            newPosition: position\n        });\n\n        this.animation.animate(\n            {\n                x: `${this.transform.left}%`,\n                duration\n            },\n            () => {\n                carousel = this.getCarouselFromPageSpread(\n                    this.getActivePageSpread()\n                );\n\n                carousel.gone.forEach((pageSpread) =>\n                    pageSpread.setVisibility('gone')\n                );\n\n                this.trigger('afterNavigation', {\n                    newPosition: this.getPosition(),\n                    previousPosition: currentPosition\n                });\n            }\n        );\n    }\n\n    getPosition() {\n        return this.position;\n    }\n\n    setPosition(position) {\n        this.position = position;\n\n        return this;\n    }\n\n    getLeftTransformFromPageSpread(position, pageSpread) {\n        let left = 0;\n\n        if (position === this.getPageSpreadCount() - 1) {\n            left = 100 - pageSpread.getWidth() - pageSpread.getLeft();\n        } else if (position > 0) {\n            left = (100 - pageSpread.getWidth()) / 2 - pageSpread.getLeft();\n        }\n\n        return left;\n    }\n\n    getCarouselFromPageSpread(pageSpreadSubject) {\n        const carousel = {\n            visible: [],\n            gone: []\n        };\n\n        // Identify the page spreads that should be a part of the carousel.\n        this.pageSpreads.forEach((pageSpread) => {\n            let visible = false;\n\n            if (pageSpread.getLeft() <= pageSpreadSubject.getLeft()) {\n                if (\n                    pageSpread.getLeft() + pageSpread.getWidth() >\n                    pageSpreadSubject.getLeft() - 100\n                ) {\n                    visible = true;\n                }\n            } else {\n                if (\n                    pageSpread.getLeft() - pageSpread.getWidth() <\n                    pageSpreadSubject.getLeft() + 100\n                ) {\n                    visible = true;\n                }\n            }\n\n            if (visible === true) {\n                carousel.visible.push(pageSpread);\n            } else {\n                carousel.gone.push(pageSpread);\n            }\n        });\n\n        return carousel;\n    }\n\n    traversePageSpreads(els) {\n        const pageSpreads = [];\n        let left = 0;\n\n        for (let el of Array.from(els)) {\n            const id = el.getAttribute('data-id');\n            const type = el.getAttribute('data-type');\n            const pageIds = el.getAttribute('data-page-ids')?.split(',') || [];\n            const maxZoomScale = Number(\n                el.getAttribute('data-max-zoom-scale') ?? 1\n            );\n            const width = Number(el.getAttribute('data-width') ?? 100);\n            const pageSpread = new PageSpread(el, {\n                id,\n                type,\n                pageIds,\n                maxZoomScale,\n                width,\n                left\n            });\n\n            left += width;\n\n            pageSpreads.push(pageSpread);\n        }\n\n        return pageSpreads;\n    }\n\n    buildPageIds(pageSpreads) {\n        const pageIds = {};\n\n        pageSpreads.forEach((pageSpread) => {\n            pageSpread.options.pageIds.forEach((pageId) => {\n                pageIds[pageId] = pageSpread;\n            });\n        });\n\n        return pageIds;\n    }\n\n    isCoordinateInsideElement(x, y, el) {\n        const rect = el.getBoundingClientRect();\n\n        return (\n            x >= rect.left &&\n            x <= rect.right &&\n            y >= rect.top &&\n            y <= rect.bottom\n        );\n    }\n\n    getCoordinateInfo(x, y, pageSpread) {\n        let pageEl;\n        x -= this.el.offsetLeft;\n        y -= this.el.offsetTop;\n        const info = {\n            x,\n            y,\n            contentX: 0,\n            contentY: 0,\n            pageX: 0,\n            pageY: 0,\n            overlayEls: [],\n            pageEl: null,\n            isInsideContentX: false,\n            isInsideContentY: false,\n            isInsideContent: false\n        };\n        const contentRect = pageSpread.getContentRect();\n        const overlayEls = pageSpread.getOverlayEls();\n        const pageEls = pageSpread.getPageEls();\n\n        for (let overlayEl of Array.from(overlayEls)) {\n            if (this.isCoordinateInsideElement(x, y, overlayEl)) {\n                info.overlayEls.push(overlayEl);\n            }\n        }\n\n        for (pageEl of Array.from(pageEls)) {\n            if (this.isCoordinateInsideElement(x, y, pageEl)) {\n                info.pageEl = pageEl;\n                break;\n            }\n        }\n\n        info.contentX = (x - contentRect.left) / Math.max(1, contentRect.width);\n        info.contentY = (y - contentRect.top) / Math.max(1, contentRect.height);\n\n        if (info.pageEl) {\n            info.isInsideContentX = info.contentX >= 0 && info.contentX <= 1;\n            info.isInsideContentY = info.contentY >= 0 && info.contentY <= 1;\n            info.isInsideContent =\n                info.isInsideContentX && info.isInsideContentY;\n        }\n\n        return info;\n    }\n\n    getPageSpreadCount() {\n        return this.pageSpreads.length;\n    }\n\n    getActivePageSpread() {\n        return this.getPageSpreadFromPosition(this.getPosition());\n    }\n\n    getPageSpreadFromPosition(position) {\n        return this.pageSpreads[position];\n    }\n\n    getPageSpreadPositionFromPageId(pageId) {\n        for (let idx = 0; idx < this.pageSpreads.length; idx++) {\n            const pageSpread = this.pageSpreads[idx];\n\n            if (pageSpread.options.pageIds.indexOf(pageId) > -1) {\n                return idx;\n            }\n        }\n    }\n\n    getPageSpreadBounds(pageSpread) {\n        const pageSpreadRect = pageSpread.getRect();\n        const pageSpreadContentRect = pageSpread.getContentRect();\n\n        return {\n            left:\n                ((pageSpreadContentRect.left - pageSpreadRect.left) /\n                    pageSpreadRect.width) *\n                100,\n            top:\n                ((pageSpreadContentRect.top - pageSpreadRect.top) /\n                    pageSpreadRect.height) *\n                100,\n            width: (pageSpreadContentRect.width / pageSpreadRect.width) * 100,\n            height:\n                (pageSpreadContentRect.height / pageSpreadRect.height) * 100,\n            pageSpreadRect,\n            pageSpreadContentRect\n        };\n    }\n\n    clipCoordinate(coordinate, scale, size, offset) {\n        if (size * scale < 100) {\n            coordinate = offset * -scale + 50 - (size * scale) / 2;\n        } else {\n            coordinate = Math.min(coordinate, offset * -scale);\n            coordinate = Math.max(\n                coordinate,\n                offset * -scale - size * scale + 100\n            );\n        }\n\n        return coordinate;\n    }\n\n    zoomTo(options = {}, callback) {\n        const {scale} = options;\n        const curScale = this.transform.scale;\n        const activePageSpread = this.getActivePageSpread();\n        const pageSpreadBounds = this.getPageSpreadBounds(activePageSpread);\n        const carouselOffset = activePageSpread.getLeft();\n        const carouselScaledOffset = carouselOffset * curScale;\n        let x = options.x ?? 0;\n        let y = options.y ?? 0;\n\n        if (scale !== 1) {\n            x -= pageSpreadBounds.pageSpreadRect.left;\n            y -= pageSpreadBounds.pageSpreadRect.top;\n            x = (x / (pageSpreadBounds.pageSpreadRect.width / curScale)) * 100;\n            y = (y / (pageSpreadBounds.pageSpreadRect.height / curScale)) * 100;\n            x =\n                this.transform.left +\n                carouselScaledOffset +\n                x -\n                (x * scale) / curScale;\n            y = this.transform.top + y - (y * scale) / curScale;\n\n            // Make sure the animation doesn't exceed the content bounds.\n            if (options.bounds !== false && scale > 1) {\n                x = this.clipCoordinate(\n                    x,\n                    scale,\n                    pageSpreadBounds.width,\n                    pageSpreadBounds.left\n                );\n                y = this.clipCoordinate(\n                    y,\n                    scale,\n                    pageSpreadBounds.height,\n                    pageSpreadBounds.top\n                );\n            }\n        } else {\n            x = 0;\n            y = 0;\n        }\n\n        // Account for the page spreads left of the active one.\n        x -= carouselOffset * scale;\n\n        this.transform.left = x;\n        this.transform.top = y;\n        this.transform.scale = scale;\n\n        this.animation.animate(\n            {\n                x: `${x}%`,\n                y: `${y}%`,\n                scale,\n                easing: options.easing,\n                duration: options.duration\n            },\n            callback\n        );\n    }\n\n    refresh() {\n        this.pageSpreadEls = this.el.querySelectorAll('.verso__page-spread');\n        this.pageSpreads = this.traversePageSpreads(this.pageSpreadEls);\n        this.pageIds = this.buildPageIds(this.pageSpreads);\n\n        return this;\n    }\n\n    getHammerInputClass() {\n        const mobileRegex = /mobile|tablet|ip(ad|hone|od)|android/i;\n        const supportTouch =\n            typeof window !== 'undefined' && 'ontouchstart' in window;\n\n        if (supportTouch && mobileRegex.test(navigator.userAgent)) {\n            return Hammer.TouchInput;\n        } else {\n            return null;\n        }\n    }\n\n    //#############\n    /* Events */\n    //#############\n\n    onPanStart(e) {\n        // Only allow panning if zoomed in or doing a horizontal pan.\n        // This ensures vertical scrolling works for scrollable page spreads.\n        if (\n            this.transform.scale > 1 ||\n            e.direction === Hammer.DIRECTION_LEFT ||\n            e.direction === Hammer.DIRECTION_RIGHT\n        ) {\n            const {x} = e.center;\n            const edgeThreshold = 30;\n            const width = this.scrollerEl.offsetWidth;\n\n            // Prevent panning when edge-swiping on iOS.\n            if (x > edgeThreshold && x < width - edgeThreshold) {\n                this.startTransform.left = this.transform.left;\n                this.startTransform.top = this.transform.top;\n\n                this.panning = true;\n\n                this.trigger('panStart');\n            }\n        }\n    }\n\n    onPanMove(e) {\n        let x;\n        if (this.pinching === true || this.panning === false) {\n            return;\n        }\n\n        if (this.transform.scale > 1) {\n            const activePageSpread = this.getActivePageSpread();\n            const carouselOffset = activePageSpread.getLeft();\n            const carouselScaledOffset = carouselOffset * this.transform.scale;\n            const pageSpreadBounds = this.getPageSpreadBounds(activePageSpread);\n            const {scale} = this.transform;\n            x =\n                this.startTransform.left +\n                carouselScaledOffset +\n                (e.deltaX / this.scrollerEl.offsetWidth) * 100;\n            let y =\n                this.startTransform.top +\n                (e.deltaY / this.scrollerEl.offsetHeight) * 100;\n            x = this.clipCoordinate(\n                x,\n                scale,\n                pageSpreadBounds.width,\n                pageSpreadBounds.left\n            );\n            y = this.clipCoordinate(\n                y,\n                scale,\n                pageSpreadBounds.height,\n                pageSpreadBounds.top\n            );\n            x -= carouselScaledOffset;\n\n            this.transform.left = x;\n            this.transform.top = y;\n\n            this.animation.animate({\n                x: `${x}%`,\n                y: `${y}%`,\n                scale,\n                easing: 'linear'\n            });\n        } else {\n            x =\n                this.transform.left +\n                (e.deltaX / this.scrollerEl.offsetWidth) * 100;\n\n            this.animation.animate({\n                x: `${x}%`,\n                easing: 'linear'\n            });\n        }\n    }\n\n    onPanEnd(e) {\n        if (this.panning === false) {\n            return;\n        }\n\n        this.panning = false;\n        this.trigger('panEnd');\n\n        if (this.transform.scale === 1 && this.pinching === false) {\n            const position = this.getPosition();\n            const velocity = e.overallVelocityX;\n\n            if (Math.abs(velocity) >= this.swipeVelocity) {\n                if (Math.abs(e.deltaX) >= this.swipeThreshold) {\n                    if (e.offsetDirection === Hammer.DIRECTION_LEFT) {\n                        this.next({\n                            velocity,\n                            duration: this.navigationPanDuration\n                        });\n                    } else if (e.offsetDirection === Hammer.DIRECTION_RIGHT) {\n                        this.prev({\n                            velocity,\n                            duration: this.navigationPanDuration\n                        });\n                    }\n                }\n            }\n\n            if (position === this.getPosition()) {\n                this.animation.animate({\n                    x: `${this.transform.left}%`,\n                    duration: this.navigationPanDuration\n                });\n\n                this.trigger('attemptedNavigation', {\n                    position: this.getPosition()\n                });\n            }\n        }\n    }\n\n    onPinchStart() {\n        if (!this.getActivePageSpread().isZoomable()) {\n            return;\n        }\n\n        this.pinching = true;\n        this.el.setAttribute('data-pinching', true);\n        this.startTransform.scale = this.transform.scale;\n    }\n\n    onPinchMove(e) {\n        if (this.pinching === false) {\n            return;\n        }\n\n        this.zoomTo({\n            x: e.center.x,\n            y: e.center.y,\n            scale: this.startTransform.scale * e.scale,\n            bounds: false,\n            easing: 'linear'\n        });\n    }\n\n    onPinchEnd(e) {\n        if (this.pinching === false) {\n            return;\n        }\n\n        const activePageSpread = this.getActivePageSpread();\n        const maxZoomScale = activePageSpread.getMaxZoomScale();\n        const scale = Math.max(1, Math.min(this.transform.scale, maxZoomScale));\n        const position = this.getPosition();\n\n        if (this.startTransform.scale === 1 && scale > 1) {\n            this.trigger('zoomedIn', {position});\n        } else if (this.startTransform.scale > 1 && scale === 1) {\n            this.trigger('zoomedOut', {position});\n        }\n\n        this.zoomTo(\n            {\n                x: e.center.x,\n                y: e.center.y,\n                scale,\n                duration: this.zoomDuration\n            },\n            () => {\n                this.pinching = false;\n                this.el.setAttribute('data-pinching', false);\n            }\n        );\n    }\n\n    onPress(e) {\n        this.trigger(\n            'pressed',\n            this.getCoordinateInfo(\n                e.center.x,\n                e.center.y,\n                this.getActivePageSpread()\n            )\n        );\n    }\n\n    onContextmenu(e) {\n        e.preventDefault();\n\n        this.trigger(\n            'contextmenu',\n            this.getCoordinateInfo(\n                e.clientX,\n                e.clientY,\n                this.getActivePageSpread()\n            )\n        );\n\n        return false;\n    }\n\n    onWheel(e) {\n        let position, scale;\n        const activePageSpread = this.getActivePageSpread();\n\n        if (activePageSpread.isZoomable() === false) {\n            return;\n        }\n\n        // see https://stackoverflow.com/a/23668035\n        let {deltaY} = e;\n\n        if (event.webkitDirectionInvertedFromDevice) {\n            deltaY = -deltaY;\n        }\n\n        if (deltaY > 0 && this.transform.scale === 1) {\n            scale = activePageSpread.getMaxZoomScale();\n            position = this.getPosition();\n\n            this.zoomTo(\n                {\n                    x: e.clientX,\n                    y: e.clientY,\n                    scale,\n                    duration: this.zoomDuration\n                },\n                () => {\n                    this.trigger('zoomedIn', {position});\n                }\n            );\n        } else if (deltaY < 0 && this.transform.scale > 1) {\n            position = this.getPosition();\n\n            this.zoomTo(\n                {\n                    x: e.clientX,\n                    y: e.clientY,\n                    scale: 1,\n                    duration: this.zoomDuration\n                },\n                () => {\n                    this.trigger('zoomedOut', {position});\n                }\n            );\n        }\n    }\n\n    onSingletap(e) {\n        const activePageSpread = this.getActivePageSpread();\n        const coordinateInfo = this.getCoordinateInfo(\n            e.center.x,\n            e.center.y,\n            activePageSpread\n        );\n\n        clearTimeout(this.tap.timeout);\n\n        if (this.tap.count === 1) {\n            this.tap.count = 0;\n\n            this.trigger('doubleClicked', coordinateInfo);\n\n            if (activePageSpread.isZoomable()) {\n                const maxZoomScale = activePageSpread.getMaxZoomScale();\n                const zoomedIn = this.transform.scale > 1;\n                const scale = zoomedIn ? 1 : maxZoomScale;\n                const zoomEvent = zoomedIn ? 'zoomedOut' : 'zoomedIn';\n                const position = this.getPosition();\n\n                this.zoomTo(\n                    {\n                        x: e.center.x,\n                        y: e.center.y,\n                        scale,\n                        duration: this.zoomDuration\n                    },\n                    () => {\n                        this.trigger(zoomEvent, {position});\n                    }\n                );\n            }\n        } else {\n            this.tap.count++;\n            this.tap.timeout = setTimeout(() => {\n                this.tap.count = 0;\n\n                this.trigger('clicked', coordinateInfo);\n            }, this.tap.delay);\n        }\n    }\n\n    onTouchStart(e) {\n        if (!this.getActivePageSpread().isScrollable()) {\n            e.preventDefault();\n        }\n    }\n\n    onTouchEnd(e) {\n        if (!this.getActivePageSpread().isScrollable()) {\n            e.preventDefault();\n        }\n    }\n\n    onResize() {\n        if (this.transform.scale > 1) {\n            const position = this.getPosition();\n            const activePageSpread = this.getActivePageSpread();\n\n            this.transform.left = this.getLeftTransformFromPageSpread(\n                position,\n                activePageSpread\n            );\n            this.transform.top = 0;\n            this.transform.scale = 1;\n\n            this.zoomTo({\n                x: this.transform.left,\n                y: this.transform.top,\n                scale: this.transform.scale,\n                duration: 0\n            });\n\n            this.trigger('zoomedOut', {position});\n        }\n    }\n}\n","import MicroEvent from 'microevent';\nimport {loadImage} from '../../util';\n\nclass PagedPublicationPageSpread extends MicroEvent {\n    constructor(options = {}) {\n        super();\n        this.options = options;\n        this.contentsRendered = false;\n        this.hotspotsRendered = false;\n        this.el = this.renderEl();\n    }\n\n    getId() {\n        return this.options.id;\n    }\n\n    getEl() {\n        return this.el;\n    }\n\n    getPages() {\n        return this.options.pages;\n    }\n\n    renderEl() {\n        const el = document.createElement('div');\n        const pageIds = this.getPages().map((page) => page.id);\n\n        el.className = 'verso__page-spread sgn-pp__page-spread';\n\n        el.setAttribute('data-id', this.getId());\n        el.setAttribute('data-type', 'page');\n        el.setAttribute('data-width', this.options.width);\n        el.setAttribute('data-page-ids', pageIds.join(','));\n        el.setAttribute('data-max-zoom-scale', this.options.maxZoomScale);\n        el.setAttribute('data-zoomable', false);\n\n        return el;\n    }\n\n    renderContents() {\n        const id = this.getId();\n        const el = this.getEl();\n        const pages = this.getPages();\n        const pageCount = pages.length;\n        let imageLoads = 0;\n\n        let maxPageWidth = el.clientWidth * (window.devicePixelRatio || 1);\n        if (this.options.pageMode === 'double') {\n            maxPageWidth = maxPageWidth / 2;\n        }\n\n        const useLargeImage = maxPageWidth > 700;\n\n        pages.forEach((page, i) => {\n            let image = page.images.medium;\n            if (useLargeImage) {\n                image = page.images.large;\n            }\n\n            const pageEl = document.createElement('div');\n            const loaderEl = document.createElement('div');\n\n            pageEl.className = 'sgn-pp__page verso__page';\n            if (page.id != null) {\n                pageEl.setAttribute('data-id', page.id);\n            }\n\n            if (pageCount === 2) {\n                pageEl.className +=\n                    i === 0 ? ' verso-page--verso' : ' verso-page--recto';\n            }\n\n            pageEl.appendChild(loaderEl);\n            el.appendChild(pageEl);\n\n            loaderEl.className = 'sgn-pp-page__loader';\n            loaderEl.innerHTML = `<span>${page.label}</span>`;\n\n            loadImage(image, (err, width, height) => {\n                if (err == null) {\n                    const isComplete = ++imageLoads === pageCount;\n\n                    pageEl.style.backgroundImage = `url(${image})`;\n                    pageEl.setAttribute('data-width', width);\n                    pageEl.setAttribute('data-height', height);\n                    pageEl.innerHTML = '&nbsp;';\n\n                    if (isComplete) {\n                        el.setAttribute('data-zoomable', true);\n                    }\n\n                    this.trigger('pageLoaded', {pageSpreadId: id, page});\n                    if (isComplete) {\n                        this.trigger('pagesLoaded', {pageSpreadId: id, pages});\n                    }\n                } else {\n                    loaderEl.innerHTML = '<span>!</span>';\n                }\n            });\n        });\n\n        this.contentsRendered = true;\n\n        return this;\n    }\n\n    clearContents() {\n        this.el.innerHTML = '';\n        this.contentsRendered = false;\n\n        return this;\n    }\n\n    zoomIn() {\n        const pageEls = [].slice.call(\n            this.el.querySelectorAll('.sgn-pp__page')\n        );\n        const pages = this.getPages();\n\n        pageEls.forEach((pageEl) => {\n            const id = pageEl.getAttribute('data-id');\n            const page = pages.find((page) => page.id === id);\n            const image = page.images.large;\n\n            loadImage(image, (err) => {\n                if (\n                    err == null &&\n                    this.el.getAttribute('data-active') === 'true'\n                ) {\n                    pageEl.setAttribute(\n                        'data-image',\n                        pageEl.style.backgroundImage\n                    );\n                    pageEl.style.backgroundImage = `url(${image})`;\n                }\n            });\n        });\n    }\n\n    zoomOut() {\n        const pageEls = Array.from(\n            this.el.querySelectorAll('.sgn-pp__page[data-image]')\n        );\n\n        pageEls.forEach((pageEl) => {\n            pageEl.style.backgroundImage = pageEl.getAttribute('data-image');\n\n            pageEl.removeAttribute('data-image');\n        });\n    }\n}\n\nexport default PagedPublicationPageSpread;\n","import MicroEvent from 'microevent';\nimport {chunk} from '../../util';\nimport PageSpread from './page-spread';\n\nclass PagedPublicationPageSpreads extends MicroEvent {\n    constructor(options) {\n        super();\n        this.options = options;\n        this.collection = [];\n        this.ids = {};\n    }\n\n    get(id) {\n        return this.ids[id];\n    }\n\n    getFrag() {\n        const frag = document.createDocumentFragment();\n\n        this.collection.forEach((pageSpread) =>\n            frag.appendChild(pageSpread.el)\n        );\n\n        return frag;\n    }\n\n    update(pageMode = 'single') {\n        const pageSpreads = [];\n        const ids = {};\n        const pages = this.options.pages.slice();\n        const {width, maxZoomScale} = this.options;\n\n        if (pageMode === 'single') {\n            pages.forEach((page) => pageSpreads.push([page]));\n        } else {\n            const firstPage = pages.shift();\n            const lastPage = pages.length % 2 === 1 ? pages.pop() : null;\n            const midstPageSpreads = chunk(pages, 2);\n\n            if (firstPage) {\n                pageSpreads.push([firstPage]);\n            }\n            midstPageSpreads.forEach((midstPages) =>\n                pageSpreads.push(midstPages.map((page) => page))\n            );\n            if (lastPage) {\n                pageSpreads.push([lastPage]);\n            }\n        }\n\n        this.collection = pageSpreads.map((pages, i) => {\n            const id = `${pageMode}-${i}`;\n            const pageSpread = new PageSpread({\n                width,\n                pageMode,\n                maxZoomScale,\n                pages,\n                id\n            });\n\n            pageSpread.bind('pageLoaded', (e) => this.trigger('pageLoaded', e));\n            pageSpread.bind('pagesLoaded', (e) =>\n                this.trigger('pagesLoaded', e)\n            );\n\n            ids[id] = pageSpread;\n\n            return pageSpread;\n        });\n        this.ids = ids;\n\n        return this;\n    }\n}\n\nexport default PagedPublicationPageSpreads;\n","import MicroEvent from 'microevent';\nimport {getColorBrightness, throttle} from '../../util';\nimport Verso from '../../verso-browser/verso';\nimport PageSpreads from './page-spreads';\n\nclass PagedPublicationCore extends MicroEvent {\n    constructor(el, options = {}) {\n        super();\n        this.beforeNavigation = this.beforeNavigation.bind(this);\n        this.afterNavigation = this.afterNavigation.bind(this);\n        this.attemptedNavigation = this.attemptedNavigation.bind(this);\n        this.clicked = this.clicked.bind(this);\n        this.doubleClicked = this.doubleClicked.bind(this);\n        this.pressed = this.pressed.bind(this);\n        this.contextmenu = this.contextmenu.bind(this);\n        this.panStart = this.panStart.bind(this);\n        this.panEnd = this.panEnd.bind(this);\n        this.zoomedIn = this.zoomedIn.bind(this);\n        this.zoomedOut = this.zoomedOut.bind(this);\n        this.resize = this.resize.bind(this);\n        this.unload = this.unload.bind(this);\n        this.options = this.makeOptions(options, this.defaults);\n        this.pageId = this.getOption('pageId');\n        this.els = {\n            root: el,\n            pages: el.querySelector('.sgn-pp__pages'),\n            verso: el.querySelector('.verso')\n        };\n        this.pageMode = this.getPageMode();\n        this.pageSpreads = new PageSpreads({\n            pages: this.getOption('pages'),\n            maxZoomScale: this.getOption('pageSpreadMaxZoomScale'),\n            width: this.getOption('pageSpreadWidth')\n        });\n\n        this.pageSpreads.bind('pageLoaded', this.pageLoaded.bind(this));\n        this.pageSpreads.bind('pagesLoaded', this.pagesLoaded.bind(this));\n\n        this.setColor(this.getOption('color'));\n\n        // It's important to insert the page spreads before instantiating Verso.\n        this.els.pages.parentNode.insertBefore(\n            this.pageSpreads.update(this.pageMode).getFrag(),\n            this.els.pages\n        );\n\n        this.verso = this.createVerso();\n\n        this.bind('started', this.start.bind(this));\n        this.bind('destroyed', this.destroy.bind(this));\n    }\n\n    start() {\n        const verso = this.getVerso();\n        verso.start();\n\n        verso.pageSpreads.forEach(\n            this.overridePageSpreadContentRect.bind(this)\n        );\n\n        this.resizeListener = throttle(\n            this.resize,\n            this.getOption('resizeDelay')\n        );\n\n        window.addEventListener('resize', this.resizeListener, false);\n        window.addEventListener('beforeunload', this.unload, false);\n\n        this.els.root.setAttribute('data-started', '');\n        this.els.root.setAttribute('tabindex', '-1');\n        this.els.root.focus();\n    }\n\n    destroy() {\n        const verso = this.getVerso();\n        const pageSpreadEls = verso.el.querySelectorAll('.sgn-pp__page-spread');\n\n        this.els.root.removeAttribute('data-started');\n        this.els.root.removeAttribute('data-idle');\n        this.els.root.removeAttribute('data-navigating');\n        this.els.root.removeAttribute('data-color-brightness');\n        this.els.root.removeAttribute('data-zoomed-in');\n\n        this.els.root.style.backgroundColor = '#ffffff';\n\n        Array.from(pageSpreadEls).forEach((pageSpreadEl) => {\n            pageSpreadEl.parentNode.removeChild(pageSpreadEl);\n        });\n\n        verso.destroy();\n\n        window.removeEventListener('resize', this.resizeListener, false);\n        window.removeEventListener('beforeunload', this.unload, false);\n    }\n\n    makeOptions(options, defaults) {\n        const opts = {};\n\n        for (let key in options) {\n            opts[key] = options[key] ?? defaults[key];\n        }\n\n        return opts;\n    }\n\n    getOption(key) {\n        return this.options[key];\n    }\n\n    setColor(color) {\n        this.els.root.setAttribute(\n            'data-color-brightness',\n            getColorBrightness(color)\n        );\n        this.els.root.style.backgroundColor = color;\n    }\n\n    createVerso() {\n        const verso = new Verso(this.els.verso, {pageId: this.pageId});\n\n        verso.bind('beforeNavigation', this.beforeNavigation);\n        verso.bind('afterNavigation', this.afterNavigation);\n        verso.bind('attemptedNavigation', this.attemptedNavigation);\n        verso.bind('clicked', this.clicked);\n        verso.bind('doubleClicked', this.doubleClicked);\n        verso.bind('pressed', this.pressed);\n        verso.bind('contextmenu', this.contextmenu);\n        verso.bind('panStart', this.panStart);\n        verso.bind('panEnd', this.panEnd);\n        verso.bind('zoomedIn', this.zoomedIn);\n        verso.bind('zoomedOut', this.zoomedOut);\n\n        return verso;\n    }\n\n    getVerso() {\n        return this.verso;\n    }\n\n    getContentRect(pageSpread) {\n        const rect = {\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            width: 0,\n            height: 0\n        };\n        const pageEls = pageSpread.getPageEls();\n        const pageEl = pageEls[0];\n        const pageCount = pageEls.length;\n\n        if (!pageCount) {\n            return rect;\n        }\n\n        const {scale} = this.getVerso().transform;\n        const pageWidth = pageEl.offsetWidth * pageCount * scale;\n        const pageHeight = pageEl.offsetHeight * scale;\n        const imageRatio =\n            +pageEl.getAttribute('data-height') /\n            (+pageEl.getAttribute('data-width') * pageCount);\n        let actualHeight = pageHeight;\n        let actualWidth = actualHeight / imageRatio;\n        actualWidth = Math.min(pageWidth, actualWidth);\n        actualHeight = actualWidth * imageRatio;\n        const clientRect = pageEl.getBoundingClientRect();\n\n        rect.width = actualWidth;\n        rect.height = actualHeight;\n        rect.top = clientRect.top + (pageHeight - actualHeight) / 2;\n        rect.left = clientRect.left + (pageWidth - actualWidth) / 2;\n        rect.right = rect.width + rect.left;\n        rect.bottom = rect.height + rect.top;\n\n        return rect;\n    }\n\n    formatProgressLabel(pageSpread) {\n        const pages = pageSpread?.options.pages ?? [];\n        const pageIds = pages.map((page) => page.id);\n        const pageLabels = pages.map((page) => page.label);\n        const pageCount = this.getOption('pages').length;\n        const label =\n            pageIds.length > 0\n                ? pageLabels.join('-') + ' / ' + pageCount\n                : null;\n\n        return label;\n    }\n\n    renderPageSpreads() {\n        this.getVerso().pageSpreads.forEach((pageSpread) => {\n            const visibility = pageSpread.getVisibility();\n            const match = this.pageSpreads.get(pageSpread.getId());\n\n            if (match) {\n                if (\n                    visibility === 'visible' &&\n                    match.contentsRendered === false\n                ) {\n                    setTimeout(match.renderContents.bind(match), 0);\n                }\n                if (visibility === 'gone' && match.contentsRendered === true) {\n                    setTimeout(match.clearContents.bind(match), 0);\n                }\n            }\n        });\n\n        return this;\n    }\n\n    findPage(pageId) {\n        return this.getOption('pages').find((page) => page.id === pageId);\n    }\n\n    pageLoaded(e) {\n        this.trigger('pageLoaded', e);\n    }\n\n    pagesLoaded(e) {\n        this.trigger('pagesLoaded', e);\n    }\n\n    beforeNavigation(e) {\n        const position = e.newPosition;\n        const theVerso = this.getVerso();\n        const versoPageSpread = theVerso.getPageSpreadFromPosition(position);\n        const pageSpread = this.pageSpreads.get(versoPageSpread.getId());\n        const pageSpreadCount = theVerso.getPageSpreadCount();\n        const newSpreadEl = theVerso.pageSpreadEls[e.newPosition];\n        const progress = (position / (pageSpreadCount - 1)) * 100;\n        const progressLabel = this.formatProgressLabel(pageSpread);\n\n        this.els.root.setAttribute('data-navigating', true);\n\n        this.renderPageSpreads();\n        this.resetIdleTimer();\n        this.startIdleTimer();\n        this.trigger('beforeNavigation', {\n            verso: e,\n            pageSpread,\n            newSpreadEl,\n            progress,\n            progressLabel,\n            pageSpreadCount,\n            newPositionIsEnd: e.newPosition + 1 === pageSpreadCount\n        });\n    }\n\n    afterNavigation(e) {\n        const position = e.newPosition;\n        const theVerso = this.getVerso();\n        const versoPageSpread = theVerso.getPageSpreadFromPosition(position);\n        const pageSpread = this.pageSpreads.get(versoPageSpread.getId());\n        const pageSpreadCount = theVerso.getPageSpreadCount();\n        const newSpreadEl = theVerso.pageSpreadEls[e.newPosition];\n\n        this.els.root.setAttribute('data-navigating', false);\n\n        this.trigger('afterNavigation', {\n            verso: e,\n            pageSpread,\n            pageSpreadCount,\n            newSpreadEl,\n            newPositionIsEnd: e.newPosition + 1 === pageSpreadCount\n        });\n    }\n\n    attemptedNavigation(e) {\n        this.trigger('attemptedNavigation', {verso: e});\n    }\n\n    clicked(e) {\n        if (e.isInsideContent) {\n            const pageId = e.pageEl.getAttribute('data-id');\n            const page = this.findPage(pageId);\n\n            this.trigger('clicked', {verso: e, page});\n        }\n    }\n\n    doubleClicked(e) {\n        if (e.isInsideContent) {\n            const pageId = e.pageEl.getAttribute('data-id');\n            const page = this.findPage(pageId);\n\n            this.trigger('doubleClicked', {verso: e, page});\n        }\n    }\n\n    pressed(e) {\n        if (e.isInsideContent) {\n            const pageId = e.pageEl.getAttribute('data-id');\n            const page = this.findPage(pageId);\n\n            this.trigger('pressed', {verso: e, page});\n        }\n    }\n\n    contextmenu(e) {\n        if (e.isInsideContent) {\n            const pageId = e.pageEl.getAttribute('data-id');\n            const page = this.findPage(pageId);\n\n            this.trigger('contextmenu', {verso: e, page});\n        }\n    }\n\n    panStart() {\n        this.resetIdleTimer();\n        this.trigger('panStart', {scale: this.getVerso().transform.scale});\n    }\n\n    panEnd() {\n        this.startIdleTimer();\n        this.trigger('panEnd');\n    }\n\n    zoomedIn(e) {\n        const {position} = e;\n        const versoPageSpread = this.getVerso().getPageSpreadFromPosition(\n            position\n        );\n        const pageSpread = this.pageSpreads.get(versoPageSpread.getId());\n\n        pageSpread?.zoomIn();\n\n        this.els.root.setAttribute('data-zoomed-in', true);\n        this.trigger('zoomedIn', {verso: e, pageSpread});\n    }\n\n    zoomedOut(e) {\n        const {position} = e;\n        const versoPageSpread = this.getVerso().getPageSpreadFromPosition(\n            position\n        );\n        const pageSpread = this.pageSpreads.get(versoPageSpread.getId());\n\n        pageSpread?.zoomOut();\n\n        this.els.root.setAttribute('data-zoomed-in', false);\n        this.trigger('zoomedOut', {verso: e, pageSpread});\n    }\n\n    getPageMode() {\n        let pageMode = this.getOption('pageMode');\n\n        if (pageMode == null) {\n            const width = this.els.root.offsetWidth;\n            const height = this.els.root.offsetHeight;\n\n            pageMode = height / width < 0.8 ? 'double' : 'single';\n        }\n\n        return pageMode;\n    }\n\n    resetIdleTimer() {\n        clearTimeout(this.idleTimeout);\n\n        this.els.root.setAttribute('data-idle', false);\n\n        return this;\n    }\n\n    startIdleTimer() {\n        this.idleTimeout = setTimeout(() => {\n            this.els.root.setAttribute('data-idle', true);\n        }, this.getOption('idleDelay'));\n\n        return this;\n    }\n\n    switchPageMode(pageMode) {\n        if (this.pageMode === pageMode) {\n            return this;\n        }\n\n        const verso = this.getVerso();\n        const pageIds = verso\n            .getPageSpreadFromPosition(verso.getPosition())\n            .getPageIds();\n        const pageSpreadEls = this.getVerso().el.querySelectorAll(\n            '.sgn-pp__page-spread'\n        );\n\n        this.pageMode = pageMode;\n\n        this.pageSpreads.update(this.pageMode);\n\n        Array.from(pageSpreadEls).forEach((pageSpreadEl) => {\n            pageSpreadEl.parentNode.removeChild(pageSpreadEl);\n        });\n        this.els.pages.parentNode.insertBefore(\n            this.pageSpreads.getFrag(),\n            this.els.pages\n        );\n\n        verso.refresh();\n        verso.navigateTo(verso.getPageSpreadPositionFromPageId(pageIds[0]), {\n            duration: 0\n        });\n        verso.pageSpreads.forEach(\n            this.overridePageSpreadContentRect.bind(this)\n        );\n\n        return this;\n    }\n\n    overridePageSpreadContentRect(pageSpread) {\n        if (pageSpread.getType() === 'page') {\n            return (pageSpread.getContentRect = () =>\n                this.getContentRect(pageSpread));\n        }\n    }\n\n    resize() {\n        const pageMode = this.getPageMode();\n\n        if (this.getOption('pageMode') == null && pageMode !== this.pageMode) {\n            this.switchPageMode(pageMode);\n        } else {\n            this.trigger('resized');\n        }\n    }\n\n    unload() {\n        this.trigger('disappeared');\n    }\n}\nPagedPublicationCore.prototype.defaults = {\n    pages: [],\n    pageSpreadWidth: 100,\n    pageSpreadMaxZoomScale: 2.3,\n    idleDelay: 1000,\n    resizeDelay: 400,\n    color: '#ffffff'\n};\n\nexport default PagedPublicationCore;\n","import MicroEvent from 'microevent';\n\nclass PagedPublicationEventTracking extends MicroEvent {\n    constructor(eventTracker, id) {\n        super();\n        this.eventTracker = eventTracker;\n        this.id = id;\n        this.hidden = true;\n        this.pageSpread = null;\n\n        this.bind('appeared', this.appeared.bind(this));\n        this.bind('disappeared', this.disappeared.bind(this));\n        this.bind('beforeNavigation', this.beforeNavigation.bind(this));\n        this.bind('afterNavigation', this.afterNavigation.bind(this));\n        this.bind('attemptedNavigation', this.attemptedNavigation.bind(this));\n        this.bind('panStart', this.panStart.bind(this));\n        this.bind('destroyed', this.destroy.bind(this));\n    }\n\n    destroy() {\n        this.pageSpreadDisappeared();\n    }\n\n    trackOpened() {\n        if (this.eventTracker == null) {\n            return this;\n        }\n\n        this.eventTracker.trackPagedPublicationOpened({\n            'pp.id': this.id,\n            vt: this.eventTracker.createViewToken(this.id)\n        });\n\n        return this;\n    }\n\n    trackPageSpreadDisappeared(pageNumbers) {\n        if (this.eventTracker == null) {\n            return this;\n        }\n\n        pageNumbers.forEach((pageNumber) => {\n            this.eventTracker.trackPagedPublicationPageDisappeared({\n                'pp.id': this.id,\n                'ppp.n': pageNumber,\n                vt: this.eventTracker.createViewToken(this.id, pageNumber)\n            });\n        });\n\n        return this;\n    }\n\n    appeared(e) {\n        this.pageSpreadAppeared(e.pageSpread);\n    }\n\n    disappeared() {\n        this.pageSpreadDisappeared();\n    }\n\n    beforeNavigation() {\n        this.pageSpreadDisappeared();\n    }\n\n    afterNavigation(e) {\n        this.pageSpreadAppeared(e.pageSpread);\n    }\n\n    attemptedNavigation(e) {\n        this.pageSpreadAppeared(e.pageSpread);\n    }\n\n    panStart(e) {\n        if (e.scale === 1) {\n            this.pageSpreadDisappeared();\n        }\n    }\n\n    pageSpreadAppeared(pageSpread) {\n        if (pageSpread && this.hidden === true) {\n            this.pageSpread = pageSpread;\n            this.hidden = false;\n        }\n    }\n\n    pageSpreadDisappeared() {\n        if (this.pageSpread && this.hidden === false) {\n            this.trackPageSpreadDisappeared(\n                this.pageSpread.getPages().map((page) => page.pageNumber)\n            );\n\n            this.hidden = true;\n            this.pageSpread = null;\n        }\n    }\n}\n\nexport default PagedPublicationEventTracking;\n","import MicroEvent from 'microevent';\nimport Mustache from 'mustache';\n\nclass PagedPublicationHotspots extends MicroEvent {\n    constructor() {\n        super();\n        this.currentPageSpreadId = null;\n        this.pageSpreadsLoaded = {};\n        this.cache = {};\n\n        this.bind('hotspotsReceived', this.hotspotsReceived.bind(this));\n        this.bind('afterNavigation', this.afterNavigation.bind(this));\n        this.bind('pagesLoaded', this.pagesLoaded.bind(this));\n        this.bind('resized', this.resized.bind(this));\n    }\n\n    renderHotspots(data) {\n        const frag = document.createDocumentFragment();\n        const contentRect = data.versoPageSpread.getContentRect();\n        const pageSpreadEl = data.pageSpread.getEl();\n        const hotspotEls = pageSpreadEl.querySelectorAll('.sgn-pp__hotspot');\n        const boundingRect = pageSpreadEl.getBoundingClientRect();\n\n        Array.from(hotspotEls).forEach((hotspotEl) => {\n            hotspotEl.parentNode.removeChild(hotspotEl);\n        });\n\n        for (let id in data.hotspots) {\n            const hotspot = data.hotspots[id];\n            const position = this.getPosition(data.pages, data.ratio, hotspot);\n            const el = this.renderHotspot(\n                hotspot,\n                position,\n                contentRect,\n                boundingRect\n            );\n\n            frag.appendChild(el);\n        }\n\n        pageSpreadEl.appendChild(frag);\n\n        return this;\n    }\n\n    renderHotspot(hotspot, position, contentRect, boundingRect) {\n        const el = document.createElement('div');\n        let top = Math.round((contentRect.height / 100) * position.top);\n        let left = Math.round((contentRect.width / 100) * position.left);\n        const width = Math.round((contentRect.width / 100) * position.width);\n        const height = Math.round((contentRect.height / 100) * position.height);\n\n        top += Math.round(contentRect.top);\n        left += Math.round(contentRect.left);\n        top -= boundingRect.top;\n        left -= boundingRect.left;\n\n        el.className = 'sgn-pp__hotspot verso__overlay';\n        if (hotspot.id != null) {\n            el.setAttribute('data-id', hotspot.id);\n        }\n        if (hotspot.type != null) {\n            el.setAttribute('data-type', hotspot.type);\n        }\n        el.innerHTML = Mustache.render('', hotspot);\n\n        el.style.top = `${top}px`;\n        el.style.left = `${left}px`;\n        el.style.width = `${width}px`;\n        el.style.height = `${height}px`;\n\n        return el;\n    }\n\n    getPosition(pages, ratio, hotspot) {\n        let minX = null;\n        let minY = null;\n        let maxX = null;\n        let maxY = null;\n        const pageNumbers = pages.map((page) => page.pageNumber);\n\n        for (var pageNumber in hotspot.locations) {\n            if (pageNumbers.indexOf(+pageNumber) === -1) {\n                continue;\n            }\n\n            hotspot.locations[pageNumber].forEach((coords) => {\n                let [x, y] = coords;\n\n                if (pages[1] && pageNumbers[1] === +pageNumber) {\n                    x += 1;\n                }\n                x /= pages.length;\n\n                if (minX == null) {\n                    minX = maxX = x;\n                    minY = maxY = y;\n                }\n\n                if (x < minX) {\n                    minX = x;\n                }\n                if (x > maxX) {\n                    maxX = x;\n                }\n                if (y < minY) {\n                    minY = y;\n                }\n                if (y > maxY) {\n                    return (maxY = y);\n                }\n            });\n        }\n\n        const width = maxX - minX;\n        const height = maxY - minY;\n\n        return {\n            top: (minY / ratio) * 100,\n            left: minX * 100,\n            width: width * 100,\n            height: (height / ratio) * 100\n        };\n    }\n\n    requestHotspots(pageSpreadId, pages) {\n        this.trigger('hotspotsRequested', {\n            id: pageSpreadId,\n            pages\n        });\n    }\n\n    hotspotsReceived(e) {\n        const pageSpreadId = e.pageSpread.getId();\n\n        this.setCache(pageSpreadId, e);\n        this.renderHotspots(e);\n    }\n\n    getCache(pageSpreadId) {\n        return this.cache[pageSpreadId];\n    }\n\n    setCache(pageSpreadId, data) {\n        this.cache[pageSpreadId] = data;\n\n        return this;\n    }\n\n    afterNavigation(e) {\n        if (e.pageSpread == null) {\n            return;\n        }\n\n        const id = e.pageSpread.getId();\n\n        this.currentPageSpreadId = id;\n        if (this.pageSpreadsLoaded[id]) {\n            this.requestHotspots(id, e.pageSpread.getPages());\n        }\n    }\n\n    pagesLoaded(e) {\n        this.pageSpreadsLoaded[e.pageSpreadId] = true;\n        if (this.currentPageSpreadId === e.pageSpreadId) {\n            this.requestHotspots(e.pageSpreadId, e.pages);\n        }\n    }\n\n    resized() {\n        const data = this.getCache(this.currentPageSpreadId);\n\n        if (data) {\n            this.renderHotspots(data);\n        }\n    }\n}\n\nexport default PagedPublicationHotspots;\n","import MicroEvent from 'microevent';\nimport * as translations from '../../translations';\nimport {uuid} from '../../util';\nimport singleChoicePopover from '../core-ui/single-choice-popover';\nimport Controls from './controls';\nimport Core from './core';\nimport EventTracking from './event-tracking';\nimport Hotspots from './hotspots';\nimport './viewer.styl';\n\nfunction defaultPickHotspot(hotspots, e, el, callback) {\n    const popover = singleChoicePopover(\n        {\n            el,\n            header: translations.t('paged_publication.hotspot_picker.header'),\n            x: e.verso.x,\n            y: e.verso.y,\n            items: hotspots\n                .filter((hotspot) => hotspot.type === 'offer')\n                .map((hotspot) => ({\n                    id: hotspot.id,\n                    title: hotspot.offer.heading,\n                    subtitle:\n                        hotspot.offer.pricing.currency +\n                        '' +\n                        hotspot.offer.pricing.price\n                }))\n        },\n        (picked) =>\n            callback(hotspots.find((hotspot) => hotspot.id === picked.id))\n    );\n\n    return popover.destroy;\n}\n\nclass Viewer extends MicroEvent {\n    constructor(el, options = {}) {\n        super();\n        this.el = el;\n        this.options = options;\n        this._core = new Core(this.el, {\n            id: this.options.id,\n            pages: this.options.pages,\n            pageSpreadWidth: this.options.pageSpreadWidth,\n            pageSpreadMaxZoomScale: this.options.pageSpreadMaxZoomScale,\n            pageId: this.options.pageId,\n            idleDelay: this.options.idleDelay,\n            resizeDelay: this.options.resizeDelay,\n            color: this.options.color\n        });\n        this._hotspots = new Hotspots();\n        this._controls = new Controls(this.el, {\n            keyboard: this.options.keyboard\n        });\n        this._eventTracking = new EventTracking(\n            this.options.eventTracker,\n            this.options.id\n        );\n        this.viewSession = uuid();\n        this.hotspots = null;\n        this.hotspotQueue = [];\n        this.popover = null;\n\n        this._setupEventListeners();\n    }\n\n    start() {\n        this._eventTracking.trackOpened();\n        this._core.trigger('started');\n\n        return this;\n    }\n\n    destroy() {\n        this._core.trigger('destroyed');\n        this._hotspots.trigger('destroyed');\n        this._controls.trigger('destroyed');\n        this._eventTracking.trigger('destroyed');\n\n        this.trigger('destroyed');\n\n        return this;\n    }\n\n    navigateTo(position, options) {\n        this.navigateToIndex(position, options);\n\n        return this;\n    }\n\n    navigateToIndex(position, options) {\n        this._core.getVerso().navigateTo(position, options);\n\n        return this;\n    }\n\n    navigateToPageId(pageId, options) {\n        const position = this._core\n            .getVerso()\n            .getPageSpreadPositionFromPageId(pageId);\n\n        return this._core.getVerso().navigateTo(position, options);\n    }\n\n    first(options) {\n        this._core.getVerso().first(options);\n\n        return this;\n    }\n\n    prev(options) {\n        this._core.getVerso().prev(options);\n\n        return this;\n    }\n\n    next(options) {\n        this._core.getVerso().next(options);\n\n        return this;\n    }\n\n    last(options) {\n        this._core.getVerso().last(options);\n\n        return this;\n    }\n\n    _setupEventListeners() {\n        this._controls.bind('prev', (e) => {\n            this.prev(e);\n        });\n        this._controls.bind('next', (e) => {\n            this.next(e);\n        });\n        this._controls.bind('first', (e) => {\n            this.first(e);\n        });\n        this._controls.bind('last', (e) => {\n            this.last(e);\n        });\n        this._controls.bind('close', (e) => {\n            this.destroy(e);\n        });\n        this._hotspots.bind('hotspotsRequested', (e) => {\n            this.trigger('hotspotsRequested', e);\n        });\n\n        this._core.bind('appeared', (e) => {\n            this._eventTracking.trigger('appeared', e);\n            this.trigger('appeared', e);\n        });\n        this._core.bind('disappeared', (e) => {\n            this._eventTracking.trigger('disappeared', e);\n            this.trigger('disappeared', e);\n        });\n        this._core.bind('beforeNavigation', (e) => {\n            this._eventTracking.trigger('beforeNavigation', e);\n            this._controls.trigger('beforeNavigation', e);\n            this.trigger('beforeNavigation', e);\n        });\n        this._core.bind('afterNavigation', (e) => {\n            this._eventTracking.trigger('afterNavigation', e);\n            this._hotspots.trigger('afterNavigation', e);\n            this.trigger('afterNavigation', e);\n        });\n        this._core.bind('attemptedNavigation', (e) => {\n            this._eventTracking.trigger('attemptedNavigation', e);\n            this.trigger('attemptedNavigation', e);\n        });\n        this._core.bind('clicked', (e) => {\n            this._eventTracking.trigger('clicked', e);\n            this.trigger('clicked', e);\n        });\n        this._core.bind('doubleClicked', (e) => {\n            this._eventTracking.trigger('doubleClicked', e);\n            this.trigger('doubleClicked', e);\n        });\n        this._core.bind('contextmenu', (e) => {\n            this.trigger('contextmenu', e);\n        });\n        this._core.bind('pressed', (e) => {\n            this._eventTracking.trigger('pressed', e);\n            this.trigger('pressed', e);\n        });\n        this._core.bind('panStart', (e) => {\n            this._eventTracking.trigger('panStart', e);\n            this.trigger('panStart', e);\n        });\n        this._core.bind('zoomedIn', (e) => {\n            this._eventTracking.trigger('zoomedIn', e);\n            this.trigger('zoomedIn', e);\n        });\n        this._core.bind('zoomedOut', (e) => {\n            this._eventTracking.trigger('zoomedOut', e);\n            this.trigger('zoomedOut', e);\n        });\n        this._core.bind('pageLoaded', (e) => {\n            this._eventTracking.trigger('pageLoaded', e);\n            this.trigger('pageLoaded', e);\n        });\n        this._core.bind('pagesLoaded', (e) => {\n            this._hotspots.trigger('pagesLoaded', e);\n            this.trigger('pagesLoaded', e);\n        });\n        this._core.bind('resized', (e) => {\n            this._hotspots.trigger('resized');\n            this.trigger('resized', e);\n        });\n\n        this.bind('hotspotsRequested', this.hotspotsRequested.bind(this));\n        this.bind('beforeNavigation', this.beforeNavigation.bind(this));\n        this.bind('clicked', this.clicked.bind(this));\n        this.bind('contextmenu', this.contextmenu.bind(this));\n        this.bind('pressed', this.pressed.bind(this));\n    }\n\n    pickHotspot(e, callback) {\n        if (this.hotspots == null) {\n            return;\n        }\n\n        if (this.popover != null) {\n            this.popover.destroy?.();\n            this.popover = null;\n        }\n\n        const hotspots = e.verso.overlayEls.map(\n            (overlayEl) => this.hotspots[overlayEl.getAttribute('data-id')]\n        );\n\n        if (hotspots.length === 1) {\n            callback(hotspots[0]);\n        } else if (hotspots.length > 1) {\n            this.popover = {\n                destroy: (this.options.pickHotspot || defaultPickHotspot)(\n                    hotspots,\n                    e,\n                    this.el,\n                    callback\n                )\n            };\n        }\n    }\n\n    processHotspotQueue() {\n        if (this.hotspots == null) {\n            return;\n        }\n\n        this.hotspotQueue = this.hotspotQueue.filter((hotspotRequest) => {\n            let id;\n            const hotspots = {};\n            const versoPageSpread = this._core\n                .getVerso()\n                .pageSpreads.find(\n                    (pageSpread) => pageSpread.getId() === hotspotRequest.id\n                );\n\n            for (id in this.hotspots) {\n                const hotspot = this.hotspots[id];\n                if (hotspots[id]) {\n                    continue;\n                }\n                for (const page of hotspotRequest.pages) {\n                    if (hotspot.locations[page.pageNumber]) {\n                        hotspots[id] = {\n                            type: hotspot.type,\n                            id: hotspot.id,\n                            locations: hotspot.locations\n                        };\n\n                        break;\n                    }\n                }\n            }\n\n            this._hotspots.trigger('hotspotsReceived', {\n                pageSpread: this._core.pageSpreads.get(hotspotRequest.id),\n                versoPageSpread,\n                ratio: this.options.hotspotRatio,\n                pages: hotspotRequest.pages,\n                hotspots\n            });\n\n            return false;\n        });\n    }\n\n    hotspotsRequested(e) {\n        this.hotspotQueue.push(e);\n        this.processHotspotQueue();\n    }\n\n    applyHotspots(hotspots = {}) {\n        this.hotspots = hotspots;\n\n        this.processHotspotQueue();\n    }\n\n    beforeNavigation() {\n        this.popover?.destroy?.();\n    }\n\n    clicked(e) {\n        this.pickHotspot(e, (hotspot) => {\n            this.trigger('hotspotClicked', hotspot);\n        });\n    }\n\n    contextmenu(e) {\n        this.pickHotspot(e, (hotspot) => {\n            this.trigger('hotspotContextmenu', hotspot);\n        });\n    }\n\n    pressed(e) {\n        this.pickHotspot(e, (hotspot) => {\n            this.trigger('hotspotPressed', hotspot);\n        });\n    }\n}\n\nexport default Viewer;\n","import {request} from '../core';\nimport Viewer from './viewer';\n\nexport default class Bootstrapper {\n    constructor(options = {}) {\n        this.options = options;\n    }\n\n    createViewer(data, viewerOptions) {\n        return new Viewer(this.options.el, {\n            id: this.options.id,\n            ownedBy: data.details.dealer_id,\n            color: '#' + data.details.branding.pageflip.color,\n            hotspotRatio: data.details.dimensions.height,\n            keyboard: true,\n            pageId: this.options.pageId,\n            eventTracker: this.options.eventTracker,\n            pages: this.transformPages(data.pages),\n            ...viewerOptions\n        });\n    }\n\n    transformPages(pages) {\n        return pages.map((page, i) => {\n            const pageNumber = i + 1;\n\n            return {\n                id: 'page' + pageNumber,\n                label: pageNumber + '',\n                pageNumber,\n                images: {\n                    medium: page.view,\n                    large: page.zoom\n                }\n            };\n        });\n    }\n\n    applyHotspots(viewer, hotspots) {\n        const obj = {};\n\n        hotspots.forEach((hotspot) => (obj[hotspot.id] = hotspot));\n\n        viewer.applyHotspots(obj);\n    }\n\n    async fetch(callback) {\n        try {\n            const [details, pages] = await Promise.all([\n                this.fetchDetails(),\n                this.fetchPages()\n            ]);\n\n            if (details && pages) {\n                callback(null, {details, pages});\n            } else {\n                throw new Error();\n            }\n        } catch (error) {\n            callback(error);\n        }\n    }\n\n    fetchDetails = (callback) =>\n        request({url: `/v2/catalogs/${this.options.id}`}, callback);\n\n    fetchPages = (callback) =>\n        request({url: `/v2/catalogs/${this.options.id}/pages`}, callback);\n\n    fetchHotspots = (callback) =>\n        request({url: `/v2/catalogs/${this.options.id}/hotspots`}, callback);\n}\n","const prefixKey = 'sgn-';\n\nconst storage = (() => {\n    try {\n        const storage = window.sessionStorage;\n\n        storage[`${prefixKey}test-storage`] = 'foobar';\n        delete storage[`${prefixKey}test-storage`];\n\n        return storage;\n    } catch (error) {\n        return {};\n    }\n})();\n\nexport function get(key) {\n    try {\n        return JSON.parse(storage[`${prefixKey}${key}`]);\n    } catch (error) {}\n}\n\nexport function set(key, value) {\n    try {\n        storage[`${prefixKey}${key}`] = JSON.stringify(value);\n    } catch (error) {}\n}\n","import Config from './config';\nimport * as CoreKit from './kits/core';\nimport * as CoreUIKit from './kits/core-ui';\nimport * as EventsKit from './kits/events';\nimport * as IncitoPublicationKit from './kits/incito-publication';\nimport * as PagedPublicationKit from './kits/paged-publication';\nimport * as clientCookie from './storage/client-cookie';\nimport * as clientLocal from './storage/client-local';\nimport * as clientSession from './storage/client-session';\nimport './stylus/sgn.styl';\nimport * as translations from './translations';\nimport * as util from './util';\nimport {error, isBrowser} from './util';\n\nconst config = new Config();\n\nconst SGN = {config, util, translations};\n\n// Expose storage backends.\nSGN.storage = {\n    local: clientLocal,\n    session: clientSession,\n    cookie: clientCookie\n};\n\n// Expose the different kits.\nSGN.EventsKit = EventsKit;\nSGN.CoreKit = CoreKit;\nSGN.PagedPublicationKit = PagedPublicationKit;\nSGN.IncitoPublicationKit = IncitoPublicationKit;\nSGN.CoreUIKit = CoreUIKit;\n\n// Set the core session from the cookie store if possible.\nconst session = SGN.storage.cookie.get('session');\n\nif (typeof session === 'object') {\n    SGN.config.set({\n        coreSessionToken: session.token,\n        coreSessionClientId: session.client_id\n    });\n}\n\nSGN.config.bind('change', (changedAttributes) => {\n    const newEventTracker = changedAttributes.eventTracker;\n    const newAppKey = changedAttributes.appKey;\n    if (\n        (newAppKey || newEventTracker) &&\n        (newEventTracker || SGN.config.get('eventTracker'))?.trackId ===\n            (newAppKey || SGN.config.get('appKey'))\n    ) {\n        throw error(\n            new Error(\n                'Track identifier must not be identical to app key. Go to https://shopgun.com/developers/apps to get a track identifier for your app'\n            )\n        );\n    }\n\n    if (newEventTracker != null) {\n        // default eventsTrackUrl\n        if (!newEventTracker.eventsTrackUrl) {\n            newEventTracker.setEventsTrackUrl(SGN.config.get('eventsTrackUrl'));\n        }\n    }\n\n    const newEventsTrackUrl = changedAttributes.eventsTrackUrl;\n    if (newEventsTrackUrl && SGN.config.get('eventTracker')) {\n        SGN.config.get('eventTracker').setEventsTrackUrl(newEventsTrackUrl);\n    }\n});\n\nif (isBrowser()) {\n    // Autoconfigure the SDK.\n    const scriptEl = document.getElementById('sgn-sdk');\n\n    if (scriptEl) {\n        const appKey = scriptEl.getAttribute('data-app-key');\n        const trackId = scriptEl.getAttribute('data-track-id');\n        const config = {};\n\n        if (appKey) {\n            config.appKey = appKey;\n        }\n        if (trackId) {\n            config.eventTracker = new SGN.EventsKit.Tracker({trackId});\n        }\n\n        SGN.config.set(config);\n    }\n}\n\nexport default SGN;\n"],"names":["locale","coreUrl","eventsTrackUrl","Config","configDefaults","config","changedAttributes","key","value","_includesInstanceProperty","attrs","trigger","option","MicroEvent","prototype","keys","isBrowser","window","document","isNode","process","error","err","options","message","code","name","stack","time","Date","uuid","replace","c","r","Math","random","v","toString","getQueryParam","field","url","href","location","reg","RegExp","string","exec","undefined","getRandomNumberBetween","from","to","floor","getOS","ua","navigator","userAgent","_indexOfInstanceProperty","getDeviceCategory","deviceCategory","platform","test","getPointer","pointer","matchMedia","matches","getOrientation","width","height","getScreenDimensions","density","devicePixelRatio","logical","screen","physical","round","getUtcOffsetSeconds","now","jan1","getFullYear","tmp","toGMTString","jan2","substring","_lastIndexOfInstanceProperty","stdTimeOffset","getUtcDstOffsetSeconds","getTimezoneOffset","getColorBrightness","color","hex","_parseInt","rgb","sum","x","s","btoa","str","buffer","Buffer","chunk","arr","size","results","length","push","_spliceInstanceProperty","throttle","fn","threshold","scope","last","deferTimer","context","getTime","args","arguments","clearTimeout","_setTimeout","apply","loadImage","src","callback","img","Image","onload","onerror","Error","distance","lat1","lng1","lat2","lng2","radlat1","PI","radlat2","theta","radtheta","dist","sin","cos","acos","promiseCallbackInterop","fun","cbParameterIndex","makePromise","parameters","resolve","reject","neoCallback","result","callParameters","i","end","max","asc","prefixKey","get","ca","cookie","split","ct","_trimInstanceProperty","JSON","parse","set","days","date","_JSON$stringify","setTime","toUTCString","callbackQueue","renewed","ttl","saveToken","token","SGN","coreSessionToken","saveCookie","saveClientId","clientId","coreSessionClientId","clientCookieStorage","client_id","create","req","fetch","method","then","response","json","status","catch","update","headers","appSecret","sign","renew","ensure","queueCount","complete","_filterInstanceProperty","sha256","join","request","secondTime","appKey","appVersion","qs","geo","geolocation","body","r_locale","api_av","latitude","r_lat","longitude","r_lng","radius","r_radius","sensor","r_sensor","_Object$keys","params","_mapInstanceProperty","k","_Array$isArray","val","encodeURIComponent","responseToken","statusCode","_matcher","_level","_id","_handlers","_gatorInstances","_addEvent","gator","type","useCapture","element","addEventListener","_cancel","e","preventDefault","stopPropagation","_getMatcher","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","Gator","matchesSelector","_matchesSelector","selector","boundElement","call","parentNode","_addHandler","event","id","_removeHandler","hasOwnProperty","_handleEvent","target","srcElement","match","j","matchesEvent","cancelBubble","cancel","_bind","events","remove","Array","_getGlobalCallback","addEvent","on","off","module","exports","OfferDetails","minWidth","maxWidth","anchorEl","contentEl","resize","_bindInstanceProperty","elInner","createElement","className","el","setAttribute","appendChild","position","offsetWidth","show","removeEventListener","removeChild","rect","getBoundingClientRect","top","pageYOffset","offsetHeight","left","pageXOffset","style","rightAligned","outerWidth","right","ESC","ARROW_RIGHT","ARROW_LEFT","SPACE","NUMBER_ONE","defaultTemplate","Popover","keyUp","scroll","backgroundEl","header","singleChoiceItems","template","view","item","index","innerHTML","Mustache","render","addEventListeners","y","menuEl","querySelector","parentWidth","parentHeight","boundingRect","getAttribute","destroy","keyCode","keyCodes","singleChoicePopover","ctx","items","popover","focus","storage","localStorage","createTrackerClient","clientLocalStorage","data","getPool","evt","_i","pool","Tracker","defaultOptions","client","defaultEventsTrackUrl","geohash","country","dispatching","hasMadeInitialDispatch","dispatch","properties","version","trackId","_Object$assign","_e","_v","_t","_a","poolLimit","shift","Object","trackEvent","parts","_concatInstanceProperty","viewToken","String","fromCharCode","_sliceInstanceProperty","md5","asBytes","dispatchLimit","ship","timeout","dispatchRetryInterval","_dispatch","nacks","clearInterval","resEvent","poolEvent","console","warn","_setInterval","formatUnit","unit","isDefinedStr","escapeHTML","unsafe","delay","timer","View","setAttributes","tagName","role","accessibility_label","accessibility_hidden","feature_labels","featureLabels","featureLabel","title","gravity","link","open","layout_width","display","layout_height","min_width","max_width","min_height","minHeight","max_height","maxHeight","layout_top","layout_left","layout_right","layout_bottom","bottom","background_color","backgroundColor","background_image","lazyload","background_tile_mode","backgroundRepeat","background_image_position","backgroundPosition","background_image_scale_type","backgroundSize","layout_margin","margin","layout_margin_top","marginTop","layout_margin_left","marginLeft","layout_margin_right","marginRight","layout_margin_bottom","marginBottom","padding","padding_top","paddingTop","padding_left","paddingLeft","padding_right","paddingRight","padding_bottom","paddingBottom","corner_radius","borderRadius","corner_top_left_radius","borderTopLeftRadius","corner_top_right_radius","borderTopRightRadius","corner_bottom_left_radius","borderBottomLeftRadius","corner_bottom_right_radius","borderBottomRightRadius","clip_children","overflow","shadow","getShadow","boxShadow","dx","dy","strokeStyles","stroke_width","borderWidth","stroke_color","borderColor","stroke_style","borderStyle","stroke_top_width","borderTopWidth","stroke_top_color","borderTopColor","stroke_left_width","borderLeftWidth","stroke_left_color","borderLeftColor","stroke_right_width","borderRightWidth","stroke_right_color","borderRightColor","stroke_bottom_width","borderBottomWidth","stroke_bottom_color","borderBottomColor","layout_flex_shrink","flexShrink","msFlexShrink","layout_flex_grow","flexGrow","msFlexGrow","layout_flex_basis","flexBasis","msFlexBasis","transforms","getTransforms","transform","transform_origin","transformOrigin","translateX","transform_translate_x","translateY","transform_translate_y","transform_rotate","transform_scale","shadow_color","shadow_dx","shadow_dy","shadow_radius","AbsoluteLayout","alignItemModes","flexJustifyModes","flexDirectionModes","FlexLayout","layout_flex_align_items","alignItems","msAlignItems","layout_flex_justify_content","justifyContent","msFlexPack","layout_flex_direction","flexDirection","msFlexDirection","label","TextView","text","textStyles","text_style","spans","parsedText","parseSpans","escapedText","span","encodeURI","spanName","text_prevent_widow","font_family","fontFamily","text_size","fontSize","line_spacing_multiplier","lineHeight","text_color","fontWeight","fontStyle","text_decoration_line","textDecorationLine","textShadow","getTextShadow","text_shadow","text_alignment","textAlign","single_line","max_lines","webkitLineClamp","webkitBoxOrient","text_all_caps","textTransform","start","startIndex","endIndex","text_shadow_color","text_shadow_dx","text_shadow_dy","text_shadow_radius","Video","muted","preload","mime","autoplay","loop","controls","allowedHostnames","linkEl","isSupported","_findInstanceProperty","hostname","requestIdleCallback","cb","_Date$now","didTimeout","timeRemaining","syncIdleCallback","Number","MAX_VALUE","Incito","containerEl","incito","renderLaziness","ids","views","flattenViews","root_view","viewsLength","viewIndex","lazyloadables","lazyloader","renderedOutsideOfViewport","_events","triggeredVisibleRendered","IdleDeadline","renderCallbackHandle","loadFonts","font_assets","applyTheme","theme","cancelIdleCallback","view_name","meta","parent","isInsideViewport","revealElement","child_views","childAttrs","fontAssets","urls","font","FontFace","weight","fonts","add","load","styleEl","createTextNode","head","windowHeight","innerHeight","toLowerCase","sourceEl","iframeEl","backgroundImage","IncitoPublicationEventTracking","eventTracker","details","trackIncitoPublicationOpened","types","vt","createViewToken","Viewer","_eventTracking","EventTracking","classList","trackOpened","Controls","viewer","progressEl","isScrolling","textContent","winHeight","progress","min","abs","scrollTimeout","Bootstrapper","fetchDetails","pixelRatio","getPixelRatio","orientation","getLocale","getMaxWidth","getFeatureLabels","versionsSupported","toISOString","localeChain","languages","language","browserLanguage","prefLocale","count","vector","_reduceInstanceProperty","acc","cur","fetchIncito","incito_publication_id","err1","res","Accept","device_category","pixel_ratio","versions_supported","locale_code","anonymizeFeatureLabels","self","pairs","t","translations","PagedPublicationControls","beforeNavigation","prevClicked","nextClicked","closeClicked","keyDown","els","root","progressBar","progressLabel","prevControl","nextControl","close","keyDownHandler","keyboard","showProgress","visibilityClassName","verso","newPosition","pageSpreadCount","duration","Animation","scale","easing","run","transitionEnd","transition","PageSpread","pageIds","maxZoomScale","getMaxZoomScale","getEl","contains","querySelectorAll","_Array$from2","getPageEls","pageEl","pageRect","visibility","positioned","getLeft","active","VENDOR_PREFIXES","TEST_ELEMENT","TYPE_FUNCTION","invokeArrayArg","arg","each","obj","iterator","inherit","child","base","baseP","childP","_Object$create","constructor","_super","boolOrFn","ifUndefined","val1","val2","handler","splitStr","removeEventListeners","hasParent","node","inStr","find","toArray","uniqueArray","array","sort","values","_sortInstanceProperty","a","b","prefixed","property","camelProp","toUpperCase","prefix","_uniqueId","uniqueId","getWindowForElement","doc","ownerDocument","defaultView","parentWindow","MOBILE_REGEX","SUPPORT_TOUCH","SUPPORT_POINTER_EVENTS","SUPPORT_ONLY_TOUCH","INPUT_TYPE_TOUCH","INPUT_TYPE_PEN","INPUT_TYPE_MOUSE","INPUT_TYPE_KINECT","COMPUTE_INTERVAL","INPUT_START","INPUT_MOVE","INPUT_END","INPUT_CANCEL","DIRECTION_NONE","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DIRECTION_DOWN","DIRECTION_HORIZONTAL","DIRECTION_VERTICAL","DIRECTION_ALL","PROPS_XY","PROPS_CLIENT_XY","Input","manager","inputTarget","domHandler","ev","enable","init","evEl","evTarget","evWin","createInputInstance","inputClass","Type","PointerEventInput","TouchInput","MouseInput","TouchMouseInput","inputHandler","eventType","input","pointersLen","pointers","changedPointersLen","changedPointers","isFirst","isFinal","session","computeInputData","emit","recognize","prevInput","pointersLength","firstInput","simpleCloneInputData","firstMultiple","offsetCenter","center","getCenter","timeStamp","deltaTime","angle","getAngle","getDistance","computeDeltaXY","offsetDirection","getDirection","deltaX","deltaY","overallVelocity","getVelocity","overallVelocityX","overallVelocityY","getScale","rotation","getRotation","maxPointers","computeIntervalInputData","srcEvent","offset","offsetDelta","prevDelta","lastInterval","velocity","velocityX","velocityY","direction","clientX","clientY","p1","p2","xKey","yKey","sqrt","pow","atan2","MOUSE_INPUT_MAP","mousedown","mousemove","mouseup","MOUSE_ELEMENT_EVENTS","MOUSE_WINDOW_EVENTS","pressed","button","which","pointerType","POINTER_INPUT_MAP","pointerdown","pointermove","pointerup","pointercancel","pointerout","IE10_POINTER_TYPE_ENUM","POINTER_ELEMENT_EVENTS","POINTER_WINDOW_EVENTS","MSPointerEvent","PointerEvent","store","pointerEvents","removePointer","eventTypeNormalized","isTouch","storeIndex","_findIndexInstanceProperty","pointerId","SINGLE_TOUCH_INPUT_MAP","touchstart","touchmove","touchend","touchcancel","SINGLE_TOUCH_TARGET_EVENTS","SINGLE_TOUCH_WINDOW_EVENTS","SingleTouchInput","started","normalizeSingleTouches","all","touches","changed","changedTouches","TOUCH_INPUT_MAP","TOUCH_TARGET_EVENTS","targetIds","getTouches","allTouches","identifier","targetTouches","changedTargetTouches","touch","targetTouch","changedTouch","DEDUP_TIMEOUT","DEDUP_DISTANCE","mouse","primaryTouch","lastTouches","inputEvent","inputData","isMouse","sourceCapabilities","firesTouchEvents","recordTouches","isSyntheticEvent","eventData","setLastTouch","lastTouch","lts","removeLastTouch","PREFIXED_TOUCH_ACTION","te","NATIVE_TOUCH_ACTION","TOUCH_ACTION_COMPUTE","TOUCH_ACTION_AUTO","TOUCH_ACTION_MANIPULATION","TOUCH_ACTION_NONE","TOUCH_ACTION_PAN_X","TOUCH_ACTION_PAN_Y","TouchAction","compute","TOUCH_ACTION_MAP","getTouchActionProps","actions","touchAction","recognizers","recognizer","getTouchAction","cleanTouchActions","preventDefaults","prevented","hasNone","hasPanY","hasPanX","isTapPointer","isTapMovement","isTapTouchTime","preventSrc","touchVals","cssSupports","CSS","supports","touchMap","STATE_POSSIBLE","STATE_BEGAN","STATE_CHANGED","STATE_ENDED","STATE_RECOGNIZED","STATE_CANCELLED","STATE_FAILED","Recognizer","defaults","state","simultaneous","requireFail","recognizeWith","otherRecognizer","getRecognizerByNameIfManager","dropRecognizeWith","requireFailure","dropRequireFailure","hasRequireFailures","canRecognizeWith","stateStr","additionalEvent","tryEmit","canEmit","inputDataClone","reset","directionStr","AttrRecognizer","attrTest","optionPointers","isRecognized","isValid","PanRecognizer","pX","pY","directionTest","hasMoved","PinchRecognizer","inOut","PressRecognizer","_timer","_input","validPointers","validMovement","validTime","RotateRecognizer","SwipeRecognizer","TapRecognizer","pTime","pCenter","taps","interval","posThreshold","validTouchTime","failTimeout","validInterval","validMultiTap","tapCount","Hammer","preset","Manager","VERSION","domEvents","cssProps","userSelect","touchSelect","touchCallout","contentZooming","userDrag","tapHighlightColor","STOP","FORCED_STOP","handlers","oldCssProps","toggleCssProps","stop","force","stopped","curRecognizer","existing","triggerDomEvent","prop","gestureEvent","createEvent","initEvent","gesture","dispatchEvent","Tap","Pan","Swipe","Pinch","Rotate","Press","Verso","swipeVelocity","swipeThreshold","navigationDuration","navigationPanDuration","zoomDuration","doubleTapDelay","pinching","panning","startTransform","tap","destroyed","scrollerEl","pageSpreadEls","pageSpreads","traversePageSpreads","buildPageIds","animation","hammer","getHammerInputClass","onPanStart","onPanMove","onPanEnd","onSingletap","onPinchStart","onPinchMove","onPinchEnd","onPress","onContextmenu","onWheel","pageId","getPageSpreadPositionFromPageId","navigateTo","resizeListener","onResize","touchStartListener","onTouchStart","touchEndListener","onTouchEnd","getPosition","getPageSpreadCount","currentPosition","currentPageSpread","getPageSpreadFromPosition","activePageSpread","carousel","getCarouselFromPageSpread","isScrollable","deactivate","activate","visible","pageSpread","setVisibility","getLeftTransformFromPageSpread","setPosition","animate","getActivePageSpread","gone","previousPosition","getWidth","pageSpreadSubject","offsetLeft","offsetTop","info","contentX","contentY","pageX","pageY","overlayEls","isInsideContentX","isInsideContentY","isInsideContent","contentRect","getContentRect","getOverlayEls","pageEls","overlayEl","isCoordinateInsideElement","idx","pageSpreadRect","getRect","pageSpreadContentRect","coordinate","curScale","pageSpreadBounds","getPageSpreadBounds","carouselOffset","carouselScaledOffset","bounds","clipCoordinate","mobileRegex","supportTouch","edgeThreshold","next","prev","isZoomable","zoomTo","getCoordinateInfo","webkitDirectionInvertedFromDevice","coordinateInfo","zoomedIn","zoomEvent","PagedPublicationPageSpread","contentsRendered","hotspotsRendered","renderEl","pages","getPages","page","getId","pageCount","imageLoads","maxPageWidth","clientWidth","pageMode","useLargeImage","image","images","medium","large","loaderEl","isComplete","pageSpreadId","_Array$from","removeAttribute","PagedPublicationPageSpreads","collection","frag","createDocumentFragment","firstPage","lastPage","pop","midstPageSpreads","midstPages","PagedPublicationCore","afterNavigation","attemptedNavigation","clicked","doubleClicked","contextmenu","panStart","panEnd","zoomedOut","unload","makeOptions","getOption","getPageMode","PageSpreads","pageLoaded","pagesLoaded","setColor","insertBefore","getFrag","createVerso","getVerso","overridePageSpreadContentRect","pageSpreadEl","opts","pageWidth","pageHeight","imageRatio","actualHeight","actualWidth","clientRect","pageLabels","getVisibility","renderContents","clearContents","theVerso","versoPageSpread","newSpreadEl","formatProgressLabel","renderPageSpreads","resetIdleTimer","startIdleTimer","newPositionIsEnd","findPage","zoomIn","zoomOut","idleTimeout","getPageIds","refresh","getType","switchPageMode","pageSpreadWidth","pageSpreadMaxZoomScale","idleDelay","resizeDelay","PagedPublicationEventTracking","hidden","appeared","disappeared","pageSpreadDisappeared","trackPagedPublicationOpened","pageNumbers","pageNumber","trackPagedPublicationPageDisappeared","pageSpreadAppeared","trackPageSpreadDisappeared","PagedPublicationHotspots","currentPageSpreadId","pageSpreadsLoaded","cache","hotspotsReceived","resized","hotspotEls","hotspotEl","hotspots","hotspot","ratio","renderHotspot","minX","minY","maxX","maxY","locations","coords","setCache","renderHotspots","requestHotspots","getCache","defaultPickHotspot","offer","heading","subtitle","pricing","currency","price","picked","_core","Core","_hotspots","Hotspots","_controls","viewSession","hotspotQueue","_setupEventListeners","navigateToIndex","first","hotspotsRequested","pickHotspot","hotspotRequest","hotspotRatio","processHotspotQueue","viewerOptions","ownedBy","dealer_id","branding","pageflip","dimensions","transformPages","zoom","applyHotspots","_Promise","fetchPages","sessionStorage","util","local","clientLocal","clientSession","clientCookie","EventsKit","CoreKit","PagedPublicationKit","IncitoPublicationKit","CoreUIKit","newEventTracker","newAppKey","setEventsTrackUrl","newEventsTrackUrl","scriptEl","getElementById"],"mappings":"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"}