!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof rollupNeedsAnOptionToDisableAMDInUMD&&rollupNeedsAnOptionToDisableAMDInUMD.amd?rollupNeedsAnOptionToDisableAMDInUMD(e):(t="undefined"!=typeof globalThis?globalThis:t||self).SGN=e()}(this,(function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){var e={exports:{}};return t(e,e.exports),e.exports}var n=function(t){return t&&t.Math==Math&&t},r=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")(),i=function(t){try{return!!t()}catch(t){return!0}},o=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),a={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,l={f:s&&!a.call({1:2},1)?function(t){var e=s(this,t);return!!e&&e.enumerable}:a},c=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},u={}.toString,h=function(t){return u.call(t).slice(8,-1)},f="".split,p=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==h(t)?f.call(t,""):Object(t)}:Object,d=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},v=function(t){return p(d(t))},g=function(t){return"object"==typeof t?null!==t:"function"==typeof t},y=function(t,e){if(!g(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!g(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},m={}.hasOwnProperty,b=function(t,e){return m.call(t,e)},w=r.document,_=g(w)&&g(w.createElement),S=function(t){return _?w.createElement(t):{}},x=!o&&!i((function(){return 7!=Object.defineProperty(S("div"),"a",{get:function(){return 7}}).a})),k=Object.getOwnPropertyDescriptor,E={f:o?k:function(t,e){if(t=v(t),e=y(e,!0),x)try{return k(t,e)}catch(t){}if(b(t,e))return c(!l.f.call(t,e),t[e])}},T=/#|\.prototype\./,A=function(t,e){var n=O[P(t)];return n==C||n!=I&&("function"==typeof e?i(e):!!e)},P=A.normalize=function(t){return String(t).replace(T,".").toLowerCase()},O=A.data={},I=A.NATIVE="N",C=A.POLYFILL="P",L=A,j={},R=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},D=function(t,e,n){if(R(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},N=function(t){if(!g(t))throw TypeError(String(t)+" is not an object");return t},M=Object.defineProperty,z={f:o?M:function(t,e,n){if(N(t),e=y(e,!0),N(n),x)try{return M(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},F=o?function(t,e,n){return z.f(t,e,c(1,n))}:function(t,e,n){return t[e]=n,t},U=E.f,B=function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e},V=function(t,e){var n,i,o,a,s,l,c,u,h=t.target,f=t.global,p=t.stat,d=t.proto,v=f?r:p?r[h]:(r[h]||{}).prototype,g=f?j:j[h]||(j[h]={}),y=g.prototype;for(o in e)n=!L(f?o:h+(p?".":"#")+o,t.forced)&&v&&b(v,o),s=g[o],n&&(l=t.noTargetGet?(u=U(v,o))&&u.value:v[o]),a=n&&l?l:e[o],n&&typeof s==typeof a||(c=t.bind&&n?D(a,r):t.wrap&&n?B(a):d&&"function"==typeof a?D(Function.call,a):a,(t.sham||a&&a.sham||s&&s.sham)&&F(c,"sham",!0),g[o]=c,d&&(b(j,i=h+"Prototype")||F(j,i,{}),j[i][o]=a,t.real&&y&&!y[o]&&F(y,o,a)))},H=[].slice,W={},q=function(t,e,n){if(!(e in W)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";W[e]=Function("C,a","return new C("+r.join(",")+")")}return W[e](t,n)},X=Function.bind||function(t){var e=R(this),n=H.call(arguments,1),r=function(){var i=n.concat(H.call(arguments));return this instanceof r?q(e,i.length,i):e.apply(t,i)};return g(e.prototype)&&(r.prototype=e.prototype),r};V({target:"Function",proto:!0},{bind:X});var Y=function(t){return j[t+"Prototype"]},G=Y("Function").bind,$=Function.prototype,Z=function(t){var e=t.bind;return t===$||t instanceof Function&&e===$.bind?G:e};V({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperty:z.f});var K=e((function(t){var e=j.Object,n=t.exports=function(t,n,r){return e.defineProperty(t,n,r)};e.defineProperty.sham&&(n.sham=!0)})),J=K,Q=Math.ceil,tt=Math.floor,et=function(t){return isNaN(t=+t)?0:(t>0?tt:Q)(t)},nt=Math.min,rt=function(t){return t>0?nt(et(t),9007199254740991):0},it=Math.max,ot=Math.min,at=function(t,e){var n=et(t);return n<0?it(n+e,0):ot(n,e)},st=function(t){return function(e,n,r){var i,o=v(e),a=rt(o.length),s=at(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},lt={includes:st(!0),indexOf:st(!1)},ct={},ut=lt.indexOf,ht=function(t,e){var n,r=v(t),i=0,o=[];for(n in r)!b(ct,n)&&b(r,n)&&o.push(n);for(;e.length>i;)b(r,n=e[i++])&&(~ut(o,n)||o.push(n));return o},ft=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],pt=Object.keys||function(t){return ht(t,ft)},dt=o?Object.defineProperties:function(t,e){N(t);for(var n,r=pt(e),i=r.length,o=0;i>o;)z.f(t,n=r[o++],e[n]);return t};V({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperties:dt});var vt=e((function(t){var e=j.Object,n=t.exports=function(t,n){return e.defineProperties(t,n)};e.defineProperties.sham&&(n.sham=!0)})),gt=function(t){return"function"==typeof t?t:void 0},yt=function(t,e){return arguments.length<2?gt(j[t])||gt(r[t]):j[t]&&j[t][e]||r[t]&&r[t][e]},mt=ft.concat("length","prototype"),bt={f:Object.getOwnPropertyNames||function(t){return ht(t,mt)}},wt={f:Object.getOwnPropertySymbols},_t=yt("Reflect","ownKeys")||function(t){var e=bt.f(N(t)),n=wt.f;return n?e.concat(n(t)):e},St=function(t,e,n){var r=y(e);r in t?z.f(t,r,c(0,n)):t[r]=n};V({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){for(var e,n,r=v(t),i=E.f,o=_t(r),a={},s=0;o.length>s;)void 0!==(n=i(r,e=o[s++]))&&St(a,e,n);return a}});var xt=j.Object.getOwnPropertyDescriptors,kt={},Et="__core-js_shared__",Tt=r[Et]||function(t,e){try{F(r,t,e)}catch(n){r[t]=e}return e}(Et,{}),At=Function.toString;"function"!=typeof Tt.inspectSource&&(Tt.inspectSource=function(t){return At.call(t)});var Pt,Ot,It,Ct=Tt.inspectSource,Lt=r.WeakMap,jt="function"==typeof Lt&&/native code/.test(Ct(Lt)),Rt=!0,Dt=e((function(t){(t.exports=function(t,e){return Tt[t]||(Tt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.3",mode:"pure",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),Nt=0,Mt=Math.random(),zt=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Nt+Mt).toString(36)},Ft=Dt("keys"),Ut=function(t){return Ft[t]||(Ft[t]=zt(t))},Bt=r.WeakMap;if(jt){var Vt=Tt.state||(Tt.state=new Bt),Ht=Vt.get,Wt=Vt.has,qt=Vt.set;Pt=function(t,e){return e.facade=t,qt.call(Vt,t,e),e},Ot=function(t){return Ht.call(Vt,t)||{}},It=function(t){return Wt.call(Vt,t)}}else{var Xt=Ut("state");ct[Xt]=!0,Pt=function(t,e){return e.facade=t,F(t,Xt,e),e},Ot=function(t){return b(t,Xt)?t[Xt]:{}},It=function(t){return b(t,Xt)}}var Yt,Gt,$t,Zt={set:Pt,get:Ot,has:It,enforce:function(t){return It(t)?Ot(t):Pt(t,{})},getterFor:function(t){return function(e){var n;if(!g(e)||(n=Ot(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},Kt=function(t){return Object(d(t))},Jt=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Qt=Ut("IE_PROTO"),te=Object.prototype,ee=Jt?Object.getPrototypeOf:function(t){return t=Kt(t),b(t,Qt)?t[Qt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?te:null},ne=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())})),re=ne&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ie=Dt("wks"),oe=r.Symbol,ae=re?oe:oe&&oe.withoutSetter||zt,se=function(t){return b(ie,t)||(ne&&b(oe,t)?ie[t]=oe[t]:ie[t]=ae("Symbol."+t)),ie[t]},le=se("iterator"),ce=!1;[].keys&&("next"in($t=[].keys())?(Gt=ee(ee($t)))!==Object.prototype&&(Yt=Gt):ce=!0);var ue=null==Yt||i((function(){var t={};return Yt[le].call(t)!==t}));ue&&(Yt={}),ue&&!b(Yt,le)&&F(Yt,le,(function(){return this}));var he,fe={IteratorPrototype:Yt,BUGGY_SAFARI_ITERATORS:ce},pe=yt("document","documentElement"),de=Ut("IE_PROTO"),ve=function(){},ge=function(t){return"<script>"+t+"</"+"script>"},ye=function(){try{he=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;ye=he?function(t){t.write(ge("")),t.close();var e=t.parentWindow.Object;return t=null,e}(he):((e=S("iframe")).style.display="none",pe.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(ge("document.F=Object")),t.close(),t.F);for(var n=ft.length;n--;)delete ye.prototype[ft[n]];return ye()};ct[de]=!0;var me=Object.create||function(t,e){var n;return null!==t?(ve.prototype=N(t),n=new ve,ve.prototype=null,n[de]=t):n=ye(),void 0===e?n:dt(n,e)},be={};be[se("toStringTag")]="z";var we="[object z]"===String(be),_e=se("toStringTag"),Se="Arguments"==h(function(){return arguments}()),xe=we?h:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),_e))?n:Se?h(e):"Object"==(r=h(e))&&"function"==typeof e.callee?"Arguments":r},ke=we?{}.toString:function(){return"[object "+xe(this)+"]"},Ee=z.f,Te=se("toStringTag"),Ae=function(t,e,n,r){if(t){var i=n?t:t.prototype;b(i,Te)||Ee(i,Te,{configurable:!0,value:e}),r&&!we&&F(i,"toString",ke)}},Pe=fe.IteratorPrototype,Oe=function(){return this},Ie=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return N(n),function(t){if(!g(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Ce=function(t,e,n,r){r&&r.enumerable?t[e]=n:F(t,e,n)},Le=fe.IteratorPrototype,je=fe.BUGGY_SAFARI_ITERATORS,Re=se("iterator"),De="keys",Ne="values",Me="entries",ze=function(){return this},Fe=function(t,e,n,r,i,o,a){!function(t,e,n){var r=e+" Iterator";t.prototype=me(Pe,{next:c(1,n)}),Ae(t,r,!1,!0),kt[r]=Oe}(n,e,r);var s,l,u,h=function(t){if(t===i&&g)return g;if(!je&&t in d)return d[t];switch(t){case De:case Ne:case Me:return function(){return new n(this,t)}}return function(){return new n(this)}},f=e+" Iterator",p=!1,d=t.prototype,v=d[Re]||d["@@iterator"]||i&&d[i],g=!je&&v||h(i),y="Array"==e&&d.entries||v;if(y&&(s=ee(y.call(new t)),Le!==Object.prototype&&s.next&&(Ae(s,f,!0,!0),kt[f]=ze)),i==Ne&&v&&v.name!==Ne&&(p=!0,g=function(){return v.call(this)}),a&&d[Re]!==g&&F(d,Re,g),kt[e]=g,i)if(l={values:h(Ne),keys:o?g:h(De),entries:h(Me)},a)for(u in l)(je||p||!(u in d))&&Ce(d,u,l[u]);else V({target:e,proto:!0,forced:je||p},l);return l},Ue="Array Iterator",Be=Zt.set,Ve=Zt.getterFor(Ue);Fe(Array,"Array",(function(t,e){Be(this,{type:Ue,target:v(t),index:0,kind:e})}),(function(){var t=Ve(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");kt.Arguments=kt.Array;var He=se("toStringTag");for(var We in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var qe=r[We],Xe=qe&&qe.prototype;Xe&&xe(Xe)!==He&&F(Xe,He,We),kt[We]=kt.Array}var Ye=Array.isArray||function(t){return"Array"==h(t)},Ge=se("species"),$e=function(t,e){var n;return Ye(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Ye(n.prototype)?g(n)&&null===(n=n[Ge])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Ze=[].push,Ke=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=7==t,s=5==t||o;return function(l,c,u,h){for(var f,d,v=Kt(l),g=p(v),y=D(c,u,3),m=rt(g.length),b=0,w=h||$e,_=e?w(l,m):n||a?w(l,0):void 0;m>b;b++)if((s||b in g)&&(d=y(f=g[b],b,v),t))if(e)_[b]=d;else if(d)switch(t){case 3:return!0;case 5:return f;case 6:return b;case 2:Ze.call(_,f)}else switch(t){case 4:return!1;case 7:Ze.call(_,f)}return o?-1:r||i?i:_}},Je={forEach:Ke(0),map:Ke(1),filter:Ke(2),some:Ke(3),every:Ke(4),find:Ke(5),findIndex:Ke(6),filterOut:Ke(7)},Qe=function(t,e){var n=[][t];return!!n&&i((function(){n.call(null,e||function(){throw 1},1)}))},tn=Object.defineProperty,en={},nn=function(t){throw t},rn=function(t,e){if(b(en,t))return en[t];e||(e={});var n=[][t],r=!!b(e,"ACCESSORS")&&e.ACCESSORS,a=b(e,0)?e[0]:nn,s=b(e,1)?e[1]:void 0;return en[t]=!!n&&!i((function(){if(r&&!o)return!0;var t={length:-1};r?tn(t,1,{enumerable:!0,get:nn}):t[1]=1,n.call(t,a,s)}))},on=Je.forEach,an=Qe("forEach"),sn=rn("forEach"),ln=an&&sn?[].forEach:function(t){return on(this,t,arguments.length>1?arguments[1]:void 0)};V({target:"Array",proto:!0,forced:[].forEach!=ln},{forEach:ln});var cn=Y("Array").forEach,un=Array.prototype,hn={DOMTokenList:!0,NodeList:!0},fn=function(t){var e=t.forEach;return t===un||t instanceof Array&&e===un.forEach||hn.hasOwnProperty(xe(t))?cn:e},pn=E.f,dn=i((function(){pn(1)}));V({target:"Object",stat:!0,forced:!o||dn,sham:!o},{getOwnPropertyDescriptor:function(t,e){return pn(v(t),e)}});var vn,gn,yn=e((function(t){var e=j.Object,n=t.exports=function(t,n){return e.getOwnPropertyDescriptor(t,n)};e.getOwnPropertyDescriptor.sham&&(n.sham=!0)})),mn=yt("navigator","userAgent")||"",bn=r.process,wn=bn&&bn.versions,_n=wn&&wn.v8;_n?gn=(vn=_n.split("."))[0]+vn[1]:mn&&(!(vn=mn.match(/Edge\/(\d+)/))||vn[1]>=74)&&(vn=mn.match(/Chrome\/(\d+)/))&&(gn=vn[1]);var Sn=gn&&+gn,xn=se("species"),kn=function(t){return Sn>=51||!i((function(){var e=[];return(e.constructor={})[xn]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},En=Je.filter,Tn=kn("filter"),An=rn("filter");V({target:"Array",proto:!0,forced:!Tn||!An},{filter:function(t){return En(this,t,arguments.length>1?arguments[1]:void 0)}});var Pn=Y("Array").filter,On=Array.prototype,In=function(t){var e=t.filter;return t===On||t instanceof Array&&e===On.filter?Pn:e},Cn=bt.f,Ln={}.toString,jn="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Rn={f:function(t){return jn&&"[object Window]"==Ln.call(t)?function(t){try{return Cn(t)}catch(t){return jn.slice()}}(t):Cn(v(t))}},Dn={f:se},Nn=z.f,Mn=function(t){var e=j.Symbol||(j.Symbol={});b(e,t)||Nn(e,t,{value:Dn.f(t)})},zn=Je.forEach,Fn=Ut("hidden"),Un="Symbol",Bn=se("toPrimitive"),Vn=Zt.set,Hn=Zt.getterFor(Un),Wn=Object.prototype,qn=r.Symbol,Xn=yt("JSON","stringify"),Yn=E.f,Gn=z.f,$n=Rn.f,Zn=l.f,Kn=Dt("symbols"),Jn=Dt("op-symbols"),Qn=Dt("string-to-symbol-registry"),tr=Dt("symbol-to-string-registry"),er=Dt("wks"),nr=r.QObject,rr=!nr||!nr.prototype||!nr.prototype.findChild,ir=o&&i((function(){return 7!=me(Gn({},"a",{get:function(){return Gn(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Yn(Wn,e);r&&delete Wn[e],Gn(t,e,n),r&&t!==Wn&&Gn(Wn,e,r)}:Gn,or=function(t,e){var n=Kn[t]=me(qn.prototype);return Vn(n,{type:Un,tag:t,description:e}),o||(n.description=e),n},ar=re?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof qn},sr=function(t,e,n){t===Wn&&sr(Jn,e,n),N(t);var r=y(e,!0);return N(n),b(Kn,r)?(n.enumerable?(b(t,Fn)&&t[Fn][r]&&(t[Fn][r]=!1),n=me(n,{enumerable:c(0,!1)})):(b(t,Fn)||Gn(t,Fn,c(1,{})),t[Fn][r]=!0),ir(t,r,n)):Gn(t,r,n)},lr=function(t,e){N(t);var n=v(e),r=pt(n).concat(fr(n));return zn(r,(function(e){o&&!cr.call(n,e)||sr(t,e,n[e])})),t},cr=function(t){var e=y(t,!0),n=Zn.call(this,e);return!(this===Wn&&b(Kn,e)&&!b(Jn,e))&&(!(n||!b(this,e)||!b(Kn,e)||b(this,Fn)&&this[Fn][e])||n)},ur=function(t,e){var n=v(t),r=y(e,!0);if(n!==Wn||!b(Kn,r)||b(Jn,r)){var i=Yn(n,r);return!i||!b(Kn,r)||b(n,Fn)&&n[Fn][r]||(i.enumerable=!0),i}},hr=function(t){var e=$n(v(t)),n=[];return zn(e,(function(t){b(Kn,t)||b(ct,t)||n.push(t)})),n},fr=function(t){var e=t===Wn,n=$n(e?Jn:v(t)),r=[];return zn(n,(function(t){!b(Kn,t)||e&&!b(Wn,t)||r.push(Kn[t])})),r};if(ne||(Ce((qn=function(){if(this instanceof qn)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=zt(t),n=function(t){this===Wn&&n.call(Jn,t),b(this,Fn)&&b(this[Fn],e)&&(this[Fn][e]=!1),ir(this,e,c(1,t))};return o&&rr&&ir(Wn,e,{configurable:!0,set:n}),or(e,t)}).prototype,"toString",(function(){return Hn(this).tag})),Ce(qn,"withoutSetter",(function(t){return or(zt(t),t)})),l.f=cr,z.f=sr,E.f=ur,bt.f=Rn.f=hr,wt.f=fr,Dn.f=function(t){return or(se(t),t)},o&&Gn(qn.prototype,"description",{configurable:!0,get:function(){return Hn(this).description}})),V({global:!0,wrap:!0,forced:!ne,sham:!ne},{Symbol:qn}),zn(pt(er),(function(t){Mn(t)})),V({target:Un,stat:!0,forced:!ne},{for:function(t){var e=String(t);if(b(Qn,e))return Qn[e];var n=qn(e);return Qn[e]=n,tr[n]=e,n},keyFor:function(t){if(!ar(t))throw TypeError(t+" is not a symbol");if(b(tr,t))return tr[t]},useSetter:function(){rr=!0},useSimple:function(){rr=!1}}),V({target:"Object",stat:!0,forced:!ne,sham:!o},{create:function(t,e){return void 0===e?me(t):lr(me(t),e)},defineProperty:sr,defineProperties:lr,getOwnPropertyDescriptor:ur}),V({target:"Object",stat:!0,forced:!ne},{getOwnPropertyNames:hr,getOwnPropertySymbols:fr}),V({target:"Object",stat:!0,forced:i((function(){wt.f(1)}))},{getOwnPropertySymbols:function(t){return wt.f(Kt(t))}}),Xn){var pr=!ne||i((function(){var t=qn();return"[null]"!=Xn([t])||"{}"!=Xn({a:t})||"{}"!=Xn(Object(t))}));V({target:"JSON",stat:!0,forced:pr},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(g(e)||void 0!==t)&&!ar(t))return Ye(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!ar(e))return e}),i[1]=e,Xn.apply(null,i)}})}qn.prototype[Bn]||F(qn.prototype,Bn,qn.prototype.valueOf),Ae(qn,Un),ct[Fn]=!0;var dr=j.Object.getOwnPropertySymbols,vr=i((function(){pt(1)}));V({target:"Object",stat:!0,forced:vr},{keys:function(t){return pt(Kt(t))}});var gr=j.Object.keys,yr=yt("Reflect","construct"),mr=i((function(){function t(){}return!(yr((function(){}),[],t)instanceof t)})),br=!i((function(){yr((function(){}))})),wr=mr||br;V({target:"Reflect",stat:!0,forced:wr,sham:wr},{construct:function(t,e){R(t),N(e);var n=arguments.length<3?t:R(arguments[2]);if(br&&!mr)return yr(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(X.apply(t,r))}var i=n.prototype,o=me(g(i)?i:Object.prototype),a=Function.apply.call(t,o,e);return g(a)?a:o}});var _r,Sr=j.Reflect.construct,xr=function(t){try{return!!t()}catch(t){return!0}},kr={}.toString,Er=function(t){return kr.call(t).slice(8,-1)},Tr="".split,Ar=xr((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==Er(t)?Tr.call(t,""):Object(t)}:Object,Pr=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},Or=function(t){return Ar(Pr(t))},Ir=function(t){return t&&t.Math==Math&&t},Cr=Ir("object"==typeof globalThis&&globalThis)||Ir("object"==typeof window&&window)||Ir("object"==typeof self&&self)||Ir("object"==typeof t&&t)||function(){return this}()||Function("return this")(),Lr=!xr((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),jr=function(t){return"object"==typeof t?null!==t:"function"==typeof t},Rr=Cr.document,Dr=jr(Rr)&&jr(Rr.createElement),Nr=function(t){return Dr?Rr.createElement(t):{}},Mr=!Lr&&!xr((function(){return 7!=Object.defineProperty(Nr("div"),"a",{get:function(){return 7}}).a})),zr=function(t){if(!jr(t))throw TypeError(String(t)+" is not an object");return t},Fr=function(t,e){if(!jr(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!jr(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!jr(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!jr(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},Ur=Object.defineProperty,Br={f:Lr?Ur:function(t,e,n){if(zr(t),e=Fr(e,!0),zr(n),Mr)try{return Ur(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Vr=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},Hr=Lr?function(t,e,n){return Br.f(t,e,Vr(1,n))}:function(t,e,n){return t[e]=n,t},Wr=function(t,e){try{Hr(Cr,t,e)}catch(n){Cr[t]=e}return e},qr="__core-js_shared__",Xr=Cr[qr]||Wr(qr,{}),Yr=e((function(t){(t.exports=function(t,e){return Xr[t]||(Xr[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.3",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),Gr={}.hasOwnProperty,$r=function(t,e){return Gr.call(t,e)},Zr=0,Kr=Math.random(),Jr=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Zr+Kr).toString(36)},Qr=!!Object.getOwnPropertySymbols&&!xr((function(){return!String(Symbol())})),ti=Qr&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ei=Yr("wks"),ni=Cr.Symbol,ri=ti?ni:ni&&ni.withoutSetter||Jr,ii=function(t){return $r(ei,t)||(Qr&&$r(ni,t)?ei[t]=ni[t]:ei[t]=ri("Symbol."+t)),ei[t]},oi=Math.ceil,ai=Math.floor,si=function(t){return isNaN(t=+t)?0:(t>0?ai:oi)(t)},li=Math.min,ci=function(t){return t>0?li(si(t),9007199254740991):0},ui=Math.max,hi=Math.min,fi=function(t){return function(e,n,r){var i,o=Or(e),a=ci(o.length),s=function(t,e){var n=si(t);return n<0?ui(n+e,0):hi(n,e)}(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},pi={includes:fi(!0),indexOf:fi(!1)},di={},vi=pi.indexOf,gi=function(t,e){var n,r=Or(t),i=0,o=[];for(n in r)!$r(di,n)&&$r(r,n)&&o.push(n);for(;e.length>i;)$r(r,n=e[i++])&&(~vi(o,n)||o.push(n));return o},yi=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],mi=Object.keys||function(t){return gi(t,yi)},bi=Lr?Object.defineProperties:function(t,e){zr(t);for(var n,r=mi(e),i=r.length,o=0;i>o;)Br.f(t,n=r[o++],e[n]);return t},wi=Cr,_i=function(t){return"function"==typeof t?t:void 0},Si=function(t,e){return arguments.length<2?_i(wi[t])||_i(Cr[t]):wi[t]&&wi[t][e]||Cr[t]&&Cr[t][e]},xi=Si("document","documentElement"),ki=Yr("keys"),Ei=function(t){return ki[t]||(ki[t]=Jr(t))},Ti=Ei("IE_PROTO"),Ai=function(){},Pi=function(t){return"<script>"+t+"</"+"script>"},Oi=function(){try{_r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Oi=_r?function(t){t.write(Pi("")),t.close();var e=t.parentWindow.Object;return t=null,e}(_r):((e=Nr("iframe")).style.display="none",xi.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Pi("document.F=Object")),t.close(),t.F);for(var n=yi.length;n--;)delete Oi.prototype[yi[n]];return Oi()};di[Ti]=!0;var Ii=Object.create||function(t,e){var n;return null!==t?(Ai.prototype=zr(t),n=new Ai,Ai.prototype=null,n[Ti]=t):n=Oi(),void 0===e?n:bi(n,e)},Ci=ii("unscopables"),Li=Array.prototype;null==Li[Ci]&&Br.f(Li,Ci,{configurable:!0,value:Ii(null)});var ji=function(t){Li[Ci][t]=!0},Ri={},Di=Function.toString;"function"!=typeof Xr.inspectSource&&(Xr.inspectSource=function(t){return Di.call(t)});var Ni,Mi,zi,Fi=Xr.inspectSource,Ui=Cr.WeakMap,Bi="function"==typeof Ui&&/native code/.test(Fi(Ui)),Vi=Cr.WeakMap;if(Bi){var Hi=Xr.state||(Xr.state=new Vi),Wi=Hi.get,qi=Hi.has,Xi=Hi.set;Ni=function(t,e){return e.facade=t,Xi.call(Hi,t,e),e},Mi=function(t){return Wi.call(Hi,t)||{}},zi=function(t){return qi.call(Hi,t)}}else{var Yi=Ei("state");di[Yi]=!0,Ni=function(t,e){return e.facade=t,Hr(t,Yi,e),e},Mi=function(t){return $r(t,Yi)?t[Yi]:{}},zi=function(t){return $r(t,Yi)}}var Gi,$i,Zi,Ki={set:Ni,get:Mi,has:zi,enforce:function(t){return zi(t)?Mi(t):Ni(t,{})},getterFor:function(t){return function(e){var n;if(!jr(e)||(n=Mi(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},Ji={}.propertyIsEnumerable,Qi=Object.getOwnPropertyDescriptor,to={f:Qi&&!Ji.call({1:2},1)?function(t){var e=Qi(this,t);return!!e&&e.enumerable}:Ji},eo=Object.getOwnPropertyDescriptor,no={f:Lr?eo:function(t,e){if(t=Or(t),e=Fr(e,!0),Mr)try{return eo(t,e)}catch(t){}if($r(t,e))return Vr(!to.f.call(t,e),t[e])}},ro=e((function(t){var e=Ki.get,n=Ki.enforce,r=String(String).split("String");(t.exports=function(t,e,i,o){var a,s=!!o&&!!o.unsafe,l=!!o&&!!o.enumerable,c=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||$r(i,"name")||Hr(i,"name",e),(a=n(i)).source||(a.source=r.join("string"==typeof e?e:""))),t!==Cr?(s?!c&&t[e]&&(l=!0):delete t[e],l?t[e]=i:Hr(t,e,i)):l?t[e]=i:Wr(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||Fi(this)}))})),io=yi.concat("length","prototype"),oo={f:Object.getOwnPropertyNames||function(t){return gi(t,io)}},ao={f:Object.getOwnPropertySymbols},so=Si("Reflect","ownKeys")||function(t){var e=oo.f(zr(t)),n=ao.f;return n?e.concat(n(t)):e},lo=function(t,e){for(var n=so(e),r=Br.f,i=no.f,o=0;o<n.length;o++){var a=n[o];$r(t,a)||r(t,a,i(e,a))}},co=/#|\.prototype\./,uo=function(t,e){var n=fo[ho(t)];return n==vo||n!=po&&("function"==typeof e?xr(e):!!e)},ho=uo.normalize=function(t){return String(t).replace(co,".").toLowerCase()},fo=uo.data={},po=uo.NATIVE="N",vo=uo.POLYFILL="P",go=uo,yo=no.f,mo=function(t,e){var n,r,i,o,a,s=t.target,l=t.global,c=t.stat;if(n=l?Cr:c?Cr[s]||Wr(s,{}):(Cr[s]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=yo(n,r))&&a.value:n[r],!go(l?r:s+(c?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;lo(o,i)}(t.sham||i&&i.sham)&&Hr(o,"sham",!0),ro(n,r,o,t)}},bo=function(t){return Object(Pr(t))},wo=!xr((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),_o=Ei("IE_PROTO"),So=Object.prototype,xo=wo?Object.getPrototypeOf:function(t){return t=bo(t),$r(t,_o)?t[_o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?So:null},ko=ii("iterator"),Eo=!1;[].keys&&("next"in(Zi=[].keys())?($i=xo(xo(Zi)))!==Object.prototype&&(Gi=$i):Eo=!0);var To=null==Gi||xr((function(){var t={};return Gi[ko].call(t)!==t}));To&&(Gi={}),$r(Gi,ko)||Hr(Gi,ko,(function(){return this}));var Ao={IteratorPrototype:Gi,BUGGY_SAFARI_ITERATORS:Eo},Po=Br.f,Oo=ii("toStringTag"),Io=function(t,e,n){t&&!$r(t=n?t:t.prototype,Oo)&&Po(t,Oo,{configurable:!0,value:e})},Co=Ao.IteratorPrototype,Lo=function(){return this},jo=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return zr(n),function(t){if(!jr(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Ro=Ao.IteratorPrototype,Do=Ao.BUGGY_SAFARI_ITERATORS,No=ii("iterator"),Mo="keys",zo="values",Fo="entries",Uo=function(){return this},Bo=function(t,e,n,r,i,o,a){!function(t,e,n){var r=e+" Iterator";t.prototype=Ii(Co,{next:Vr(1,n)}),Io(t,r,!1),Ri[r]=Lo}(n,e,r);var s,l,c,u=function(t){if(t===i&&v)return v;if(!Do&&t in p)return p[t];switch(t){case Mo:case zo:case Fo:return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",f=!1,p=t.prototype,d=p[No]||p["@@iterator"]||i&&p[i],v=!Do&&d||u(i),g="Array"==e&&p.entries||d;if(g&&(s=xo(g.call(new t)),Ro!==Object.prototype&&s.next&&(xo(s)!==Ro&&(jo?jo(s,Ro):"function"!=typeof s[No]&&Hr(s,No,Uo)),Io(s,h,!0))),i==zo&&d&&d.name!==zo&&(f=!0,v=function(){return d.call(this)}),p[No]!==v&&Hr(p,No,v),Ri[e]=v,i)if(l={values:u(zo),keys:o?v:u(Mo),entries:u(Fo)},a)for(c in l)(Do||f||!(c in p))&&ro(p,c,l[c]);else mo({target:e,proto:!0,forced:Do||f},l);return l},Vo="Array Iterator",Ho=Ki.set,Wo=Ki.getterFor(Vo),qo=Bo(Array,"Array",(function(t,e){Ho(this,{type:Vo,target:Or(t),index:0,kind:e})}),(function(){var t=Wo(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");Ri.Arguments=Ri.Array,ji("keys"),ji("values"),ji("entries");var Xo={};Xo[ii("toStringTag")]="z";var Yo="[object z]"===String(Xo),Go=ii("toStringTag"),$o="Arguments"==Er(function(){return arguments}()),Zo=Yo?Er:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Go))?n:$o?Er(e):"Object"==(r=Er(e))&&"function"==typeof e.callee?"Arguments":r},Ko=Yo?{}.toString:function(){return"[object "+Zo(this)+"]"};Yo||ro(Object.prototype,"toString",Ko,{unsafe:!0});var Jo={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Qo=ii("iterator"),ta=ii("toStringTag"),ea=qo.values;for(var na in Jo){var ra=Cr[na],ia=ra&&ra.prototype;if(ia){if(ia[Qo]!==ea)try{Hr(ia,Qo,ea)}catch(rh){ia[Qo]=ea}if(ia[ta]||Hr(ia,ta,na),Jo[na])for(var oa in qo)if(ia[oa]!==qo[oa])try{Hr(ia,oa,qo[oa])}catch(rh){ia[oa]=qo[oa]}}}var aa=Y("Array").keys,sa=Array.prototype,la={DOMTokenList:!0,NodeList:!0},ca=function(t){var e=t.keys;return t===sa||t instanceof Array&&e===sa.keys||la.hasOwnProperty(xe(t))?aa:e},ua=lt.includes,ha=rn("indexOf",{ACCESSORS:!0,1:0});V({target:"Array",proto:!0,forced:!ha},{includes:function(t){return ua(this,t,arguments.length>1?arguments[1]:void 0)}});var fa=Y("Array").includes,pa=se("match"),da=function(t){if(function(t){var e;return g(t)&&(void 0!==(e=t[pa])?!!e:"RegExp"==h(t))}(t))throw TypeError("The method doesn't accept regular expressions");return t},va=se("match");V({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[va]=!1,"/./"[t](e)}catch(t){}}return!1}("includes")},{includes:function(t){return!!~String(d(this)).indexOf(da(t),arguments.length>1?arguments[1]:void 0)}});var ga=Y("String").includes,ya=Array.prototype,ma=String.prototype,ba=function(t){var e=t.includes;return t===ya||t instanceof Array&&e===ya.includes?fa:"string"==typeof t||t===ma||t instanceof String&&e===ma.includes?ga:e},wa=se("isConcatSpreadable"),_a=9007199254740991,Sa="Maximum allowed index exceeded",xa=Sn>=51||!i((function(){var t=[];return t[wa]=!1,t.concat()[0]!==t})),ka=kn("concat"),Ea=function(t){if(!g(t))return!1;var e=t[wa];return void 0!==e?!!e:Ye(t)};V({target:"Array",proto:!0,forced:!xa||!ka},{concat:function(t){var e,n,r,i,o,a=Kt(this),s=$e(a,0),l=0;for(e=-1,r=arguments.length;e<r;e++)if(Ea(o=-1===e?a:arguments[e])){if(l+(i=rt(o.length))>_a)throw TypeError(Sa);for(n=0;n<i;n++,l++)n in o&&St(s,l,o[n])}else{if(l>=_a)throw TypeError(Sa);St(s,l++,o)}return s.length=l,s}});var Ta=Y("Array").concat,Aa=Array.prototype,Pa=function(t){var e=t.concat;return t===Aa||t instanceof Array&&e===Aa.concat?Ta:e};var Oa=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Ia=K;function Ca(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Ia(t,r.key,r)}}var La=function(t,e,n){return e&&Ca(t.prototype,e),n&&Ca(t,n),t};var ja=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};V({target:"Object",stat:!0,sham:!o},{create:me});var Ra=j.Object,Da=function(t,e){return Ra.create(t,e)},Na=Da;V({target:"Object",stat:!0},{setPrototypeOf:Ie});var Ma=j.Object.setPrototypeOf,za=e((function(t){function e(n,r){return t.exports=e=Ma||function(t,e){return t.__proto__=e,t},e(n,r)}t.exports=e}));var Fa=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Na(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&za(t,e)};Mn("iterator");var Ua=function(t){return function(e,n){var r,i,o=String(d(e)),a=et(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},Ba={codeAt:Ua(!1),charAt:Ua(!0)}.charAt,Va="String Iterator",Ha=Zt.set,Wa=Zt.getterFor(Va);Fe(String,"String",(function(t){Ha(this,{type:Va,string:String(t),index:0})}),(function(){var t,e=Wa(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Ba(n,r),e.index+=t.length,{value:t,done:!1})}));var qa=Dn.f("iterator");Mn("asyncIterator");Mn("hasInstance"),Mn("isConcatSpreadable"),Mn("match"),Mn("matchAll"),Mn("replace"),Mn("search"),Mn("species"),Mn("split"),Mn("toPrimitive"),Mn("toStringTag"),Mn("unscopables"),Ae(r.JSON,"JSON",!0);var Xa=j.Symbol;Mn("asyncDispose"),Mn("dispose"),Mn("observable"),Mn("patternMatch"),Mn("replaceAll");var Ya=Xa,Ga=e((function(t){function e(n){return t.exports=e="function"==typeof Ya&&"symbol"==typeof qa?function(t){return typeof t}:function(t){return t&&"function"==typeof Ya&&t.constructor===Ya&&t!==Ya.prototype?"symbol":typeof t},e(n)}t.exports=e}));var $a=function(t,e){return!e||"object"!==Ga(e)&&"function"!=typeof e?ja(t):e},Za=i((function(){ee(1)}));V({target:"Object",stat:!0,forced:Za,sham:!Jt},{getPrototypeOf:function(t){return ee(Kt(t))}});var Ka=j.Object.getPrototypeOf,Ja=e((function(t){function e(n){return t.exports=e=Ma?Ka:function(t){return t.__proto__||Ka(t)},e(n)}t.exports=e}));var Qa=function(t,e,n){return e in t?Ia(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},ts=e((function(t){var e=function(){};e.prototype={bind:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},unbind:function(t,e){this._events=this._events||{},t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(e),1)},trigger:function(t){if(this._events=this._events||{},t in this._events!=!1)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},e.mixin=function(t){for(var n=["bind","unbind","trigger"],r=0;r<n.length;r++)t.prototype[n[r]]=e.prototype[n[r]]},"exports"in t&&(t.exports=e)})),es="https://wolf-api.tjek.com/sync",ns=Object.freeze({__proto__:null,locale:"en_US",coreUrl:"https://squid-api.tjek.com",eventsTrackUrl:es});function rs(t,e){var n=gr(t);if(dr){var r=dr(t);e&&(r=In(r).call(r,(function(e){return yn(t,e).enumerable}))),n.push.apply(n,r)}return n}function is(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)fn(n=rs(Object(r),!0)).call(n,(function(e){Qa(t,e,r[e])}));else if(xt)vt(t,xt(r));else{var i;fn(i=rs(Object(r))).call(i,(function(e){J(t,e,yn(r,e))}))}}return t}function os(t){var e=function(){if("undefined"==typeof Reflect||!Sr)return!1;if(Sr.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Sr(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ja(t);if(e){var i=Ja(this).constructor;n=Sr(r,arguments,i)}else n=r.apply(this,arguments);return $a(this,n)}}var as=function(t){Fa(n,t);var e=os(n);function n(){var t,r;Oa(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=e.call.apply(e,Pa(t=[this]).call(t,o)),Qa(ja(r),"attrs",is({},ns)),r}return La(n,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};for(var n in t){var r,i=t[n];ba(r=ca(this)).call(r,n)&&(this.attrs[n]=i,e[n]=i)}this.trigger("change",e)}},{key:"get",value:function(t){return this.attrs[t]}}]),n}(ts);as.prototype.keys=["appVersion","appKey","appSecret","authToken","eventTracker","locale","coreSessionToken","coreSessionClientId","coreUrl","eventsTrackUrl"];var ss=[].join,ls=Ar!=Object,cs=function(t,e){var n=[][t];return!!n&&xr((function(){n.call(null,e||function(){throw 1},1)}))}("join",",");mo({target:"Array",proto:!0,forced:ls||!cs},{join:function(t){return ss.call(Or(this),void 0===t?",":t)}}),V({target:"Array",stat:!0},{isArray:Ye});var us=j.Array.isArray,hs=us,fs=Je.map,ps=kn("map"),ds=rn("map");V({target:"Array",proto:!0,forced:!ps||!ds},{map:function(t){return fs(this,t,arguments.length>1?arguments[1]:void 0)}});var vs=Y("Array").map,gs=Array.prototype,ys=function(t){var e=t.map;return t===gs||t instanceof Array&&e===gs.map?vs:e},ms=yt("JSON","stringify"),bs=/[\uD800-\uDFFF]/g,ws=/^[\uD800-\uDBFF]$/,_s=/^[\uDC00-\uDFFF]$/,Ss=function(t,e,n){var r=n.charAt(e-1),i=n.charAt(e+1);return ws.test(t)&&!_s.test(i)||_s.test(t)&&!ws.test(r)?"\\u"+t.charCodeAt(0).toString(16):t},xs=i((function(){return'"\\udf06\\ud834"'!==ms("\udf06\ud834")||'"\\udead"'!==ms("\udead")}));ms&&V({target:"JSON",stat:!0,forced:xs},{stringify:function(t,e,n){var r=ms.apply(null,arguments);return"string"==typeof r?r.replace(bs,Ss):r}}),j.JSON||(j.JSON={stringify:JSON.stringify});var ks=function(t,e,n){return j.JSON.stringify.apply(null,arguments)},Es=e((function(e,n){var r=function(t){function e(){this.fetch=!1,this.DOMException=t.DOMException}return e.prototype=t,new e}("undefined"!=typeof self?self:t);!function(t){!function(e){var n="URLSearchParams"in t,r="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),o="FormData"in t,a="ArrayBuffer"in t;if(a)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(t){return t&&s.indexOf(Object.prototype.toString.call(t))>-1};function c(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!=typeof t&&(t=String(t)),t}function h(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r&&(e[Symbol.iterator]=function(){return e}),e}function f(t){this.map={},t instanceof f?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function p(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function d(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function v(t){var e=new FileReader,n=d(e);return e.readAsArrayBuffer(t),n}function g(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:o&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():a&&i&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=g(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(t)||l(t))?this._bodyArrayBuffer=g(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,n=d(e);return e.readAsText(t),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(t,e){t=c(t),e=u(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},f.prototype.delete=function(t){delete this.map[c(t)]},f.prototype.get=function(t){return t=c(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(c(t))},f.prototype.set=function(t,e){this.map[c(t)]=u(e)},f.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},f.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),h(t)},f.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),h(t)},f.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),h(t)},r&&(f.prototype[Symbol.iterator]=f.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t,e){var n,r,i=(e=e||{}).body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),m.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function w(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}})),e}function _(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},y.call(b.prototype),y.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},_.error=function(){var t=new _(null,{status:0,statusText:""});return t.type="error",t};var S=[301,302,303,307,308];_.redirect=function(t,e){if(-1===S.indexOf(e))throw new RangeError("Invalid status code");return new _(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function x(t,n){return new Promise((function(r,o){var a=new b(t,n);if(a.signal&&a.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function l(){s.abort()}s.onload=function(){var t,e,n={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new f,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}})),e)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;r(new _(i,n))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&i&&(s.responseType="blob"),a.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),a.signal&&(a.signal.addEventListener("abort",l),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",l)}),s.send(void 0===a._bodyInit?null:a._bodyInit)}))}x.polyfill=!0,t.fetch||(t.fetch=x,t.Headers=f,t.Request=b,t.Response=_),e.Headers=f,e.Request=b,e.Response=_,e.fetch=x}({})}(r),delete r.fetch.polyfill,(n=r.fetch).default=r.fetch,n.fetch=r.fetch,n.Headers=r.Headers,n.Request=r.Request,n.Response=r.Response,e.exports=n})),Ts=Br.f,As=Function.prototype,Ps=As.toString,Os=/^\s*function ([^ (]*)/,Is="name";Lr&&!(Is in As)&&Ts(As,Is,{configurable:!0,get:function(){try{return Ps.call(this).match(Os)[1]}catch(t){return""}}});var Cs=function(t,e,n){var r,i;return jo&&"function"==typeof(r=e.constructor)&&r!==n&&jr(i=r.prototype)&&i!==n.prototype&&jo(t,i),t},Ls=ii("match"),js=function(t){var e;return jr(t)&&(void 0!==(e=t[Ls])?!!e:"RegExp"==Er(t))},Rs=function(){var t=zr(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function Ds(t,e){return RegExp(t,e)}var Ns={UNSUPPORTED_Y:xr((function(){var t=Ds("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:xr((function(){var t=Ds("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},Ms=ii("species"),zs=function(t){var e=Si(t),n=Br.f;Lr&&e&&!e[Ms]&&n(e,Ms,{configurable:!0,get:function(){return this}})},Fs=Br.f,Us=oo.f,Bs=Ki.set,Vs=ii("match"),Hs=Cr.RegExp,Ws=Hs.prototype,qs=/a/g,Xs=/a/g,Ys=new Hs(qs)!==qs,Gs=Ns.UNSUPPORTED_Y;if(Lr&&go("RegExp",!Ys||Gs||xr((function(){return Xs[Vs]=!1,Hs(qs)!=qs||Hs(Xs)==Xs||"/a/i"!=Hs(qs,"i")})))){for(var $s=function(t,e){var n,r=this instanceof $s,i=js(t),o=void 0===e;if(!r&&i&&t.constructor===$s&&o)return t;Ys?i&&!o&&(t=t.source):t instanceof $s&&(o&&(e=Rs.call(t)),t=t.source),Gs&&(n=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var a=Cs(Ys?new Hs(t,e):Hs(t,e),r?this:Ws,$s);return Gs&&n&&Bs(a,{sticky:n}),a},Zs=function(t){t in $s||Fs($s,t,{configurable:!0,get:function(){return Hs[t]},set:function(e){Hs[t]=e}})},Ks=Us(Hs),Js=0;Ks.length>Js;)Zs(Ks[Js++]);Ws.constructor=$s,$s.prototype=Ws,ro(Cr,"RegExp",$s)}zs("RegExp");var Qs=RegExp.prototype.exec,tl=String.prototype.replace,el=Qs,nl=function(){var t=/a/,e=/b*/g;return Qs.call(t,"a"),Qs.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),rl=Ns.UNSUPPORTED_Y||Ns.BROKEN_CARET,il=void 0!==/()??/.exec("")[1];(nl||il||rl)&&(el=function(t){var e,n,r,i,o=this,a=rl&&o.sticky,s=Rs.call(o),l=o.source,c=0,u=t;return a&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),u=String(t).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==t[o.lastIndex-1])&&(l="(?: "+l+")",u=" "+u,c++),n=new RegExp("^(?:"+l+")",s)),il&&(n=new RegExp("^"+l+"$(?!\\s)",s)),nl&&(e=o.lastIndex),r=Qs.call(a?n:o,u),a?r?(r.input=r.input.slice(c),r[0]=r[0].slice(c),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:nl&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),il&&r&&r.length>1&&tl.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var ol=el;mo({target:"RegExp",proto:!0,forced:/./.exec!==ol},{exec:ol});var al="toString",sl=RegExp.prototype,ll=sl.toString,cl=xr((function(){return"/a/b"!=ll.call({source:"a",flags:"b"})})),ul=ll.name!=al;(cl||ul)&&ro(RegExp.prototype,al,(function(){var t=zr(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in sl)?Rs.call(t):n)}),{unsafe:!0});var hl=ii("species"),fl=!xr((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),pl="$0"==="a".replace(/./,"$0"),dl=ii("replace"),vl=!!/./[dl]&&""===/./[dl]("a","$0"),gl=!xr((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),yl=function(t,e,n,r){var i=ii(t),o=!xr((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!xr((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[hl]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||"replace"===t&&(!fl||!pl||vl)||"split"===t&&!gl){var s=/./[i],l=n(i,""[t],(function(t,e,n,r,i){return e.exec===ol?o&&!i?{done:!0,value:s.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:pl,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:vl}),c=l[0],u=l[1];ro(String.prototype,t,c),ro(RegExp.prototype,i,2==e?function(t,e){return u.call(t,this,e)}:function(t){return u.call(t,this)})}r&&Hr(RegExp.prototype[i],"sham",!0)},ml=function(t){return function(e,n){var r,i,o=String(Pr(e)),a=si(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},bl={codeAt:ml(!1),charAt:ml(!0)},wl=bl.charAt,_l=function(t,e,n){return e+(n?wl(t,e).length:1)},Sl=Math.floor,xl="".replace,kl=/\$([$&'`]|\d\d?|<[^>]*>)/g,El=/\$([$&'`]|\d\d?)/g,Tl=function(t,e,n,r,i,o){var a=n+t.length,s=r.length,l=El;return void 0!==i&&(i=bo(i),l=kl),xl.call(o,l,(function(o,l){var c;switch(l.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(a);case"<":c=i[l.slice(1,-1)];break;default:var u=+l;if(0===u)return o;if(u>s){var h=Sl(u/10);return 0===h?o:h<=s?void 0===r[h-1]?l.charAt(1):r[h-1]+l.charAt(1):o}c=r[u-1]}return void 0===c?"":c}))},Al=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==Er(t))throw TypeError("RegExp#exec called on incompatible receiver");return ol.call(t,e)},Pl=Math.max,Ol=Math.min;yl("replace",2,(function(t,e,n,r){var i=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=r.REPLACE_KEEPS_$0,a=i?"$":"$0";return[function(n,r){var i=Pr(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!i&&o||"string"==typeof r&&-1===r.indexOf(a)){var s=n(e,t,this,r);if(s.done)return s.value}var l=zr(t),c=String(this),u="function"==typeof r;u||(r=String(r));var h=l.global;if(h){var f=l.unicode;l.lastIndex=0}for(var p=[];;){var d=Al(l,c);if(null===d)break;if(p.push(d),!h)break;""===String(d[0])&&(l.lastIndex=_l(c,ci(l.lastIndex),f))}for(var v,g="",y=0,m=0;m<p.length;m++){d=p[m];for(var b=String(d[0]),w=Pl(Ol(si(d.index),c.length),0),_=[],S=1;S<d.length;S++)_.push(void 0===(v=d[S])?v:String(v));var x=d.groups;if(u){var k=[b].concat(_,w,c);void 0!==x&&k.push(x);var E=String(r.apply(void 0,k))}else E=Tl(b,c,w,_,x,r);w>=y&&(g+=c.slice(y,w)+E,y=w+b.length)}return g+c.slice(y)}]}));var Il=se("iterator"),Cl=Array.prototype,Ll=function(t){return void 0!==t&&(kt.Array===t||Cl[Il]===t)},jl=se("iterator"),Rl=function(t){if(null!=t)return t[jl]||t["@@iterator"]||kt[xe(t)]},Dl=function(t){var e=t.return;if(void 0!==e)return N(e.call(t)).value},Nl=function(t,e){this.stopped=t,this.result=e},Ml=function(t,e,n){var r,i,o,a,s,l,c,u=n&&n.that,h=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),d=D(e,u,1+h+p),v=function(t){return r&&Dl(r),new Nl(!0,t)},g=function(t){return h?(N(t),p?d(t[0],t[1],v):d(t[0],t[1])):p?d(t,v):d(t)};if(f)r=t;else{if("function"!=typeof(i=Rl(t)))throw TypeError("Target is not iterable");if(Ll(i)){for(o=0,a=rt(t.length);a>o;o++)if((s=g(t[o]))&&s instanceof Nl)return s;return new Nl(!1)}r=i.call(t)}for(l=r.next;!(c=l.call(r)).done;){try{s=g(c.value)}catch(t){throw Dl(r),t}if("object"==typeof s&&s&&s instanceof Nl)return s}return new Nl(!1)},zl=function(t,e){var n=this;if(!(n instanceof zl))return new zl(t,e);Ie&&(n=Ie(new Error(void 0),ee(n))),void 0!==e&&F(n,"message",String(e));var r=[];return Ml(t,r.push,{that:r}),F(n,"errors",r),n};zl.prototype=me(Error.prototype,{constructor:c(5,zl),message:c(5,""),name:c(5,"AggregateError")}),V({global:!0},{AggregateError:zl});var Fl=r.Promise,Ul=se("species"),Bl=se("iterator"),Vl=!1;try{var Hl=0,Wl={next:function(){return{done:!!Hl++}},return:function(){Vl=!0}};Wl[Bl]=function(){return this},Array.from(Wl,(function(){throw 2}))}catch(rh){}var ql,Xl,Yl,Gl=function(t,e){if(!e&&!Vl)return!1;var n=!1;try{var r={};r[Bl]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},$l=se("species"),Zl=function(t,e){var n,r=N(t).constructor;return void 0===r||null==(n=N(r)[$l])?e:R(n)},Kl=/(iphone|ipod|ipad).*applewebkit/i.test(mn),Jl="process"==h(r.process),Ql=r.location,tc=r.setImmediate,ec=r.clearImmediate,nc=r.process,rc=r.MessageChannel,ic=r.Dispatch,oc=0,ac={},sc="onreadystatechange",lc=function(t){if(ac.hasOwnProperty(t)){var e=ac[t];delete ac[t],e()}},cc=function(t){return function(){lc(t)}},uc=function(t){lc(t.data)},hc=function(t){r.postMessage(t+"",Ql.protocol+"//"+Ql.host)};tc&&ec||(tc=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return ac[++oc]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},ql(oc),oc},ec=function(t){delete ac[t]},Jl?ql=function(t){nc.nextTick(cc(t))}:ic&&ic.now?ql=function(t){ic.now(cc(t))}:rc&&!Kl?(Yl=(Xl=new rc).port2,Xl.port1.onmessage=uc,ql=D(Yl.postMessage,Yl,1)):r.addEventListener&&"function"==typeof postMessage&&!r.importScripts&&Ql&&"file:"!==Ql.protocol&&!i(hc)?(ql=hc,r.addEventListener("message",uc,!1)):ql=sc in S("script")?function(t){pe.appendChild(S("script")).onreadystatechange=function(){pe.removeChild(this),lc(t)}}:function(t){setTimeout(cc(t),0)});var fc,pc,dc,vc,gc,yc,mc,bc,wc={set:tc,clear:ec},_c=/web0s(?!.*chrome)/i.test(mn),Sc=E.f,xc=wc.set,kc=r.MutationObserver||r.WebKitMutationObserver,Ec=r.document,Tc=r.process,Ac=r.Promise,Pc=Sc(r,"queueMicrotask"),Oc=Pc&&Pc.value;Oc||(fc=function(){var t,e;for(Jl&&(t=Tc.domain)&&t.exit();pc;){e=pc.fn,pc=pc.next;try{e()}catch(t){throw pc?vc():dc=void 0,t}}dc=void 0,t&&t.enter()},Kl||Jl||_c||!kc||!Ec?Ac&&Ac.resolve?(mc=Ac.resolve(void 0),bc=mc.then,vc=function(){bc.call(mc,fc)}):vc=Jl?function(){Tc.nextTick(fc)}:function(){xc.call(r,fc)}:(gc=!0,yc=Ec.createTextNode(""),new kc(fc).observe(yc,{characterData:!0}),vc=function(){yc.data=gc=!gc}));var Ic,Cc,Lc,jc=Oc||function(t){var e={fn:t,next:void 0};dc&&(dc.next=e),pc||(pc=e,vc()),dc=e},Rc=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=R(e),this.reject=R(n)},Dc={f:function(t){return new Rc(t)}},Nc=function(t,e){if(N(t),g(e)&&e.constructor===t)return e;var n=Dc.f(t);return(0,n.resolve)(e),n.promise},Mc=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},zc=wc.set,Fc=se("species"),Uc="Promise",Bc=Zt.get,Vc=Zt.set,Hc=Zt.getterFor(Uc),Wc=Fl,qc=r.TypeError,Xc=r.document,Yc=r.process,Gc=(yt("fetch"),Dc.f),$c=Gc,Zc=!!(Xc&&Xc.createEvent&&r.dispatchEvent),Kc="function"==typeof PromiseRejectionEvent,Jc="unhandledrejection",Qc=L(Uc,(function(){if(!(Ct(Wc)!==String(Wc))){if(66===Sn)return!0;if(!Jl&&!Kc)return!0}if(!Wc.prototype.finally)return!0;if(Sn>=51&&/native code/.test(Wc))return!1;var t=Wc.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[Fc]=e,!(t.then((function(){}))instanceof e)})),tu=Qc||!Gl((function(t){Wc.all(t).catch((function(){}))})),eu=function(t){var e;return!(!g(t)||"function"!=typeof(e=t.then))&&e},nu=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;jc((function(){for(var r=t.value,i=1==t.state,o=0;n.length>o;){var a,s,l,c=n[o++],u=i?c.ok:c.fail,h=c.resolve,f=c.reject,p=c.domain;try{u?(i||(2===t.rejection&&au(t),t.rejection=1),!0===u?a=r:(p&&p.enter(),a=u(r),p&&(p.exit(),l=!0)),a===c.promise?f(qc("Promise-chain cycle")):(s=eu(a))?s.call(a,h,f):h(a)):f(r)}catch(t){p&&!l&&p.exit(),f(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&iu(t)}))}},ru=function(t,e,n){var i,o;Zc?((i=Xc.createEvent("Event")).promise=e,i.reason=n,i.initEvent(t,!1,!0),r.dispatchEvent(i)):i={promise:e,reason:n},!Kc&&(o=r["on"+t])?o(i):t===Jc&&function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},iu=function(t){zc.call(r,(function(){var e,n=t.facade,r=t.value;if(ou(t)&&(e=Mc((function(){Jl?Yc.emit("unhandledRejection",r,n):ru(Jc,n,r)})),t.rejection=Jl||ou(t)?2:1,e.error))throw e.value}))},ou=function(t){return 1!==t.rejection&&!t.parent},au=function(t){zc.call(r,(function(){var e=t.facade;Jl?Yc.emit("rejectionHandled",e):ru("rejectionhandled",e,t.value)}))},su=function(t,e,n){return function(r){t(e,r,n)}},lu=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,nu(t,!0))},cu=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw qc("Promise can't be resolved itself");var r=eu(e);r?jc((function(){var n={done:!1};try{r.call(e,su(cu,n,t),su(lu,n,t))}catch(e){lu(n,e,t)}})):(t.value=e,t.state=1,nu(t,!1))}catch(e){lu({done:!1},e,t)}}};Qc&&(Wc=function(t){!function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}(this,Wc,Uc),R(t),Ic.call(this);var e=Bc(this);try{t(su(cu,e),su(lu,e))}catch(t){lu(e,t)}},(Ic=function(t){Vc(this,{type:Uc,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(t,e,n){for(var r in e)n&&n.unsafe&&t[r]?t[r]=e[r]:Ce(t,r,e[r],n);return t}(Wc.prototype,{then:function(t,e){var n=Hc(this),r=Gc(Zl(this,Wc));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Jl?Yc.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&nu(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Cc=function(){var t=new Ic,e=Bc(t);this.promise=t,this.resolve=su(cu,e),this.reject=su(lu,e)},Dc.f=Gc=function(t){return t===Wc||t===Lc?new Cc(t):$c(t)}),V({global:!0,wrap:!0,forced:Qc},{Promise:Wc}),Ae(Wc,Uc,!1,!0),function(t){var e=yt(t),n=z.f;o&&e&&!e[Ul]&&n(e,Ul,{configurable:!0,get:function(){return this}})}(Uc),Lc=yt(Uc),V({target:Uc,stat:!0,forced:Qc},{reject:function(t){var e=Gc(this);return e.reject.call(void 0,t),e.promise}}),V({target:Uc,stat:!0,forced:Rt},{resolve:function(t){return Nc(this===Lc?Wc:this,t)}}),V({target:Uc,stat:!0,forced:tu},{all:function(t){var e=this,n=Gc(e),r=n.resolve,i=n.reject,o=Mc((function(){var n=R(e.resolve),o=[],a=0,s=1;Ml(t,(function(t){var l=a++,c=!1;o.push(void 0),s++,n.call(e,t).then((function(t){c||(c=!0,o[l]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=Gc(e),r=n.reject,i=Mc((function(){var i=R(e.resolve);Ml(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}}),V({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=Dc.f(e),r=n.resolve,i=n.reject,o=Mc((function(){var n=R(e.resolve),i=[],o=0,a=1;Ml(t,(function(t){var s=o++,l=!1;i.push(void 0),a++,n.call(e,t).then((function(t){l||(l=!0,i[s]={status:"fulfilled",value:t},--a||r(i))}),(function(t){l||(l=!0,i[s]={status:"rejected",reason:t},--a||r(i))}))})),--a||r(i)}));return o.error&&i(o.value),n.promise}});var uu="No one promise resolved";V({target:"Promise",stat:!0},{any:function(t){var e=this,n=Dc.f(e),r=n.resolve,i=n.reject,o=Mc((function(){var n=R(e.resolve),o=[],a=0,s=1,l=!1;Ml(t,(function(t){var c=a++,u=!1;o.push(void 0),s++,n.call(e,t).then((function(t){u||l||(l=!0,r(t))}),(function(t){u||l||(u=!0,o[c]=t,--s||i(new(yt("AggregateError"))(o,uu)))}))})),--s||i(new(yt("AggregateError"))(o,uu))}));return o.error&&i(o.value),n.promise}});var hu=!!Fl&&i((function(){Fl.prototype.finally.call({then:function(){}},(function(){}))}));V({target:"Promise",proto:!0,real:!0,forced:hu},{finally:function(t){var e=Zl(this,yt("Promise")),n="function"==typeof t;return this.then(n?function(n){return Nc(e,t()).then((function(){return n}))}:t,n?function(n){return Nc(e,t()).then((function(){throw n}))}:t)}});var fu=j.Promise,pu=fu,du=[].slice,vu=/MSIE .\./.test(mn),gu=function(t){return function(e,n){var r=arguments.length>2,i=r?du.call(arguments,2):void 0;return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};V({global:!0,bind:!0,forced:vu},{setTimeout:gu(r.setTimeout),setInterval:gu(r.setInterval)});var yu=j.setTimeout,mu=kn("splice"),bu=rn("splice",{ACCESSORS:!0,0:0,1:2}),wu=Math.max,_u=Math.min,Su=9007199254740991,xu="Maximum allowed length exceeded";V({target:"Array",proto:!0,forced:!mu||!bu},{splice:function(t,e){var n,r,i,o,a,s,l=Kt(this),c=rt(l.length),u=at(t,c),h=arguments.length;if(0===h?n=r=0:1===h?(n=0,r=c-u):(n=h-2,r=_u(wu(et(e),0),c-u)),c+n-r>Su)throw TypeError(xu);for(i=$e(l,r),o=0;o<r;o++)(a=u+o)in l&&St(i,o,l[a]);if(i.length=r,n<r){for(o=u;o<c-r;o++)s=o+n,(a=o+r)in l?l[s]=l[a]:delete l[s];for(o=c;o>c-r+n;o--)delete l[o-1]}else if(n>r)for(o=c-r;o>u;o--)s=o+n-1,(a=o+r-1)in l?l[s]=l[a]:delete l[s];for(o=0;o<n;o++)l[o+u]=arguments[o+2];return l.length=c-r+n,i}});var ku=Y("Array").splice,Eu=Array.prototype,Tu=function(t){var e=t.splice;return t===Eu||t instanceof Array&&e===Eu.splice?ku:e},Au="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",Pu="["+Au+"]",Ou=RegExp("^"+Pu+Pu+"*"),Iu=RegExp(Pu+Pu+"*$"),Cu=function(t){return function(e){var n=String(d(e));return 1&t&&(n=n.replace(Ou,"")),2&t&&(n=n.replace(Iu,"")),n}},Lu={start:Cu(1),end:Cu(2),trim:Cu(3)},ju=Lu.trim,Ru=r.parseInt,Du=/^[+-]?0[Xx]/,Nu=8!==Ru(Au+"08")||22!==Ru(Au+"0x16")?function(t,e){var n=ju(String(t));return Ru(n,e>>>0||(Du.test(n)?16:10))}:Ru;V({global:!0,forced:parseInt!=Nu},{parseInt:Nu});var Mu=j.parseInt,zu=Math.min,Fu=[].lastIndexOf,Uu=!!Fu&&1/[1].lastIndexOf(1,-0)<0,Bu=Qe("lastIndexOf"),Vu=rn("indexOf",{ACCESSORS:!0,1:0}),Hu=Uu||!Bu||!Vu?function(t){if(Uu)return Fu.apply(this,arguments)||0;var e=v(this),n=rt(e.length),r=n-1;for(arguments.length>1&&(r=zu(r,et(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}:Fu;V({target:"Array",proto:!0,forced:Hu!==[].lastIndexOf},{lastIndexOf:Hu});var Wu=Y("Array").lastIndexOf,qu=Array.prototype,Xu=function(t){var e=t.lastIndexOf;return t===qu||t instanceof Array&&e===qu.lastIndexOf?Wu:e},Yu=lt.indexOf,Gu=[].indexOf,$u=!!Gu&&1/[1].indexOf(1,-0)<0,Zu=Qe("indexOf"),Ku=rn("indexOf",{ACCESSORS:!0,1:0});V({target:"Array",proto:!0,forced:$u||!Zu||!Ku},{indexOf:function(t){return $u?Gu.apply(this,arguments)||0:Yu(this,t,arguments.length>1?arguments[1]:void 0)}});var Ju=Y("Array").indexOf,Qu=Array.prototype,th=function(t){var e=t.indexOf;return t===Qu||t instanceof Array&&e===Qu.indexOf?Ju:e};function eh(){return"object"==typeof window&&"object"==typeof document}function nh(){return"object"==typeof process}function rh(t,e){if(t.message=t.message||null,"string"==typeof e)t.message=e;else if("object"==typeof e&&null!=e){for(var n in e){var r=e[n];t[n]=r}null!=e.message&&(t.message=e.message),null==e.code&&null==e.message||(t.code=e.code||e.name),null!=e.stack&&(t.stack=e.stack)}return t.name=(null==e?void 0:e.name)||t.name||t.code||"Error",t.time=new Date,t}function ih(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function oh(){var t="desktop";return"iPod"===navigator.platform||"iPhone"===navigator.platform?t="mobile":"iPad"===navigator.platform?t="tablet":("Android"===navigator.platform||/android/gi.test(navigator.userAgent))&&(t=/tablet/gi.test(navigator.userAgent)?"tablet":"mobile"),t}function ah(){var t="fine";return matchMedia("(pointer:coarse)").matches&&(t="coarse"),t}function sh(t,e){return t===e?"quadratic":t>e?"horizontal":"vertical"}function lh(t){t=t.replace("#","");for(var e=Mu((e+"").replace(/[^a-f0-9]/gi,""),16),n=[],r=0,i=0;i<3;){var o=Mu(t.substring(2*i,2),16);n[i]=o,o>0&&(r+=o),++i}return r<=381?"dark":"light"}function ch(t){if(eh())return window.btoa(t);return(t instanceof Buffer?t:Buffer.from(t.toString(),"binary")).toString("base64")}function uh(t,e){for(var n=[];t.length;)n.push(Tu(t).call(t,0,e));return n}function hh(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2?arguments[2]:void 0,r=void 0,i=void 0;return function(){var o=n||this,a=(new Date).getTime(),s=arguments;r&&a<r+e?(clearTimeout(i),i=yu((function(){r=a,t.apply(o,s)}),e)):(r=a,t.apply(o,s))}}function fh(t,e){var n=new Image;return n.onload=function(){return e(null,n.width,n.height)},n.onerror=function(){return e(new Error)},n.src=t,n}function ph(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length-1,r=function(t,n,r){return new pu((function(i,o){for(var a=function(t,e){return t?o(t):i(e)},s=[],l=0,c=Math.max(r.length,n)+1,u=0<=c;u?l<c:l>c;u?l++:l--)s.push(l===n?a:r[l]);return t.apply(e,s)}))};return function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];if("function"==typeof i[n])return t.apply(null,i);if("function"==typeof pu)return r(t,n,i);throw new Error("To be able to use this asynchronous method you should:\nSupply a callback function as argument #".concat(1+n,".\nThis callback function will be called with the method call response.\nAlternatively, when supported, it can return a Promise if no callback function is given."))}}var dh=Object.freeze({__proto__:null,isBrowser:eh,isNode:nh,error:rh,uuid:ih,getQueryParam:function(t,e){var n=e||window.location.href,r=new RegExp("[?&]"+t+"=([^&#]*)","i").exec(n);if(r)return r[1]},getRandomNumberBetween:function(t,e){return Math.floor(Math.random()*e)+t},getOS:function(){var t=null,e=window.navigator.userAgent;return th(e).call(e,"Windows")>-1?t="Windows":th(e).call(e,"Mac")>-1?t="macOS":th(e).call(e,"X11")>-1?t="unix":th(e).call(e,"Linux")>-1?t="Linux":th(e).call(e,"iOS")>-1?t="iOS":th(e).call(e,"Android")>-1&&(t="Android"),t},getDeviceCategory:oh,getPointer:ah,getOrientation:sh,getScreenDimensions:function(){var t,e=null!==(t=window.devicePixelRatio)&&void 0!==t?t:1,n={width:window.screen.width,height:window.screen.height};return{density:e,logical:n,physical:{width:Math.round(n.width*e),height:Math.round(n.height*e)}}},getUtcOffsetSeconds:function(){var t=new Date,e=new Date(t.getFullYear(),0,1,0,0,0,0),n=e.toGMTString();return(e-new Date(n.substring(0,Xu(n).call(n," ")-1)))/1e3},getUtcDstOffsetSeconds:function(){return 60*(new Date).getTimezoneOffset()*-1},getColorBrightness:lh,btoa:ch,chunk:uh,throttle:hh,loadImage:fh,distance:function(t,e,n,r){var i=Math.PI*t/180,o=Math.PI*n/180,a=e-r,s=Math.PI*a/180,l=Math.sin(i)*Math.sin(o)+Math.cos(i)*Math.cos(o)*Math.cos(s);return l=1.609344*(l=60*(l=180*(l=Math.acos(l))/Math.PI)*1.1515)*1e3},promiseCallbackInterop:ph}),vh=e((function(e){!function(t){var n={bytesToHex:function(t){return function(t){return t.map((function(t){return e=t.toString(16),n=2,e.length>n?e:Array(n-e.length+1).join("0")+e;var e,n})).join("")}(t)},hexToBytes:function(t){if(t.length%2==1)throw new Error("hexToBytes can't have a string with an odd number of characters.");return 0===t.indexOf("0x")&&(t=t.slice(2)),t.match(/../g).map((function(t){return parseInt(t,16)}))}};e.exports?e.exports=n:t.convertHex=n}(t)})),gh=e((function(e){!function(t){var n={bytesToString:function(t){return t.map((function(t){return String.fromCharCode(t)})).join("")},stringToBytes:function(t){return t.split("").map((function(t){return t.charCodeAt(0)}))}};n.UTF8={bytesToString:function(t){return decodeURIComponent(escape(n.bytesToString(t)))},stringToBytes:function(t){return n.stringToBytes(unescape(encodeURIComponent(t)))}},e.exports?e.exports=n:t.convertString=n}(t)})),yh=e((function(e){!function(t){var n={};e.exports?(n.bytesToHex=vh.bytesToHex,n.convertString=gh,e.exports=a):(n.bytesToHex=t.convertHex.bytesToHex,n.convertString=t.convertString,t.sha256=a);var r=[];!function(){function t(t){for(var e=Math.sqrt(t),n=2;n<=e;n++)if(!(t%n))return!1;return!0}function e(t){return 4294967296*(t-(0|t))|0}for(var n=2,i=0;i<64;)t(n)&&(r[i]=e(Math.pow(n,1/3)),i++),n++}();var i=[],o=function(t,e,n){for(var o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],h=t[6],f=t[7],p=0;p<64;p++){if(p<16)i[p]=0|e[n+p];else{var d=i[p-15],v=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,g=i[p-2],y=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;i[p]=v+i[p-7]+y+i[p-16]}var m=o&a^o&s^a&s,b=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),w=f+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&h)+r[p]+i[p];f=h,h=u,u=c,c=l+w|0,l=s,s=a,a=o,o=w+(b+m)|0}t[0]=t[0]+o|0,t[1]=t[1]+a|0,t[2]=t[2]+s|0,t[3]=t[3]+l|0,t[4]=t[4]+c|0,t[5]=t[5]+u|0,t[6]=t[6]+h|0,t[7]=t[7]+f|0};function a(t,e){t.constructor===String&&(t=n.convertString.UTF8.stringToBytes(t));var r=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],i=function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e}(t),a=8*t.length;i[a>>5]|=128<<24-a%32,i[15+(a+64>>9<<4)]=a;for(var s=0;s<i.length;s+=16)o(r,i,s);var l=function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e}(r);return e&&e.asBytes?l:e&&e.asString?n.convertString.bytesToString(l):n.bytesToHex(l)}a.x2=function(t,e){return a(a(t,{asBytes:!0}),e)}}(t)})),mh=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},bh=ii("species"),wh=function(t,e){var n,r=zr(t).constructor;return void 0===r||null==(n=zr(r)[bh])?e:mh(n)},_h=[].push,Sh=Math.min,xh=4294967295,kh=!xr((function(){return!RegExp(xh,"y")}));yl("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(Pr(this)),i=void 0===n?xh:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!js(t))return e.call(r,t,i);for(var o,a,s,l=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,h=new RegExp(t.source,c+"g");(o=ol.call(h,r))&&!((a=h.lastIndex)>u&&(l.push(r.slice(u,o.index)),o.length>1&&o.index<r.length&&_h.apply(l,o.slice(1)),s=o[0].length,u=a,l.length>=i));)h.lastIndex===o.index&&h.lastIndex++;return u===r.length?!s&&h.test("")||l.push(""):l.push(r.slice(u)),l.length>i?l.slice(0,i):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=Pr(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var o=n(r,t,this,i,r!==e);if(o.done)return o.value;var a=zr(t),s=String(this),l=wh(a,RegExp),c=a.unicode,u=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(kh?"y":"g"),h=new l(kh?a:"^(?:"+a.source+")",u),f=void 0===i?xh:i>>>0;if(0===f)return[];if(0===s.length)return null===Al(h,s)?[s]:[];for(var p=0,d=0,v=[];d<s.length;){h.lastIndex=kh?d:0;var g,y=Al(h,kh?s:s.slice(d));if(null===y||(g=Sh(ci(h.lastIndex+(kh?0:d)),s.length))===p)d=_l(s,d,c);else{if(v.push(s.slice(p,d)),v.length===f)return v;for(var m=1;m<=y.length-1;m++)if(v.push(y[m]),v.length===f)return v;d=p=g}}return v.push(s.slice(p)),v}]}),!kh);var Eh=Lu.trim;V({target:"String",proto:!0,forced:function(t){return i((function(){return!!Au[t]()||"âÂá "!="âÂá "[t]()||Au[t].name!==t}))}("trim")},{trim:function(){return Eh(this)}});var Th=Y("String").trim,Ah=String.prototype,Ph=function(t){var e=t.trim;return"string"==typeof t||t===Ah||t instanceof String&&e===Ah.trim?Th:e},Oh="sgn-";function Ih(t,e){if(!nh())try{var n,r,i,o=new Date,a=ks(e);o.setTime(o.getTime()+31536e6),document.cookie=Pa(n=Pa(r=Pa(i="".concat(Oh)).call(i,t,"=")).call(r,a,";expires=")).call(n,o.toUTCString(),";path=/")}catch(t){}}var Ch=Object.freeze({__proto__:null,get:function(t){var e;if(!nh()){try{var n,r=Pa(n="".concat(Oh)).call(n,t,"="),i=document.cookie.split(";");fn(i).call(i,(function(t){var n=Ph(t).call(t);0===th(n).call(n,r)&&(e=n.substring(r.length,n.length))})),e=JSON.parse(e)}catch(t){e={}}return e}},set:Ih}),Lh=[],jh=!1;function Rh(t){if(!t)throw new Error("No token provided for saving");Dm.config.set({coreSessionToken:t}),Nh()}function Dh(t){Dm.config.set({coreSessionClientId:t}),Nh()}function Nh(){Ih("session",{token:Dm.config.get("coreSessionToken"),client_id:Dm.config.get("coreSessionClientId")})}function Mh(t){var e,n=Dm.config.get("appKey");Es(Dm.config.get("coreUrl")+Pa(e="/v2/sessions?api_key=".concat(n,"&token_ttl=")).call(e,5184e3),{method:"post"}).then((function(e){return e.json().then((function(n){201===e.status?(Rh(n.token),Dh(n.client_id),t(null,n)):t(new Error("Could not create session"))}))})).catch((function(e){t(e)}))}function zh(t){var e={},n=Dm.config.get("coreSessionToken"),r=Dm.config.get("appSecret");e["X-Token"]=n,r&&(e["X-Signature"]=Uh(r,n)),Es(Dm.config.get("coreUrl")+"/v2/sessions",{method:"put",headers:e}).then((function(e){return e.json().then((function(n){200===e.status?(Rh(n.token),Dh(n.client_id),t(null,n)):t(new Error("Could not renew session"))}))})).catch((function(e){t(e)}))}function Fh(t){var e=Lh.length,n=function(t){Lh=In(Lh).call(Lh,(function(e){return e(t),!1}))};Lh.push(t),0===e&&(null==Dm.config.get("coreSessionToken")?Mh(n):!1===jh?(jh=!0,zh((function(t){null!=t?Mh(n):n()}))):n())}function Uh(t,e){return yh([t,e].join(""))}var Bh=Object.freeze({__proto__:null,saveToken:Rh,saveClientId:Dh,saveCookie:Nh,create:Mh,update:function(t){var e={},n=Dm.config.get("coreSessionToken"),r=Dm.config.get("appSecret");e["X-Token"]=n,null!=r&&(e["X-Signature"]=Uh(r,n)),Es(Dm.config.get("coreUrl")+"/v2/sessions",{method:"put",headers:e}).then((function(e){return e.json().then((function(n){200===e.status?(Rh(n.token),Dh(n.client_id),t(null,n)):t(new Error("Could not update session"))}))})).catch((function(e){t(e)}))},renew:zh,ensure:Fh,sign:Uh});var Vh=ph((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;Fh((function(i){var o,a,s;if(null!=i)return n(i);var l,c=Dm.config.get("coreUrl")+(null!==(o=e.url)&&void 0!==o?o:""),u=null!==(a=e.headers)&&void 0!==a?a:{},h="boolean"!=typeof e.json||e.json,f=Dm.config.get("coreSessionToken"),p=Dm.config.get("appKey"),d=Dm.config.get("appVersion"),v=Dm.config.get("appSecret"),g=Dm.config.get("locale"),y=null!==(s=e.qs)&&void 0!==s?s:{},m=e.geolocation,b=e.body;(u["X-Api-Key"]=p,u["X-Token"]=f,null!=v&&(u["X-Signature"]=Uh(v,f)),h&&(u["Content-Type"]="application/json",u.Accept="application/json",b&&(b=ks(b))),null!=g&&(y.r_locale=g),null!=d&&(y.api_av=d),null!=m&&(null!=m.latitude&&null==y.r_lat&&(y.r_lat=m.latitude),null!=m.longitude&&null==y.r_lng&&(y.r_lng=m.longitude),null!=m.radius&&null==y.r_radius&&(y.r_radius=m.radius),null!=m.sensor&&null==y.r_sensor&&(y.r_sensor=m.sensor)),gr(y).length)&&(c+="?"+ys(l=gr(y)).call(l,(function(t){var e,n;return hs(t)?ys(n=y[t]).call(n,(function(e){var n;return Pa(n="".concat(encodeURIComponent(t),"[]=")).call(n,encodeURIComponent(e))})).join("&"):Pa(e="".concat(encodeURIComponent(t),"=")).call(e,encodeURIComponent(y[t]))})).join("&"));return Es(c,{method:e.method,body:b,headers:u}).then((function(i){return i.json().then((function(o){f=Dm.config.get("coreSessionToken");var a,s=i.headers.get("x-token");(s&&f!==s&&Rh(s),i.status>=200&&i.status<300||304===i.status)?n(null,o):!0!==r&&ba(a=[1101,1107,1108]).call(a,null==o?void 0:o.code)?(Dm.config.set({coreSessionToken:void 0}),t(e,n,!0)):n(rh(new Error("Core API error"),{code:"CoreAPIError",statusCode:i.status}),o)}))})).catch(n)}))}),1),Hh=Object.freeze({__proto__:null,session:Bh,request:Vh});yl("match",1,(function(t,e,n){return[function(e){var n=Pr(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=zr(t),o=String(this);if(!i.global)return Al(i,o);var a=i.unicode;i.lastIndex=0;for(var s,l=[],c=0;null!==(s=Al(i,o));){var u=String(s[0]);l[c]=u,""===u&&(i.lastIndex=_l(o,ci(i.lastIndex),a)),c++}return 0===c?null:l}]}));var Wh=e((function(t){var e,n=0,r=0,i={},o={};function a(t,r,i){return"_root"==r?i:t!==i?function(t){return e||(e=t.matches?t.matches:t.webkitMatchesSelector?t.webkitMatchesSelector:t.mozMatchesSelector?t.mozMatchesSelector:t.msMatchesSelector?t.msMatchesSelector:t.oMatchesSelector?t.oMatchesSelector:u.matchesSelector)}(t).call(t,r)?t:t.parentNode?(n++,a(t.parentNode,r,i)):void 0:void 0}function s(t,e,n,r){i[t.id]||(i[t.id]={}),i[t.id][e]||(i[t.id][e]={}),i[t.id][e][n]||(i[t.id][e][n]=[]),i[t.id][e][n].push(r)}function l(t,e,n,r){if(i[t.id])if(e)if(r||n)if(r){if(i[t.id][e][n])for(var o=0;o<i[t.id][e][n].length;o++)if(i[t.id][e][n][o]===r){var a;Tu(a=i[t.id][e][n]).call(a,o,1);break}}else delete i[t.id][e][n];else i[t.id][e]={};else for(var s in i[t.id])i[t.id].hasOwnProperty(s)&&(i[t.id][s]={})}function c(t,e,r,c){if(this.element){t instanceof Array||(t=[t]),r||"function"!=typeof e||(r=e,e="_root");var h,f=this.id;for(h=0;h<t.length;h++)c?l(this,t[h],e,r):(i[f]&&i[f][t[h]]||u.addEvent(this,t[h],p(t[h])),s(this,t[h],e,r));return this}function p(t){return function(e){!function(t,e,r){if(i[t][r]){var s,l,c=e.target||e.srcElement,h={},f=0,p=0;for(s in n=0,i[t][r])i[t][r].hasOwnProperty(s)&&(l=a(c,s,o[t].element))&&u.matchesEvent(r,o[t].element,l,"_root"==s,e)&&(n++,i[t][r][s].match=l,h[n]=i[t][r][s]);for(e.stopPropagation=function(){e.cancelBubble=!0},f=0;f<=n;f++)if(h[f])for(p=0;p<h[f].length;p++){if(!1===h[f][p].call(h[f].match,e))return void u.cancel(e);if(e.cancelBubble)return}}}(f,e,t)}}}function u(t,e){if(!(this instanceof u)){for(var n in o)if(o[n].element===t)return o[n];return r++,o[r]=new u(t,r),o[r]}this.element=t,this.id=e}u.prototype.on=function(t,e,n){return c.call(this,t,e,n)},u.prototype.off=function(t,e,n){return c.call(this,t,e,n,!0)},u.matchesSelector=function(){},u.cancel=function(t){t.preventDefault(),t.stopPropagation()},u.addEvent=function(t,e,n){var r="blur"==e||"focus"==e;t.element.addEventListener(e,n,r)},u.matchesEvent=function(){return!0},t.exports&&(t.exports=u),"undefined"!=typeof window&&window.exports&&(window.Gator=u)})),qh=function(){function t(e){var n,r=e.minWidth,i=void 0===r?300:r,o=e.maxWidth,a=void 0===o?"100vw":o,s=e.anchorEl,l=e.contentEl;Oa(this,t),this.resize=Z(n=this.resize).call(n,this),this.minWidth=i,this.maxWidth=a,this.anchorEl=s,this.contentEl=l,this.elInner=document.createElement("div"),this.elInner.className="sgn-offer-details-inner",this.el=document.createElement("div"),this.el.className="sgn-offer-details",this.el.setAttribute("tabindex",-1),this.el.appendChild(this.elInner),this.el.appendChild(this.contentEl),this.position()}return La(t,[{key:"appendTo",value:function(t){return t.appendChild(this.el),this.el.offsetWidth,this.show(),this}},{key:"show",value:function(){return this.el.className+=" in",window.addEventListener("resize",this.resize,!1),this}},{key:"destroy",value:function(){window.removeEventListener("resize",this.resize,!1),this.el.parentNode.removeChild(this.el)}},{key:"position",value:function(){var t=this.anchorEl.getBoundingClientRect(),e=window.pageYOffset+t.top+this.anchorEl.offsetHeight,n=(window.pageXOffset,t.left),r=this.anchorEl.offsetWidth;this.el.style.top=e+"px";var i=t.left>=window.outerWidth/2;n=window.pageXOffset+t.left;var o=window.pageXOffset+(window.outerWidth-t.right);i?(this.el.style.left="auto",this.el.style.right=o+"px",this.elInner.style.left="auto",this.elInner.style.right=0):(this.el.style.left=n+"px",this.el.style.right="auto",this.elInner.style.left=0,this.elInner.style.right="auto"),this.el.style.minWidth="number"==typeof this.minWidth?Math.max(r,this.minWidth)+"px":this.minWidth,this.el.style.maxWidth=this.maxWidth,this.elInner.style.width=r-8+"px"}},{key:"resize",value:function(){this.position()}}]),t}(),Xh=e((function(t,e){var n;n=function(){
/*!
	   * mustache.js - Logic-less {{mustache}} templates with JavaScript
	   * http://github.com/janl/mustache.js
	   */
var t=Object.prototype.toString,e=Array.isArray||function(e){return"[object Array]"===t.call(e)};function n(t){return"function"==typeof t}function r(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(t,e){return null!=t&&"object"==typeof t&&e in t}var o=RegExp.prototype.test,a=/\S/;function s(t){return!function(t,e){return o.call(t,e)}(a,t)}var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},c=/\s*/,u=/\s+/,h=/\s*=/,f=/\s*\}/,p=/#|\^|\/|>|\{|&|=|!/;function d(t){this.string=t,this.tail=t,this.pos=0}function v(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function g(){this.templateCache={_cache:{},set:function(t,e){this._cache[t]=e},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}d.prototype.eos=function(){return""===this.tail},d.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},d.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},v.prototype.push=function(t){return new v(t,this)},v.prototype.lookup=function(t){var e,r,o,a=this.cache;if(a.hasOwnProperty(t))e=a[t];else{for(var s,l,c,u=this,h=!1;u;){if(t.indexOf(".")>0)for(s=u.view,l=t.split("."),c=0;null!=s&&c<l.length;)c===l.length-1&&(h=i(s,l[c])||(r=s,o=l[c],null!=r&&"object"!=typeof r&&r.hasOwnProperty&&r.hasOwnProperty(o))),s=s[l[c++]];else s=u.view[t],h=i(u.view,t);if(h){e=s;break}u=u.parent}a[t]=e}return n(e)&&(e=e.call(this.view)),e},g.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},g.prototype.parse=function(t,n){var i=this.templateCache,o=t+":"+(n||y.tags).join(":"),a=void 0!==i,l=a?i.get(o):void 0;return null==l&&(l=function(t,n){if(!t)return[];var i,o,a,l=!1,v=[],g=[],m=[],b=!1,w=!1,_="",S=0;function x(){if(b&&!w)for(;m.length;)delete g[m.pop()];else m=[];b=!1,w=!1}function k(t){if("string"==typeof t&&(t=t.split(u,2)),!e(t)||2!==t.length)throw new Error("Invalid tags: "+t);i=new RegExp(r(t[0])+"\\s*"),o=new RegExp("\\s*"+r(t[1])),a=new RegExp("\\s*"+r("}"+t[1]))}k(n||y.tags);for(var E,T,A,P,O,I,C=new d(t);!C.eos();){if(E=C.pos,A=C.scanUntil(i))for(var L=0,j=A.length;L<j;++L)s(P=A.charAt(L))?(m.push(g.length),_+=P):(w=!0,l=!0,_+=" "),g.push(["text",P,E,E+1]),E+=1,"\n"===P&&(x(),_="",S=0,l=!1);if(!C.scan(i))break;if(b=!0,T=C.scan(p)||"name",C.scan(c),"="===T?(A=C.scanUntil(h),C.scan(h),C.scanUntil(o)):"{"===T?(A=C.scanUntil(a),C.scan(f),C.scanUntil(o),T="&"):A=C.scanUntil(o),!C.scan(o))throw new Error("Unclosed tag at "+C.pos);if(O=">"==T?[T,A,E,C.pos,_,S,l]:[T,A,E,C.pos],S++,g.push(O),"#"===T||"^"===T)v.push(O);else if("/"===T){if(!(I=v.pop()))throw new Error('Unopened section "'+A+'" at '+E);if(I[1]!==A)throw new Error('Unclosed section "'+I[1]+'" at '+E)}else"name"===T||"{"===T||"&"===T?w=!0:"="===T&&k(A)}if(x(),I=v.pop())throw new Error('Unclosed section "'+I[1]+'" at '+C.pos);return function(t){for(var e,n=[],r=n,i=[],o=0,a=t.length;o<a;++o)switch((e=t[o])[0]){case"#":case"^":r.push(e),i.push(e),r=e[4]=[];break;case"/":i.pop()[5]=e[2],r=i.length>0?i[i.length-1][4]:n;break;default:r.push(e)}return n}(function(t){for(var e,n,r=[],i=0,o=t.length;i<o;++i)(e=t[i])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(r.push(e),n=e));return r}(g))}(t,n),a&&i.set(o,l)),l},g.prototype.render=function(t,e,n,r){var i=this.getConfigTags(r),o=this.parse(t,i),a=e instanceof v?e:new v(e,void 0);return this.renderTokens(o,a,n,t,r)},g.prototype.renderTokens=function(t,e,n,r,i){for(var o,a,s,l="",c=0,u=t.length;c<u;++c)s=void 0,"#"===(a=(o=t[c])[0])?s=this.renderSection(o,e,n,r,i):"^"===a?s=this.renderInverted(o,e,n,r,i):">"===a?s=this.renderPartial(o,e,n,i):"&"===a?s=this.unescapedValue(o,e):"name"===a?s=this.escapedValue(o,e,i):"text"===a&&(s=this.rawValue(o)),void 0!==s&&(l+=s);return l},g.prototype.renderSection=function(t,r,i,o,a){var s=this,l="",c=r.lookup(t[1]);if(c){if(e(c))for(var u=0,h=c.length;u<h;++u)l+=this.renderTokens(t[4],r.push(c[u]),i,o,a);else if("object"==typeof c||"string"==typeof c||"number"==typeof c)l+=this.renderTokens(t[4],r.push(c),i,o,a);else if(n(c)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");null!=(c=c.call(r.view,o.slice(t[3],t[5]),(function(t){return s.render(t,r,i,a)})))&&(l+=c)}else l+=this.renderTokens(t[4],r,i,o,a);return l}},g.prototype.renderInverted=function(t,n,r,i,o){var a=n.lookup(t[1]);if(!a||e(a)&&0===a.length)return this.renderTokens(t[4],n,r,i,o)},g.prototype.indentPartial=function(t,e,n){for(var r=e.replace(/[^ \t]/g,""),i=t.split("\n"),o=0;o<i.length;o++)i[o].length&&(o>0||!n)&&(i[o]=r+i[o]);return i.join("\n")},g.prototype.renderPartial=function(t,e,r,i){if(r){var o=this.getConfigTags(i),a=n(r)?r(t[1]):r[t[1]];if(null!=a){var s=t[6],l=t[5],c=t[4],u=a;0==l&&c&&(u=this.indentPartial(a,c,s));var h=this.parse(u,o);return this.renderTokens(h,e,r,u,i)}}},g.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);if(null!=n)return n},g.prototype.escapedValue=function(t,e,n){var r=this.getConfigEscape(n)||y.escape,i=e.lookup(t[1]);if(null!=i)return"number"==typeof i&&r===y.escape?String(i):r(i)},g.prototype.rawValue=function(t){return t[1]},g.prototype.getConfigTags=function(t){return e(t)?t:t&&"object"==typeof t?t.tags:void 0},g.prototype.getConfigEscape=function(t){return t&&"object"==typeof t&&!e(t)?t.escape:void 0};var y={name:"mustache.js",version:"4.1.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){m.templateCache=t},get templateCache(){return m.templateCache}},m=new g;return y.clearCache=function(){return m.clearCache()},y.parse=function(t,e){return m.parse(t,e)},y.render=function(t,n,r,i){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+(e(o=t)?"array":typeof o)+'" was given as the first argument for mustache#render(template, view, partials)');var o;return m.render(t,n,r,i)},y.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,(function(t){return l[t]}))},y.Scanner=d,y.Context=v,y.Writer=g,y},t.exports=n()}));function Yh(t){var e=function(){if("undefined"==typeof Reflect||!Sr)return!1;if(Sr.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Sr(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ja(t);if(e){var i=Ja(this).constructor;n=Sr(r,arguments,i)}else n=r.apply(this,arguments);return $a(this,n)}}var Gh=function(t){Fa(n,t);var e=Yh(n);function n(){var t,r,i,o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Oa(this,n),(o=e.call(this)).keyUp=Z(t=o.keyUp).call(t,ja(o)),o.resize=Z(r=o.resize).call(r,ja(o)),o.scroll=Z(i=o.scroll).call(i,ja(o)),o.options=a,o.el=document.createElement("div"),o.backgroundEl=document.createElement("div"),o}return La(n,[{key:"render",value:function(){var t=this.options,e=t.header,n=t.singleChoiceItems,r=t.template,i=void 0===r?'<div class="sgn-popover__background" data-close></div>\n<div class="sgn-popover__menu">\n    {{#header}}\n        <div class="sgn-popover__header">{{header}}</div>\n    {{/header}}\n    <div class="sgn-popover__content">\n        <ul>\n            {{#singleChoiceItems}}\n                <li data-index="{{index}}">\n                    <p class="sgn-popover-item__title">{{item.title}}</p>\n                    {{#item.subtitle}}\n                        <p class="sgn-popover-item__subtitle">{{item.subtitle}}</p>\n                    {{/item.subtitle}}\n                </li>\n            {{/singleChoiceItems}}\n        </ul>\n    </div>\n</div>':r,o={header:e,singleChoiceItems:null==n?void 0:ys(n).call(n,(function(t,e){return{item:t,index:e}}))};return this.el.className="sgn-popover",this.el.setAttribute("tabindex",-1),this.el.innerHTML=Xh.render(i,o),this.position(),this.addEventListeners(),this}},{key:"destroy",value:function(){Wh(this.el).off(),window.removeEventListener("resize",this.resize,!1),window.removeEventListener("scroll",this.scroll,!1),this.el.parentNode&&(this.el.parentNode.removeChild(this.el),this.trigger("destroyed"))}},{key:"position",value:function(){var t=this.options.y,e=this.options.x,n=this.el.querySelector(".sgn-popover__menu"),r=n.offsetWidth,i=n.offsetHeight,o=this.el.parentNode.offsetWidth,a=this.el.parentNode.offsetHeight,s=this.el.parentNode.getBoundingClientRect();t-=s.top,e-=s.left,t-=window.pageYOffset,e-=window.pageXOffset,n.style.top=t+i>a?a-i+"px":t+"px",n.style.left=e+r>o?o-r+"px":e+"px"}},{key:"addEventListeners",value:function(){var t,e=this,n=Z(t=this.trigger).call(t,this);this.el.addEventListener("keyup",this.keyUp),Wh(this.el).on("click","[data-index]",(function(t){t.preventDefault(),t.stopPropagation(),n("selected",{index:+this.getAttribute("data-index")})})),Wh(this.el).on("click","[data-close]",(function(t){t.preventDefault(),t.stopPropagation(),e.destroy()})),Wh(this.el).on("click",".sgn-popover__menu",(function(t){t.stopPropagation()})),window.addEventListener("resize",this.resize,!1),window.addEventListener("scroll",this.scroll,!1)}},{key:"keyUp",value:function(t){27===t.keyCode&&this.destroy()}},{key:"resize",value:function(){this.destroy()}},{key:"scroll",value:function(){this.destroy()}}]),n}(ts);function $h(t,e){var n=t.items,r=null;return 1===n.length?e(n[0]):n.length>1&&(r=new Gh({header:t.header,x:t.x,y:t.y,singleChoiceItems:n}),Z(r).call(r,"selected",(function(t){e(n[t.index]),r.destroy()})),Z(r).call(r,"destroyed",(function(){t.el.focus()})),t.el.appendChild(r.el),r.render().el.focus()),{destroy:function(){var t;null===(t=r)||void 0===t||t.destroy()}}}var Zh=Object.freeze({__proto__:null,on:function(t,e,n,r){return Wh(t).on(e,n,r)},off:function(t,e,n,r){return Wh(t).off(e,n,r)},OfferDetails:qh,Popover:Gh,singleChoicePopover:$h}),Kh=j.setInterval,Jh=kn("slice"),Qh=rn("slice",{ACCESSORS:!0,0:0,1:2}),tf=se("species"),ef=[].slice,nf=Math.max;V({target:"Array",proto:!0,forced:!Jh||!Qh},{slice:function(t,e){var n,r,i,o=v(this),a=rt(o.length),s=at(t,a),l=at(void 0===e?a:e,a);if(Ye(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!Ye(n.prototype)?g(n)&&null===(n=n[tf])&&(n=void 0):n=void 0,n===Array||void 0===n))return ef.call(o,s,l);for(r=new(void 0===n?Array:n)(nf(l-s,0)),i=0;s<l;s++,i++)s in o&&St(r,i,o[s]);return r.length=i,r}});var rf=Y("Array").slice,of=Array.prototype,af=function(t){var e=t.slice;return t===of||t instanceof Array&&e===of.slice?rf:e},sf=af,lf=Object.assign,cf=Object.defineProperty,uf=!lf||i((function(){if(o&&1!==lf({b:1},lf(cf({},"a",{enumerable:!0,get:function(){cf(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=lf({},t)[n]||pt(lf({},e)).join("")!=r}))?function(t,e){for(var n=Kt(t),r=arguments.length,i=1,a=wt.f,s=l.f;r>i;)for(var c,u=p(arguments[i++]),h=a?pt(u).concat(a(u)):pt(u),f=h.length,d=0;f>d;)c=h[d++],o&&!s.call(u,c)||(n[c]=u[c]);return n}:lf;V({target:"Object",stat:!0,forced:Object.assign!==uf},{assign:uf});var hf=j.Object.assign,ff=e((function(t){!function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],o=0;o<4;o++)8*r+6*o<=8*t.length?n.push(e.charAt(i>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|e.indexOf(t.charAt(r))>>>6-2*i);return n}};t.exports=n}()})),pf={utf8:{stringToBytes:function(t){return pf.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(pf.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}},df=pf,vf=function(t){return null!=t&&(gf(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&gf(t.slice(0,0))}(t)||!!t._isBuffer)};function gf(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var yf=e((function(t){!function(){var e=ff,n=df.utf8,r=vf,i=df.bin,o=function(t,a){t.constructor==String?t=a&&"binary"===a.encoding?i.stringToBytes(t):n.stringToBytes(t):r(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var s=e.bytesToWords(t),l=8*t.length,c=1732584193,u=-271733879,h=-1732584194,f=271733878,p=0;p<s.length;p++)s[p]=16711935&(s[p]<<8|s[p]>>>24)|4278255360&(s[p]<<24|s[p]>>>8);s[l>>>5]|=128<<l%32,s[14+(l+64>>>9<<4)]=l;var d=o._ff,v=o._gg,g=o._hh,y=o._ii;for(p=0;p<s.length;p+=16){var m=c,b=u,w=h,_=f;c=d(c,u,h,f,s[p+0],7,-680876936),f=d(f,c,u,h,s[p+1],12,-389564586),h=d(h,f,c,u,s[p+2],17,606105819),u=d(u,h,f,c,s[p+3],22,-1044525330),c=d(c,u,h,f,s[p+4],7,-176418897),f=d(f,c,u,h,s[p+5],12,1200080426),h=d(h,f,c,u,s[p+6],17,-1473231341),u=d(u,h,f,c,s[p+7],22,-45705983),c=d(c,u,h,f,s[p+8],7,1770035416),f=d(f,c,u,h,s[p+9],12,-1958414417),h=d(h,f,c,u,s[p+10],17,-42063),u=d(u,h,f,c,s[p+11],22,-1990404162),c=d(c,u,h,f,s[p+12],7,1804603682),f=d(f,c,u,h,s[p+13],12,-40341101),h=d(h,f,c,u,s[p+14],17,-1502002290),c=v(c,u=d(u,h,f,c,s[p+15],22,1236535329),h,f,s[p+1],5,-165796510),f=v(f,c,u,h,s[p+6],9,-1069501632),h=v(h,f,c,u,s[p+11],14,643717713),u=v(u,h,f,c,s[p+0],20,-373897302),c=v(c,u,h,f,s[p+5],5,-701558691),f=v(f,c,u,h,s[p+10],9,38016083),h=v(h,f,c,u,s[p+15],14,-660478335),u=v(u,h,f,c,s[p+4],20,-405537848),c=v(c,u,h,f,s[p+9],5,568446438),f=v(f,c,u,h,s[p+14],9,-1019803690),h=v(h,f,c,u,s[p+3],14,-187363961),u=v(u,h,f,c,s[p+8],20,1163531501),c=v(c,u,h,f,s[p+13],5,-1444681467),f=v(f,c,u,h,s[p+2],9,-51403784),h=v(h,f,c,u,s[p+7],14,1735328473),c=g(c,u=v(u,h,f,c,s[p+12],20,-1926607734),h,f,s[p+5],4,-378558),f=g(f,c,u,h,s[p+8],11,-2022574463),h=g(h,f,c,u,s[p+11],16,1839030562),u=g(u,h,f,c,s[p+14],23,-35309556),c=g(c,u,h,f,s[p+1],4,-1530992060),f=g(f,c,u,h,s[p+4],11,1272893353),h=g(h,f,c,u,s[p+7],16,-155497632),u=g(u,h,f,c,s[p+10],23,-1094730640),c=g(c,u,h,f,s[p+13],4,681279174),f=g(f,c,u,h,s[p+0],11,-358537222),h=g(h,f,c,u,s[p+3],16,-722521979),u=g(u,h,f,c,s[p+6],23,76029189),c=g(c,u,h,f,s[p+9],4,-640364487),f=g(f,c,u,h,s[p+12],11,-421815835),h=g(h,f,c,u,s[p+15],16,530742520),c=y(c,u=g(u,h,f,c,s[p+2],23,-995338651),h,f,s[p+0],6,-198630844),f=y(f,c,u,h,s[p+7],10,1126891415),h=y(h,f,c,u,s[p+14],15,-1416354905),u=y(u,h,f,c,s[p+5],21,-57434055),c=y(c,u,h,f,s[p+12],6,1700485571),f=y(f,c,u,h,s[p+3],10,-1894986606),h=y(h,f,c,u,s[p+10],15,-1051523),u=y(u,h,f,c,s[p+1],21,-2054922799),c=y(c,u,h,f,s[p+8],6,1873313359),f=y(f,c,u,h,s[p+15],10,-30611744),h=y(h,f,c,u,s[p+6],15,-1560198380),u=y(u,h,f,c,s[p+13],21,1309151649),c=y(c,u,h,f,s[p+4],6,-145523070),f=y(f,c,u,h,s[p+11],10,-1120210379),h=y(h,f,c,u,s[p+2],15,718787259),u=y(u,h,f,c,s[p+9],21,-343485551),c=c+m>>>0,u=u+b>>>0,h=h+w>>>0,f=f+_>>>0}return e.endian([c,u,h,f])};o._ff=function(t,e,n,r,i,o,a){var s=t+(e&n|~e&r)+(i>>>0)+a;return(s<<o|s>>>32-o)+e},o._gg=function(t,e,n,r,i,o,a){var s=t+(e&r|n&~r)+(i>>>0)+a;return(s<<o|s>>>32-o)+e},o._hh=function(t,e,n,r,i,o,a){var s=t+(e^n^r)+(i>>>0)+a;return(s<<o|s>>>32-o)+e},o._ii=function(t,e,n,r,i,o,a){var s=t+(n^(e|~r))+(i>>>0)+a;return(s<<o|s>>>32-o)+e},o._blocksize=16,o._digestsize=16,t.exports=function(t,n){if(null==t)throw new Error("Illegal argument "+t);var r=e.wordsToBytes(o(t,n));return n&&n.asBytes?r:n&&n.asString?i.bytesToString(r):e.bytesToHex(r)}}()})),mf="sgn-",bf=function(){try{var t=window.localStorage;return t["".concat(mf,"test-storage")]="foobar",delete t["".concat(mf,"test-storage")],t}catch(t){return{}}}();function wf(t){try{var e;return JSON.parse(bf[Pa(e="".concat(mf)).call(e,t)])}catch(t){}}function _f(t,e){try{var n;bf[Pa(n="".concat(mf)).call(n,t)]=ks(e)}catch(t){}}var Sf=Object.freeze({__proto__:null,get:wf,set:_f}),xf=function(){var t,e=wf("client-id");return null!==(t=e)&&void 0!==t&&t.data&&(e=e.data),null==e&&_f("client-id",e=ih()),{id:e}};function kf(){var t=wf("event-tracker-pool");return!1===hs(t)&&(t=[]),t=In(t).call(t,(function(t){return"string"==typeof t._i}))}var Ef=kf(),Tf=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var n in Oa(this,t),this.defaultOptions){var r=this.defaultOptions[n];this[n]=e[n]||r}this.client=(null==e?void 0:e.client)||xf(),this.eventsTrackUrl=(null==e?void 0:e.eventsTrackUrl)||es,this.location={geohash:null,time:null,country:null},this.dispatching=!1,this.hasMadeInitialDispatch=!1,this.eventsTrackUrl&&(Of(this.eventsTrackUrl),this.hasMadeInitialDispatch=!0)}return La(t,[{key:"setEventsTrackUrl",value:function(t){this.eventsTrackUrl=t,this.hasMadeInitialDispatch||(Of(this.eventsTrackUrl),this.hasMadeInitialDispatch=!0)}},{key:"trackEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if("number"!=typeof t)throw rh(new Error("Event type is required"));if(null!=this.trackId){var r=hf({},e,{_e:t,_v:n,_i:ih(),_t:Math.round((new Date).getTime()/1e3),_a:this.trackId});for(this.location.geohash&&(r["l.h"]=this.location.geohash),this.location.time&&(r["l.ht"]=this.location.time),this.location.country&&(r["l.c"]=this.location.country),Ef.push(r);Ef.length>this.poolLimit;)Ef.shift();return Of(this.eventsTrackUrl),this}}},{key:"setLocation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var e in t){var n=t[e];Object.prototype.hasOwnProperty.call(this.location,e)&&(this.location[e]=n)}return this}},{key:"trackPagedPublicationOpened",value:function(t,e){return this.trackEvent(1,t,e)}},{key:"trackPagedPublicationPageDisappeared",value:function(t,e){return this.trackEvent(2,t,e)}},{key:"trackOfferOpened",value:function(t,e){return this.trackEvent(3,t,e)}},{key:"trackSearched",value:function(t,e){return this.trackEvent(5,t,e)}},{key:"trackIncitoPublicationOpened",value:function(t,e){return this.trackEvent(11,t,e)}},{key:"createViewToken",value:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=Pa(t=[this.client.id]).call(t,r).join(""),a=ch(String.fromCharCode.apply(null,sf(e=yf(o,{asBytes:!0})).call(e,0,8)));return a}}]),t}();Tf.prototype.defaultOptions={trackId:null,poolLimit:1e3};var Af=!1;var Pf=null;var Of=hh((function(t){if(!0!==Af&&0!==Ef.length){var e=sf(Ef).call(Ef,0,100),n=0;Af=!0,function(){return Es(arguments.length>1?arguments[1]:void 0,{method:"post",timeout:2e4,headers:{"Content-Type":"application/json; charset=utf-8"},body:ks({events:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]})}).then((function(t){return t.json()}))}(e,t).then((function(e){var r;Af=!1,Pf&&(clearInterval(Pf),Pf=null),fn(r=e.events).call(r,(function(t){"validation_error"===t.status||"ack"===t.status?Ef=In(Ef).call(Ef,(function(e){return e._i!==t.id})):n++})),Ef.length>=100&&0===n&&Of(t)})).catch((function(e){Af=!1,Pf||(console.warn("We're gonna keep trying, but there was an error while dispatching events:",e),Pf=Kh((function(){return Of(t)}),2e4))}))}}),4e3);_f("event-tracker-pool",[]);try{window.addEventListener("beforeunload",(function(){_f("event-tracker-pool",Ef=Pa(Ef).call(Ef,kf()))}),!1)}catch(rh){}var If=Object.freeze({__proto__:null,Tracker:Tf}),Cf="[\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff]",Lf=RegExp("^"+Cf+Cf+"*"),jf=RegExp(Cf+Cf+"*$"),Rf=function(t){return function(e){var n=String(Pr(e));return 1&t&&(n=n.replace(Lf,"")),2&t&&(n=n.replace(jf,"")),n}},Df={start:Rf(1),end:Rf(2),trim:Rf(3)},Nf=oo.f,Mf=no.f,zf=Br.f,Ff=Df.trim,Uf="Number",Bf=Cr.Number,Vf=Bf.prototype,Hf=Er(Ii(Vf))==Uf,Wf=function(t){var e,n,r,i,o,a,s,l,c=Fr(t,!1);if("string"==typeof c&&c.length>2)if(43===(e=(c=Ff(c)).charCodeAt(0))||45===e){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(a=(o=c.slice(2)).length,s=0;s<a;s++)if((l=o.charCodeAt(s))<48||l>i)return NaN;return parseInt(o,r)}return+c};if(go(Uf,!Bf(" 0o1")||!Bf("0b1")||Bf("+0x1"))){for(var qf,Xf=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof Xf&&(Hf?xr((function(){Vf.valueOf.call(n)})):Er(n)!=Uf)?Cs(new Bf(Wf(e)),n,Xf):Wf(e)},Yf=Lr?Nf(Bf):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),Gf=0;Yf.length>Gf;Gf++)$r(Bf,qf=Yf[Gf])&&!$r(Xf,qf)&&zf(Xf,qf,Mf(Bf,qf));Xf.prototype=Vf,Vf.constructor=Xf,ro(Cr,Uf,Xf)}V({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var $f=j.Date.now,Zf=function(t){return null==t?0:"number"==typeof t?"".concat(t,"px"):"string"==typeof t?t.replace("dp","px"):0},Kf=function(t){return"string"==typeof t&&t.length>0},Jf=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},Qf=/"/g;mo({target:"String",proto:!0,forced:function(t){return xr((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}("link")},{link:function(t){return e="a",n="href",r=t,i=String(Pr(this)),o="<"+e,""!==n&&(o+=" "+n+'="'+String(r).replace(Qf,"&quot;")+'"'),o+">"+i+"</"+e+">";var e,n,r,i,o}});var tp=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Oa(this,t),this.attrs=e,this.el=this.createElement(),this.setAttributes()}return La(t,[{key:"render",value:function(){return this}},{key:"createElement",value:function(){var t,e=document.createElement(this.tagName),n=null!==(t=this.className)&&void 0!==t?t:"";return e.className="incito__view "+n,e}},{key:"setAttributes",value:function(){var t,e=this;if(Kf(this.attrs.id)&&this.el.setAttribute("data-id",this.attrs.id),Kf(this.attrs.role)&&this.el.setAttribute("data-role",this.attrs.role),Kf(this.attrs.accessibility_label)&&this.el.setAttribute("aria-label",this.attrs.accessibility_label),!0===this.attrs.accessibility_hidden&&this.el.setAttribute("aria-hidden",!0),hs(this.attrs.feature_labels)){var n,r=In(n=this.attrs.feature_labels).call(n,(function(t){return/^[a-z_-]{1,14}$/.test(t)}));r.length&&this.el.setAttribute("data-feature-labels",r.join(","))}Kf(this.attrs.title)&&this.el.setAttribute("title",this.attrs.title),Kf(this.attrs.gravity)&&this.el.setAttribute("data-gravity",this.attrs.gravity),Kf(this.attrs.link)&&(this.el.setAttribute("data-link",""),this.el.addEventListener("click",(function(){window.open(e.attrs.link,"_blank")}),!1)),"match_parent"===this.attrs.layout_width?this.el.style.width="100%":"wrap_content"===this.attrs.layout_width?this.el.style.display="inline-block":null!=this.attrs.layout_width&&(this.el.style.width=Zf(this.attrs.layout_width)),"match_parent"===this.attrs.layout_height?this.el.style.height="100%":"wrap_content"===this.attrs.layout_height?this.el.style.height="auto":null!=this.attrs.layout_height&&(this.el.style.height=Zf(this.attrs.layout_height)),null!=this.attrs.min_width&&(this.el.style.minWidth=Zf(this.attrs.min_width)),null!=this.attrs.max_width&&(this.el.style.maxWidth=Zf(this.attrs.max_width)),null!=this.attrs.min_height&&(this.el.style.minHeight=Zf(this.attrs.min_height)),null!=this.attrs.max_height&&(this.el.style.maxHeight=Zf(this.attrs.max_height)),null!=this.attrs.layout_top&&(this.el.style.top=Zf(this.attrs.layout_top)),null!=this.attrs.layout_left&&(this.el.style.left=Zf(this.attrs.layout_left)),null!=this.attrs.layout_right&&(this.el.style.right=Zf(this.attrs.layout_right)),null!=this.attrs.layout_bottom&&(this.el.style.bottom=Zf(this.attrs.layout_bottom)),Kf(this.attrs.background_color)&&(this.el.style.backgroundColor=this.attrs.background_color),Kf(this.attrs.background_image)&&(this.el.setAttribute("data-src",this.attrs.background_image),this.lazyload=!0),-1!==th(t=["repeat_x","repeat_y","repeat"]).call(t,this.attrs.background_tile_mode)&&(this.el.style.backgroundRepeat=this.attrs.background_tile_mode.replace("_","-")),Kf(this.attrs.background_image_position)&&(this.el.style.backgroundPosition=this.attrs.background_image_position.replace("_"," ")),"center_crop"===this.attrs.background_image_scale_type?this.el.style.backgroundSize="cover":"center_inside"===this.attrs.background_image_scale_type&&(this.el.style.backgroundSize="contain"),null!=this.attrs.layout_margin&&(this.el.style.margin=Zf(this.attrs.layout_margin)),null!=this.attrs.layout_margin_top&&(this.el.style.marginTop=Zf(this.attrs.layout_margin_top)),null!=this.attrs.layout_margin_left&&(this.el.style.marginLeft=Zf(this.attrs.layout_margin_left)),null!=this.attrs.layout_margin_right&&(this.el.style.marginRight=Zf(this.attrs.layout_margin_right)),null!=this.attrs.layout_margin_bottom&&(this.el.style.marginBottom=Zf(this.attrs.layout_margin_bottom)),null!=this.attrs.padding&&(this.el.style.padding=Zf(this.attrs.padding)),null!=this.attrs.padding_top&&(this.el.style.paddingTop=Zf(this.attrs.padding_top)),null!=this.attrs.padding_left&&(this.el.style.paddingLeft=Zf(this.attrs.padding_left)),null!=this.attrs.padding_right&&(this.el.style.paddingRight=Zf(this.attrs.padding_right)),null!=this.attrs.padding_bottom&&(this.el.style.paddingBottom=Zf(this.attrs.padding_bottom)),null!=this.attrs.corner_radius&&(this.el.style.borderRadius=Zf(this.attrs.corner_radius)),null!=this.attrs.corner_top_left_radius&&(this.el.style.borderTopLeftRadius=Zf(this.attrs.corner_top_left_radius)),null!=this.attrs.corner_top_right_radius&&(this.el.style.borderTopRightRadius=Zf(this.attrs.corner_top_right_radius)),null!=this.attrs.corner_bottom_left_radius&&(this.el.style.borderBottomLeftRadius=Zf(this.attrs.corner_bottom_left_radius)),null!=this.attrs.corner_bottom_right_radius&&(this.el.style.borderBottomRightRadius=Zf(this.attrs.corner_bottom_right_radius)),!1===this.attrs.clip_children&&(this.el.style.overflow="visible");var i,o,a,s=this.getShadow();null!=s&&(this.el.style.boxShadow=Pa(i=Pa(o=Pa(a="".concat(s.dx,"px ")).call(a,s.dy,"px ")).call(o,s.radius,"px ")).call(i,s.color));var l=["solid","dotted","dashed"];null!=this.attrs.stroke_width&&(this.el.style.borderWidth=Zf(this.attrs.stroke_width)),null!=this.attrs.stroke_color&&(this.el.style.borderColor=this.attrs.stroke_color),-1!==th(l).call(l,this.attrs.stroke_style)&&(this.el.style.borderStyle=this.attrs.stroke_style),null!=this.attrs.stroke_top_width&&(this.el.style.borderTopWidth=Zf(this.attrs.stroke_top_width)),null!=this.attrs.stroke_top_color&&(this.el.style.borderTopColor=this.attrs.stroke_top_color),null!=this.attrs.stroke_left_width&&(this.el.style.borderLeftWidth=Zf(this.attrs.stroke_left_width)),null!=this.attrs.stroke_left_color&&(this.el.style.borderLeftColor=this.attrs.stroke_left_color),null!=this.attrs.stroke_right_width&&(this.el.style.borderRightWidth=Zf(this.attrs.stroke_right_width)),null!=this.attrs.stroke_right_color&&(this.el.style.borderRightColor=this.attrs.stroke_right_color),null!=this.attrs.stroke_bottom_width&&(this.el.style.borderBottomWidth=Zf(this.attrs.stroke_bottom_width)),null!=this.attrs.stroke_bottom_color&&(this.el.style.borderBottomColor=this.attrs.stroke_bottom_color),"number"==typeof this.attrs.layout_flex_shrink&&(this.el.style.flexShrink=this.attrs.layout_flex_shrink,this.el.style.msFlexShrink=this.attrs.layout_flex_shrink),"number"==typeof this.attrs.layout_flex_grow&&(this.el.style.flexGrow=this.attrs.layout_flex_grow,this.el.style.msFlexGrow=this.attrs.layout_flex_grow),null!=this.attrs.layout_flex_basis&&(this.el.style.flexBasis=Zf(this.attrs.layout_flex_basis),this.el.style.msFlexBasis=Zf(this.attrs.layout_flex_basis));var c=this.getTransforms();c.length>0&&(this.el.style.transform=c.join(" ")),hs(this.attrs.transform_origin)&&2===this.attrs.transform_origin.length&&(this.el.style.transformOrigin=[Zf(this.attrs.transform_origin[0]),Zf(this.attrs.transform_origin[1])].join(" "))}},{key:"getTransforms",value:function(){var t=[],e=Zf(this.attrs.transform_translate_x),n=Zf(this.attrs.transform_translate_y);return 0!==e&&t.push("translateX(".concat(e,")")),0!==n&&t.push("translateY(".concat(n,")")),"number"==typeof this.attrs.transform_rotate&&0!==this.attrs.transform_rotate&&t.push("rotate(".concat(this.attrs.transform_rotate,"deg)")),"number"==typeof this.attrs.transform_scale&&1!==this.attrs.transform_scale&&t.push("scale(".concat(this.attrs.transform_scale,")")),t}},{key:"getShadow",value:function(){if(Kf(this.attrs.shadow_color))return{dx:"number"==typeof this.attrs.shadow_dx?this.attrs.shadow_dx:0,dy:"number"==typeof this.attrs.shadow_dy?this.attrs.shadow_dy:0,radius:"number"==typeof this.attrs.shadow_radius?this.attrs.shadow_radius:0,color:this.attrs.shadow_color}}}]),t}();function ep(t){var e=function(){if("undefined"==typeof Reflect||!Sr)return!1;if(Sr.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Sr(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ja(t);if(e){var i=Ja(this).constructor;n=Sr(r,arguments,i)}else n=r.apply(this,arguments);return $a(this,n)}}tp.prototype.tagName="div",tp.prototype.className=null;var np=function(t){Fa(n,t);var e=ep(n);function n(){return Oa(this,n),e.apply(this,arguments)}return n}(tp);function rp(t){var e=function(){if("undefined"==typeof Reflect||!Sr)return!1;if(Sr.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Sr(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ja(t);if(e){var i=Ja(this).constructor;n=Sr(r,arguments,i)}else n=r.apply(this,arguments);return $a(this,n)}}np.prototype.className="incito__absolute-layout-view";var ip=["stretch","center","flex-start","flex-end","baseline"],op=["flex-start","flex-end","center","space-between","space-around"],ap=["row","column"],sp=function(t){Fa(n,t);var e=rp(n);function n(){return Oa(this,n),e.apply(this,arguments)}return La(n,[{key:"render",value:function(){return-1!==th(ip).call(ip,this.attrs.layout_flex_align_items)&&(this.el.style.alignItems=this.attrs.layout_flex_align_items,this.el.style.msAlignItems=this.attrs.layout_flex_align_items),-1!==th(op).call(op,this.attrs.layout_flex_justify_content)&&(this.el.style.justifyContent=this.attrs.layout_flex_justify_content,this.el.style.msFlexPack=this.attrs.layout_flex_justify_content),-1!==th(ap).call(ap,this.attrs.layout_flex_direction)&&(this.el.style.flexDirection=this.attrs.layout_flex_direction,this.el.style.msFlexDirection=this.attrs.layout_flex_direction),this}}]),n}(tp);function lp(t){var e=function(){if("undefined"==typeof Reflect||!Sr)return!1;if(Sr.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Sr(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ja(t);if(e){var i=Ja(this).constructor;n=Sr(r,arguments,i)}else n=r.apply(this,arguments);return $a(this,n)}}sp.prototype.className="incito__flex-layout-view";var cp=function(t){Fa(n,t);var e=lp(n);function n(){return Oa(this,n),e.apply(this,arguments)}return La(n,[{key:"render",value:function(){return Kf(this.attrs.src)&&this.el.setAttribute("data-src",this.attrs.src),Kf(this.attrs.label)?this.el.setAttribute("alt",this.attrs.label):this.el.setAttribute("alt",""),this}}]),n}(tp);function up(t){var e=function(){if("undefined"==typeof Reflect||!Sr)return!1;if(Sr.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Sr(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ja(t);if(e){var i=Ja(this).constructor;n=Sr(r,arguments,i)}else n=r.apply(this,arguments);return $a(this,n)}}cp.prototype.tagName="img",cp.prototype.className="incito__image-view",cp.prototype.lazyload=!0;var hp=function(t){Fa(n,t);var e=up(n);function n(){return Oa(this,n),e.apply(this,arguments)}return La(n,[{key:"render",value:function(){if(!Kf(this.attrs.text))return this;var t=(this.attrs.text_style||"").split("|"),e=this.attrs.text;if(hs(this.attrs.spans)&&this.attrs.spans.length>0){var n=this.parseSpans(e,this.attrs.spans);e=(e=ys(n).call(n,(function(t){var e,n,r,i=Jf(t.text||"");if("link"===(null===(e=t.span)||void 0===e?void 0:e.name)&&null!=t.span.url)return Pa(r='<a href="'.concat(encodeURI(t.span.url),'" rel="external" target="_blank">')).call(r,i,"</a>");if(null!=(null===(n=t.span)||void 0===n?void 0:n.name)){var o,a=t.span.name;return Pa(o='<span data-name="'.concat(a,'">')).call(o,i,"</span>")}return i}))).join("")}else e=Jf(e);this.attrs.text_prevent_widow&&(e=e.replace(/&nbsp;([^\s]+)$/," $1").replace(/\s([^\s]+)\s*$/,"&nbsp;$1")),this.el.innerHTML=e.replace(/\n/g,"<br>"),hs(this.attrs.font_family)&&this.attrs.font_family.length>0?this.el.style.fontFamily="".concat(this.attrs.font_family.join(", ")," !important"):this.el.style.fontFamily="inherit !important",null!=this.attrs.text_size&&(this.el.style.fontSize="".concat(this.attrs.text_size,"px")),null!=this.attrs.line_spacing_multiplier&&(this.el.style.lineHeight=this.attrs.line_spacing_multiplier),null!=this.attrs.text_color&&(this.el.style.color=this.attrs.text_color),-1!==th(t).call(t,"bold")&&(this.el.style.fontWeight="bold"),-1!==th(t).call(t,"italic")&&(this.el.style.fontStyle="italic"),hs(this.attrs.text_decoration_line)&&(this.el.style.textDecorationLine=this.attrs.text_decoration_line.join(" "));var r=this.getTextShadow();if(Kf(this.attrs.text_shadow))this.el.style.textShadow=this.attrs.text_shadow;else if(null!=r){var i,o,a;this.el.style.textShadow=Pa(i=Pa(o=Pa(a="".concat(r.dx,"px ")).call(a,r.dy,"px ")).call(o,r.radius,"px ")).call(i,r.color)}return"left"===this.attrs.text_alignment?this.el.style.textAlign="left":"center"===this.attrs.text_alignment?this.el.style.textAlign="center":"right"===this.attrs.text_alignment&&(this.el.style.textAlign="right"),!0===this.attrs.single_line||1===this.attrs.max_lines?this.el.setAttribute("data-single-line",!0):"number"==typeof this.attrs.max_lines&&(this.el.style.display="-webkit-box",this.el.style.webkitLineClamp=this.attrs.max_lines,this.el.style.webkitBoxOrient="vertical"),!0===this.attrs.text_all_caps&&(this.el.style.textTransform="uppercase"),this}},{key:"parseSpans",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return 0===e.length?n.push({text:t}):e[0].start>0&&n.push({text:sf(t).call(t,0,e[0].start)}),fn(e).call(e,(function(r,i){var o=r.start,a=r.end;n.push({text:sf(t).call(t,o,a),span:r}),i===e.length-1?a<t.length&&n.push({text:sf(t).call(t,a,t.length)}):a<e[i+1].start&&n.push({text:sf(t).call(t,a,e[i+1].start)})})),n}},{key:"getTextShadow",value:function(){if(Kf(this.attrs.text_shadow_color))return{dx:"number"==typeof this.attrs.text_shadow_dx?this.attrs.text_shadow_dx:0,dy:"number"==typeof this.attrs.text_shadow_dy?this.attrs.text_shadow_dy:0,radius:"number"==typeof this.attrs.text_shadow_radius?this.attrs.text_shadow_radius:0,color:this.attrs.text_shadow_color}}}]),n}(tp);function fp(t){var e=function(){if("undefined"==typeof Reflect||!Sr)return!1;if(Sr.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Sr(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ja(t);if(e){var i=Ja(this).constructor;n=Sr(r,arguments,i)}else n=r.apply(this,arguments);return $a(this,n)}}hp.prototype.tagName="p",hp.prototype.className="incito__text-view";var pp=function(t){Fa(n,t);var e=fp(n);function n(){return Oa(this,n),e.apply(this,arguments)}return La(n,[{key:"render",value:function(){return Kf(this.attrs.src)?(this.el.muted=!0,this.el.preload="metadata",this.el.setAttribute("muted",""),this.el.setAttribute("playsinline","true"),this.el.setAttribute("webkit-playsinline","true"),this.el.setAttribute("data-src",this.attrs.src),this.el.setAttribute("data-mime",this.attrs.mime),!0===this.attrs.autoplay&&(this.el.autoplay=!0),!0===this.attrs.loop&&(this.el.loop=!0),!0===this.attrs.controls&&(this.el.controls=!0),this):this}}]),n}(tp);pp.prototype.className="incito__video-view",pp.prototype.tagName="video",pp.prototype.lazyload=!0;var dp=Je.find,vp="find",gp=!0,yp=rn(vp);vp in[]&&Array(1).find((function(){gp=!1})),V({target:"Array",proto:!0,forced:gp||!yp},{find:function(t){return dp(this,t,arguments.length>1?arguments[1]:void 0)}});var mp=Y("Array").find,bp=Array.prototype,wp=function(t){var e=t.find;return t===bp||t instanceof Array&&e===bp.find?mp:e};function _p(t){var e=function(){if("undefined"==typeof Reflect||!Sr)return!1;if(Sr.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Sr(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ja(t);if(e){var i=Ja(this).constructor;n=Sr(r,arguments,i)}else n=r.apply(this,arguments);return $a(this,n)}}var Sp=[".youtube.com",".vimeo.com",".twentythree.net"],xp=function(t){Fa(n,t);var e=_p(n);function n(){return Oa(this,n),e.apply(this,arguments)}return La(n,[{key:"render",value:function(){if(!Kf(this.attrs.src))return this;var t=this.attrs.src,e=document.createElement("a");return e.setAttribute("href",t),wp(Sp).call(Sp,(function(t){var n;return sf(n=e.hostname).call(n,-t.length)===t}))&&(this.el.setAttribute("data-src",t),this.lazyload=!0),this}}]),n}(tp);xp.prototype.className="incito__video-embed-view",xp.prototype.lazyload=!1;var kp,Ep=Object.freeze({__proto__:null,AbsoluteLayout:np,FlexLayout:sp,ImageView:cp,TextView:hp,VideoView:pp,VideoEmbedView:xp,View:tp});if("undefined"!=typeof window&&"function"==typeof window.requestIdleCallback){var Tp=window;kp=Tp.requestIdleCallback}else kp=function(t){return yu((function(){var e=$f();return t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-($f()-e))}})}),1)};var Ap=function(){function t(e,n){var r,i=n.incito,o=void 0===i?{}:i,a=n.renderLaziness,s=void 0===a?1:a;Oa(this,t),this.containerEl=e,this.incito=o,this.renderLaziness=s,this.el=document.createElement("div"),this.ids={},this.views=Pp([],this.incito.root_view),this.viewsLength=this.views.length,this.viewIndex=0,this.lazyloadables=[],this.lazyloader=function(t,e){if(0===e)return t;var n=!1;return function(){if(!n)return n=!0,yu((function(){n=!1,t.apply(void 0,arguments)}),e)}}(Z(r=this.lazyload).call(r,this),150),this.renderedOutsideOfViewport=!1,this._events={}}return La(t,[{key:"bind",value:function(t,e){return this._events[t]=this._events[t]||[],this._events[t].push(e)}},{key:"unbind",value:function(t,e){var n,r;if(this._events[t])return Tu(n=this._events[t]).call(n,th(r=this._events[t]).call(r,e),1)}},{key:"trigger",value:function(t){var e;if(this._events[t])return ys(e=this._events[t]).call(e,(function(t){return t.apply(this,sf(Array.prototype).call(arguments,1))}))}},{key:"start",value:function(){var t=this,e=!1,n=function n(r){t.render(r),t.viewIndex<=t.viewsLength-1?t.renderCallbackHandle=kp(n):(t.renderedOutsideOfViewport=!0,t.trigger("allRendered")),t.renderedOutsideOfViewport&&!e&&(t.trigger("visibleRendered"),e=!0),t.renderedOutsideOfViewport&&t.lazyload(0)};return this.el.className="incito",null!=this.incito.locale&&this.el.setAttribute("lang",this.incito.locale),Op(this.incito.font_assets),this.applyTheme(this.incito.theme),this.containerEl.appendChild(this.el),2===this.renderLaziness?this.renderCallbackHandle=kp(n):n({timeRemaining:function(){return Number.MAX_VALUE},didTimeout:!1}),document.addEventListener("scroll",this.lazyloader,!0),window.addEventListener("resize",this.lazyloader,!1),this}},{key:"destroy",value:function(){cancelIdleCallback(this.renderCallbackHandle),this.containerEl.removeChild(this.el),document.removeEventListener("scroll",this.lazyloader,!0),window.removeEventListener("resize",this.lazyloader,!1),this.trigger("destroyed")}},{key:"render",value:function(t){for(;t.timeRemaining()>0&&this.viewIndex<=this.viewsLength-1;){var e,n,r=this.views[this.viewIndex],i=r.attrs,o=new(null!==(e=Ep[i.view_name])&&void 0!==e?e:tp)(i).render();if(null!=i.id&&"object"==typeof i.meta&&(this.ids[i.id]=i.meta),!0===o.lazyload&&this.lazyloadables.push(o.el),r.view=o,null!=(null===(n=r.parent)||void 0===n?void 0:n.view)?r.parent.view.el.appendChild(o.el):this.el.appendChild(o.el),this.viewIndex++,this.renderLaziness&&!(this.viewIndex%20)&&!this.renderedOutsideOfViewport&&!Ip(o.el)){this.renderedOutsideOfViewport=!0;break}}}},{key:"applyTheme",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};hs(t.font_family)&&(this.el.style.fontFamily=t.font_family.join(", ")),Kf(t.background_color)&&(this.el.style.backgroundColor=t.background_color),Kf(t.text_color)&&(this.el.style.color=t.text_color),"number"==typeof t.line_spacing_multiplier&&(this.el.style.lineHeight=t.line_spacing_multiplier)}},{key:"lazyload",value:function(t){var e;this.lazyloadables=In(e=this.lazyloadables).call(e,(function(e){return!Ip(e,t)||(Cp(e),!1)}))}}]),t}(),Pp=function t(e,n,r){var i,o={attrs:n,view:null,parent:r};(e.push(o),hs(n.child_views))&&fn(i=n.child_views).call(i,(function(n){return t(e,n,o)}));return e},Op=function(){var t,e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("FontFace"in window)for(t in r){var i,o,a;n=r[t],e=ys(i=n.src).call(i,(function(t){return"url(".concat(t[1],")")})).join(", ");var s=new FontFace(t,e,{style:null!==(o=n.style)&&void 0!==o?o:"normal",weight:null!==(a=n.weight)&&void 0!==a?a:"normal",display:"swap"});document.fonts.add(s),s.load()}else{var l=document.createElement("style");for(t in r){var c,u;n=r[t],e=ys(c=n.src).call(c,(function(t){var e;return Pa(e="url('".concat(t[1],"') format('")).call(e,t[0],"')")})).join(", ");var h=Pa(u="@font-face {\n    font-family: '".concat(t,"';\n    font-display: swap;\n    src: ")).call(u,e,";\n}");l.appendChild(document.createTextNode(h))}document.head.appendChild(l)}},Ip=function(t,e){var n,r=window.innerHeight;e=null!==(n=e)&&void 0!==n?n:r;var i=t.getBoundingClientRect();return i.top<=r+e&&i.top+i.height>=-e},Cp=function(t){var e=t.getAttribute("data-src");if("img"===t.tagName.toLowerCase())t.addEventListener("load",(function(){t.className+=" incito--loaded"})),t.setAttribute("src",e);else if("video"===t.tagName.toLowerCase()){var n=document.createElement("source");n.setAttribute("src",e),n.setAttribute("type",t.getAttribute("data-mime")),t.appendChild(n)}else if(/incito__video-embed-view/gi.test(t.className)){var r=document.createElement("iframe");r.setAttribute("allow","fullscreen; accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"),r.setAttribute("src",e),t.appendChild(r)}else t.style.backgroundImage="url(".concat(e,")")};function Lp(t){var e=function(){if("undefined"==typeof Reflect||!Sr)return!1;if(Sr.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Sr(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ja(t);if(e){var i=Ja(this).constructor;n=Sr(r,arguments,i)}else n=r.apply(this,arguments);return $a(this,n)}}var jp=function(t){Fa(n,t);var e=Lp(n);function n(t,r){var i;return Oa(this,n),(i=e.call(this)).eventTracker=t,i.details=r,i}return La(n,[{key:"trackOpened",value:function(){var t;return null==this.eventTracker||null==this.details||this.eventTracker.trackIncitoPublicationOpened({"ip.paged":th(t=this.details.types).call(t,"paged")>-1,"ip.id":this.details.id,vt:this.eventTracker.createViewToken(this.details.id)}),this}}]),n}(ts);function Rp(t){var e=function(){if("undefined"==typeof Reflect||!Sr)return!1;if(Sr.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Sr(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ja(t);if(e){var i=Ja(this).constructor;n=Sr(r,arguments,i)}else n=r.apply(this,arguments);return $a(this,n)}}var Dp=function(t){Fa(n,t);var e=Rp(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Oa(this,n),(r=e.call(this)).el=t,r.options=i,r.incito=new Ap(r.el,{incito:r.options.incito,renderLaziness:r.options.renderLaziness}),r._eventTracking=new jp(r.options.eventTracker,r.options.details),r}return La(n,[{key:"start",value:function(){return this.incito.start(),this.el.classList.add("sgn-incito--started"),this._eventTracking.trackOpened(),this}},{key:"destroy",value:function(){this.incito.destroy()}}]),n}(ts);Qa(Dp,"Incito",Ap);var Np=function(t){var e=Rl(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return N(e.call(t))},Mp=Rl,zp=Xa,Fp=function(t,e,n,r){try{return r?e(N(n)[0],n[1]):e(n)}catch(e){throw Dl(t),e}},Up=!Gl((function(t){Array.from(t)}));V({target:"Array",stat:!0,forced:Up},{from:function(t){var e,n,r,i,o,a,s=Kt(t),l="function"==typeof this?this:Array,c=arguments.length,u=c>1?arguments[1]:void 0,h=void 0!==u,f=Rl(s),p=0;if(h&&(u=D(u,c>2?arguments[2]:void 0,2)),null==f||l==Array&&Ll(f))for(n=new l(e=rt(s.length));e>p;p++)a=h?u(s[p],p):s[p],St(n,p,a);else for(o=(i=f.call(s)).next,n=new l;!(r=o.call(i)).done;p++)a=h?Fp(i,u,[r.value,p],!0):r.value,St(n,p,a);return n.length=p,n}});var Bp=j.Array.from,Vp=Bp,Hp=l.f,Wp=function(t){return function(e){for(var n,r=v(e),i=pt(r),a=i.length,s=0,l=[];a>s;)n=i[s++],o&&!Hp.call(r,n)||l.push(t?[n,r[n]]:r[n]);return l}},qp={entries:Wp(!0),values:Wp(!1)},Xp=qp.values;V({target:"Object",stat:!0},{values:function(t){return Xp(t)}});var Yp=j.Object.values,Gp=function(t){return function(e,n,r,i){R(n);var o=Kt(e),a=p(o),s=rt(o.length),l=t?s-1:0,c=t?-1:1;if(r<2)for(;;){if(l in a){i=a[l],l+=c;break}if(l+=c,t?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;t?l>=0:s>l;l+=c)l in a&&(i=n(i,a[l],l,o));return i}},$p={left:Gp(!1),right:Gp(!0)}.left,Zp=Qe("reduce"),Kp=rn("reduce",{1:0});V({target:"Array",proto:!0,forced:!Zp||!Kp||!Jl&&Sn>79&&Sn<83},{reduce:function(t){return $p(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Jp=Y("Array").reduce,Qp=Array.prototype,td=function(t){var e=t.reduce;return t===Qp||t instanceof Array&&e===Qp.reduce?Jp:e},ed=function(){function t(e){var n,r,i=this;(Oa(this,t),this.scroll=Z(n=this.scroll).call(n,this),this.viewer=e,this.progressEl=this.viewer.el.querySelector(".sgn-incito__progress"),this.isScrolling=!1,this.progressEl)&&(this.progressEl.textContent="0 %",window.addEventListener("scroll",this.scroll,!1),Z(r=this.viewer).call(r,"destroyed",(function(){window.removeEventListener("scroll",i.scroll,!1)})))}return La(t,[{key:"scroll",value:function(){var t=this,e=window.innerHeight,n=this.viewer.el.getBoundingClientRect(),r=Math.min(100,Math.round(Math.abs(n.top-e)/n.height*100));clearTimeout(this.scrollTimeout),this.scrollTimeout=yu((function(){t.isScrolling=!1,t.viewer.el.classList.remove("sgn-incito--scrolling")}),1e3),!1===this.isScrolling&&(this.viewer.el.classList.add("sgn-incito--scrolling"),this.isScrolling=!0),this.progressEl.textContent="".concat(r," %"),this.viewer.trigger("progress",{progress:r})}}]),t}();function nd(t,e){var n;if(void 0===zp||null==Mp(t)){if(hs(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return rd(t,e);var r=sf(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Vp(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rd(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=Np(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function rd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var id=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Oa(this,t),this.fetchDetails=Z(e=this.fetchDetails).call(e,this),this.options=n,this.deviceCategory=this.getDeviceCategory(),this.pixelRatio=this.getPixelRatio(),this.pointer=this.getPointer(),this.orientation=this.getOrientation(),this.time=this.getTime(),this.locale=this.getLocale(),this.maxWidth=this.getMaxWidth(),this.featureLabels=this.getFeatureLabels(),this.versionsSupported=["1.0.0"]}return La(t,[{key:"getDeviceCategory",value:function(){return oh()}},{key:"getPixelRatio",value:function(){return window.devicePixelRatio||1}},{key:"getPointer",value:function(){return ah()}},{key:"getOrientation",value:function(){var t=sh(screen.width,screen.height);return"quadratic"===t&&(t="horizontal"),t}},{key:"getTime",value:function(){return(new Date).toISOString()}},{key:"getLocale",value:function(){var t=[],e=null;hs(navigator.languages)&&navigator.languages.length>0?t=Pa(t).call(t,navigator.languages):"string"==typeof navigator.language&&navigator.language.length>0?t.push(navigator.language):"string"==typeof navigator.browserLanguage&&navigator.browserLanguage.length>0&&t.push(navigator.browserLanguage),t.push("en_US");var n,r=nd(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(null!=i&&(i=i.replace("-","_"),/[a-z][a-z]_[A-Z][A-Z]/g.test(i))){e=i;break}}}catch(t){r.e(t)}finally{r.f()}return e}},{key:"getMaxWidth",value:function(){return 90===Math.abs(window.orientation)?Math.min(this.options.el.offsetWidth,screen.width):this.options.el.offsetWidth}},{key:"getFeatureLabels",value:function(){var t=wf("incito-feature-labels");return!1===hs(t)&&(t=[]),t}},{key:"anonymizeFeatureLabels",value:function(){var t,e,n=this.featureLabels.length,r=td(t=this.featureLabels).call(t,(function(t,e){return t[e]||(t[e]={key:e,value:0}),t[e].value++,t}),{});return ys(e=Yp(r)).call(e,(function(t){return{key:t.key,value:Math.round(t.value/n*100)/100}}))}},{key:"fetch",value:function(t){var e=this;this.fetchDetails(this.options.id,(function(n,r){if(null!=n)return t(n);e.fetchIncito(r.incito_publication_id,(function(e,n){if(null!=e)return t(e);t(null,{details:r,incito:n})}))}))}},{key:"fetchDetails",value:function(t,e){Vh({url:"/v2/catalogs/".concat(this.options.id)},e)}},{key:"fetchIncito",value:function(t,e){Es(Dm.config.get("coreUrl")+"/v4/rpc/generate_incito_from_publication",{method:"post",headers:{"X-Api-Key":Dm.config.get("appKey"),"Content-Type":"application/json",Accept:"application/json"},body:ks({id:t,device_category:this.deviceCategory,pointer:this.pointer,orientation:this.orientation,pixel_ratio:this.pixelRatio,max_width:this.maxWidth,versions_supported:this.versionsSupported,locale_code:this.locale,time:this.time,feature_labels:this.anonymizeFeatureLabels(this.featureLabels)})}).then((function(t){return t.json()})).then((function(t){return e(null,t)})).catch((function(t){return e(t)}))}},{key:"createViewer",value:function(t){if(null==t.incito)throw rh(new Error,"You need to supply valid Incito to create a viewer");var e=new Dp(this.options.el,{id:this.options.id,details:t.details,incito:t.incito,eventTracker:this.options.eventTracker});new ed(e);var n=this;return Wh(e.el).on("click",".incito__view[data-feature-labels]",(function(){var t,e=this.getAttribute("data-feature-labels").split(",");for(n.featureLabels=Pa(t=n.featureLabels).call(t,e);n.featureLabels.length>1e3;)n.featureLabels.shift();_f("incito-feature-labels",n.featureLabels)})),e}}]),t}(),od=Object.freeze({__proto__:null,Viewer:Dp,Bootstrapper:id}),ad={"paged_publication.hotspot_picker.header":"Which offer did you mean?","incito_publication.product_picker.header":"Which product?"};function sd(t,e){var n,r=null!==(n=ad[t])&&void 0!==n?n:"";return Xh.render(r,e)}var ld=Object.freeze({__proto__:null,t:sd,update:function(t){for(var e in t){var n=t[e];ad[e]=n}}});function cd(t){var e=function(){if("undefined"==typeof Reflect||!Sr)return!1;if(Sr.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Sr(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ja(t);if(e){var i=Ja(this).constructor;n=Sr(r,arguments,i)}else n=r.apply(this,arguments);return $a(this,n)}}var ud=function(t){Fa(n,t);var e=cd(n);function n(t){var r,i,o,a,s,l,c,u,h,f,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Oa(this,n),(f=e.call(this)).destroy=Z(r=f.destroy).call(r,ja(f)),f.beforeNavigation=Z(i=f.beforeNavigation).call(i,ja(f)),f.prevClicked=Z(o=f.prevClicked).call(o,ja(f)),f.nextClicked=Z(a=f.nextClicked).call(a,ja(f)),f.closeClicked=Z(s=f.closeClicked).call(s,ja(f)),f.keyDown=Z(l=f.keyDown).call(l,ja(f)),f.options=p,f.els={root:t,progress:t.querySelector(".sgn-pp__progress"),progressBar:t.querySelector(".sgn-pp-progress__bar"),progressLabel:t.querySelector(".sgn-pp__progress-label"),prevControl:t.querySelector(".sgn-pp__control[data-direction=prev]"),nextControl:t.querySelector(".sgn-pp__control[data-direction=next]"),close:t.querySelector(".sgn-pp--close")},f.keyDownHandler=hh(f.keyDown,150,ja(f)),!0===f.options.keyboard&&f.els.root.addEventListener("keydown",f.keyDownHandler,!1),null===(c=f.els.prevControl)||void 0===c||c.addEventListener("mousedown",f.prevClicked,!1),null===(u=f.els.nextControl)||void 0===u||u.addEventListener("mousedown",f.nextClicked,!1),null===(h=f.els.close)||void 0===h||h.addEventListener("mousedown",f.closeClicked,!1),Z(f).call(f,"beforeNavigation",f.beforeNavigation),Z(f).call(f,"destroyed",f.destroy),f}return La(n,[{key:"destroy",value:function(){var t,e,n;!0===this.options.keyboard&&this.els.root.removeEventListener("keydown",this.keyDownHandler,!1),null===(t=this.els.prevControl)||void 0===t||t.removeEventListener("mousedown",this.prevClicked,!1),null===(e=this.els.nextControl)||void 0===e||e.removeEventListener("mousedown",this.nextClicked,!1),null===(n=this.els.close)||void 0===n||n.removeEventListener("mousedown",this.closeClicked,!1)}},{key:"beforeNavigation",value:function(t){var e="string"==typeof t.progressLabel&&t.progressLabel.length>0,n="sgn-pp--hidden";this.els.progress&&this.els.progressBar&&(this.els.progressBar.style.width="".concat(t.progress,"%"),!0===e?this.els.progress.classList.remove(n):this.els.progress.classList.add(n)),this.els.progressLabel&&(!0===e?(this.els.progressLabel.textContent=t.progressLabel,this.els.progressLabel.classList.remove(n)):this.els.progressLabel.classList.add(n)),this.els.prevControl&&(0===t.verso.newPosition?this.els.prevControl.classList.add(n):this.els.prevControl.classList.remove(n)),this.els.nextControl&&(t.verso.newPosition===t.pageSpreadCount-1?this.els.nextControl.classList.add(n):this.els.nextControl.classList.remove(n))}},{key:"prevClicked",value:function(t){t.preventDefault(),this.trigger("prev")}},{key:"nextClicked",value:function(t){t.preventDefault(),this.trigger("next")}},{key:"closeClicked",value:function(t){t.preventDefault(),this.trigger("close")}},{key:"keyDown",value:function(t){var e=t.keyCode;37===e?this.trigger("prev",{duration:0}):39===e||32===e?this.trigger("next",{duration:0}):49===e&&this.trigger("first",{duration:0})}}]),n}(ts),hd=function(){function t(e){Oa(this,t),Qa(this,"run",0),this.el=e}return La(t,[{key:"animate",value:function(){var t,e,n,r,i,o,a,s=this,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},u=null!==(t=l.x)&&void 0!==t?t:0,h=null!==(e=l.y)&&void 0!==e?e:0,f=null!==(n=l.scale)&&void 0!==n?n:1,p=null!==(r=l.easing)&&void 0!==r?r:"ease-out",d=null!==(i=l.duration)&&void 0!==i?i:0,v=++this.run,g=Pa(o=Pa(a="translateX(".concat(u,") translateY(")).call(a,h,") scale(")).call(o,f,")");if(this.el.style.transform===g)c();else if(d>0){var y,m=function t(){v===s.run&&(s.el.removeEventListener("transitionend",t),s.el.style.transition="none",c())};this.el.addEventListener("transitionend",m,!1),this.el.style.transition=Pa(y="transform ".concat(p," ")).call(y,d,"ms"),this.el.style.transform=g}else this.el.style.transition="none",this.el.style.transform=g,c();return this}}]),t}(),fd=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Oa(this,t),Qa(this,"visibility","gone"),Qa(this,"positioned",!1),Qa(this,"active",!1),this.el=e,this.options=n,this.id=this.options.id,this.type=this.options.type,this.pageIds=this.options.pageIds,this.width=this.options.width,this.left=this.options.left,this.maxZoomScale=this.options.maxZoomScale}return La(t,[{key:"isZoomable",value:function(){return this.getMaxZoomScale()>1&&"false"!==this.getEl().getAttribute("data-zoomable")}},{key:"isScrollable",value:function(){return this.getEl().classList.contains("verso--scrollable")}},{key:"getEl",value:function(){return this.el}},{key:"getOverlayEls",value:function(){return this.getEl().querySelectorAll(".verso__overlay")}},{key:"getPageEls",value:function(){return this.getEl().querySelectorAll(".verso__page")}},{key:"getRect",value:function(){return this.getEl().getBoundingClientRect()}},{key:"getContentRect",value:function(){for(var t,e,n,r,i={top:null,left:null,right:null,bottom:null,width:null,height:null},o=0,a=Vp(this.getPageEls());o<a.length;o++){var s=a[o].getBoundingClientRect();(s.top<i.top||null==i.top)&&(i.top=s.top),(s.left<i.left||null==i.left)&&(i.left=s.left),(s.right>i.right||null==i.right)&&(i.right=s.right),(s.bottom>i.bottom||null==i.bottom)&&(i.bottom=s.bottom)}return i.top=null!==(t=i.top)&&void 0!==t?t:0,i.left=null!==(e=i.left)&&void 0!==e?e:0,i.right=null!==(n=i.right)&&void 0!==n?n:0,i.bottom=null!==(r=i.bottom)&&void 0!==r?r:0,i.width=i.right-i.left,i.height=i.bottom-i.top,i}},{key:"getId",value:function(){return this.id}},{key:"getType",value:function(){return this.type}},{key:"getPageIds",value:function(){return this.pageIds}},{key:"getWidth",value:function(){return this.width}},{key:"getLeft",value:function(){return this.left}},{key:"getMaxZoomScale",value:function(){return this.maxZoomScale}},{key:"getVisibility",value:function(){return this.visibility}},{key:"setVisibility",value:function(t){return this.visibility!==t&&(this.getEl().style.display="visible"===t?"block":"none",this.visibility=t),this}},{key:"position",value:function(){return!1===this.positioned&&(this.getEl().style.left="".concat(this.getLeft(),"%"),this.positioned=!0),this}},{key:"activate",value:function(){this.active=!0,this.getEl().setAttribute("data-active",this.active)}},{key:"deactivate",value:function(){this.active=!1,this.getEl().setAttribute("data-active",this.active)}}]),t}(),pd=qp.entries;V({target:"Object",stat:!0},{entries:function(t){return pd(t)}});var dd=j.Object.entries,vd=Je.findIndex,gd="findIndex",yd=!0,md=rn(gd);gd in[]&&Array(1).findIndex((function(){yd=!1})),V({target:"Array",proto:!0,forced:yd||!md},{findIndex:function(t){return vd(this,t,arguments.length>1?arguments[1]:void 0)}});var bd=Y("Array").findIndex,wd=Array.prototype,_d=function(t){var e=t.findIndex;return t===wd||t instanceof Array&&e===wd.findIndex?bd:e},Sd=us;var xd=function(t){if(Sd(t))return t},kd=se("iterator"),Ed=function(t){var e=Object(t);return void 0!==e[kd]||"@@iterator"in e||kt.hasOwnProperty(xe(e))};var Td=function(t,e){if(void 0!==Ya&&Ed(Object(t))){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=Np(t);!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}},Ad=Bp,Pd=af;var Od=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r};var Id=function(t,e){var n;if(t){if("string"==typeof t)return Od(t,e);var r=Pd(n=Object.prototype.toString.call(t)).call(n,8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Ad(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Od(t,e):void 0}};var Cd=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var Ld=function(t,e){return xd(t)||Td(t,e)||Id(t,e)||Cd()},jd=[],Rd=jd.sort,Dd=i((function(){jd.sort(void 0)})),Nd=i((function(){jd.sort(null)})),Md=Qe("sort");V({target:"Array",proto:!0,forced:Dd||!Nd||!Md},{sort:function(t){return void 0===t?Rd.call(Kt(this)):Rd.call(Kt(this),R(t))}});var zd=Y("Array").sort,Fd=Array.prototype,Ud=function(t){var e=t.sort;return t===Fd||t instanceof Array&&e===Fd.sort?zd:e},Bd=Da;function Vd(t,e){var n=gr(t);if(dr){var r=dr(t);e&&(r=In(r).call(r,(function(e){return yn(t,e).enumerable}))),n.push.apply(n,r)}return n}function Hd(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)fn(n=Vd(Object(r),!0)).call(n,(function(e){Qa(t,e,r[e])}));else if(xt)vt(t,xt(r));else{var i;fn(i=Vd(Object(r))).call(i,(function(e){J(t,e,yn(r,e))}))}}return t}var Wd=["","webkit","Moz","MS","ms","o"],qd=Math.round,Xd=Math.abs,Yd=$f;function Gd(t,e,n){return!!hs(t)&&($d(t,n[e],n),!0)}function $d(t,e,n){var r;if(t)if(fn(t))fn(t).call(t,e,n);else if(void 0!==t.length)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)Object.hasOwnProperty.call(t,r)&&e.call(n,t[r],r,t)}function Zd(t,e,n){var r,i=e.prototype;(r=t.prototype=Bd(i)).constructor=t,r._super=i,n&&hf(r,n)}function Kd(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function Jd(t,e){return void 0===t?e:t}function Qd(t,e,n){var r;fn(r=rv(e)).call(r,(function(e){return t.addEventListener(e,n,!1)}))}function tv(t,e,n){var r;fn(r=rv(e)).call(r,(function(e){return t.removeEventListener(e,n,!1)}))}function ev(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function nv(t,e){return th(t).call(t,e)>-1}function rv(t){return Ph(t).call(t).split(/\s+/g)}var iv=function(t){return sf(Array.prototype).call(t,0)};function ov(t,e,n){var r=[],i=[];return fn(t).call(t,(function(t,n){var o=e?t[e]:t;th(i).call(i,o)<0&&r.push(t),i[n]=o})),n&&Ud(r).call(r,e?function(t,n){return t[e]>n[e]}:void 0),r}function av(t,e){var n=e[0].toUpperCase()+sf(e).call(e,1);return wp(Wd).call(Wd,(function(r){return(r?r+n:e)in t}))}var sv=1;function lv(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||"undefined"!=typeof window&&window}var cv=/mobile|tablet|ip(ad|hone|od)|android/i,uv=function(){return"undefined"!=typeof window&&"ontouchstart"in window},hv="touch",fv="mouse",pv=24,dv=["x","y"],vv=["clientX","clientY"];function gv(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){Kd(t.options.enable,[t])&&n.handler(e)},this.init()}function yv(t){var e=t.options.inputClass;return new(e||("undefined"!=typeof window&&void 0!==av(window,"PointerEvent")?Dv:uv()&&cv.test(navigator.userAgent)?Vv:uv()?Wv:Iv))(t,mv)}function mv(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=1&e&&r-i==0,a=12&e&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=bv(e));i>1&&!n.firstMultiple?n.firstMultiple=bv(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,l=e.center=wv(r);e.timeStamp=Yd(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=kv(s,l),e.distance=xv(s,l),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y});e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=Sv(e.deltaX,e.deltaY);var c=_v(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=Xd(c.x)>Xd(c.y)?c.x:c.y,e.scale=a?Tv(a.pointers,r):1,e.rotation=a?Ev(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,o,a=t.lastInterval||e,s=e.timeStamp-a.timeStamp;if(8!=e.eventType&&(s>25||void 0===a.velocity)){var l=e.deltaX-a.deltaX,c=e.deltaY-a.deltaY,u=_v(s,l,c);r=u.x,i=u.y,n=Xd(u.x)>Xd(u.y)?u.x:u.y,o=Sv(l,c),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var u=t.element;ev(e.srcEvent.target,u)&&(u=e.srcEvent.target);e.target=u}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function bv(t){var e,n=ys(e=t.pointers).call(e,(function(t){return{clientX:qd(t.clientX),clientY:qd(t.clientY)}}));return{timeStamp:Yd(),pointers:n,center:wv(n),deltaX:t.deltaX,deltaY:t.deltaY}}function wv(t){var e=t.length;if(1===e)return{x:qd(t[0].clientX),y:qd(t[0].clientY)};var n=0,r=0;return fn(t).call(t,(function(t){var e=t.clientX,i=t.clientY;n+=e,r+=i})),{x:qd(n/e),y:qd(r/e)}}gv.prototype={handler:function(){},init:function(){this.evEl&&Qd(this.element,this.evEl,this.domHandler),this.evTarget&&Qd(this.target,this.evTarget,this.domHandler),this.evWin&&Qd(lv(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&tv(this.element,this.evEl,this.domHandler),this.evTarget&&tv(this.target,this.evTarget,this.domHandler),this.evWin&&tv(lv(this.element),this.evWin,this.domHandler)}};var _v=function(t,e,n){return{x:e/t||0,y:n/t||0}};function Sv(t,e){return t===e?1:Xd(t)>=Xd(e)?t<0?2:4:e<0?8:16}var xv=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dv,r=Ld(n,2),i=r[0],o=r[1];return Math.sqrt(Math.pow(e[i]-t[i],2)+Math.pow(e[o]-t[o],2))},kv=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dv,r=Ld(n,2),i=r[0],o=r[1];return 180*Math.atan2(e[o]-t[o],e[i]-t[i])/Math.PI},Ev=function(t,e){return kv(e[1],e[0],vv)+kv(t[1],t[0],vv)},Tv=function(t,e){return xv(e[0],e[1],vv)/xv(t[0],t[1],vv)},Av={mousedown:1,mousemove:2,mouseup:4},Pv="mousedown",Ov="mousemove mouseup";function Iv(){this.evEl=Pv,this.evWin=Ov,this.pressed=!1,gv.apply(this,arguments)}Zd(Iv,gv,{handler:function(t){var e=Av[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:fv,srcEvent:t}))}});var Cv={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Lv={2:hv,3:"pen",4:fv,5:"kinect"},jv="pointerdown",Rv="pointermove pointerup pointercancel";function Dv(){this.evEl=jv,this.evWin=Rv,gv.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}"undefined"!=typeof window&&window.MSPointerEvent&&!window.PointerEvent&&(jv="MSPointerDown",Rv="MSPointerMove MSPointerUp MSPointerCancel"),Zd(Dv,gv,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=Cv[r],o=Lv[t.pointerType]||t.pointerType,a=o==hv,s=_d(e).call(e,(function(e){return e.pointerId==t.pointerId}));1&i&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):12&i&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&Tu(e).call(e,s,1))}});var Nv={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Mv="touchstart",zv="touchstart touchmove touchend touchcancel";function Fv(){this.evTarget=Mv,this.evWin=zv,this.started=!1,gv.apply(this,arguments)}Zd(Fv,gv,{handler:function(t){var e=Nv[t.type];if(1===e&&(this.started=!0),this.started){var n=function(t,e){var n=iv(t.touches),r=iv(t.changedTouches);12&e&&(n=ov(Pa(n).call(n,r),"identifier",!0));return[n,r]}(t,e),r=Ld(n,2),i=r[0],o=r[1];12&e&&i.length-o.length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i,changedPointers:o,pointerType:hv,srcEvent:t})}}});var Uv={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Bv="touchstart touchmove touchend touchcancel";function Vv(){this.evTarget=Bv,this.targetIds={},gv.apply(this,arguments)}function Hv(t,e){var n=iv(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o=iv(t.changedTouches),a=[],s=this.target;return i=In(n).call(n,(function(t){return ev(t.target,s)})),1===e&&fn(i).call(i,(function(t){r[t.identifier]=!0})),fn(o).call(o,(function(t){r[t.identifier]&&a.push(t),12&e&&delete r[t.identifier]})),a.length?[ov(Pa(i).call(i,a),"identifier",!0),a]:void 0}Zd(Vv,gv,{handler:function(t){var e=Uv[t.type],n=Hv.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:hv,srcEvent:t})}});function Wv(){var t;gv.apply(this,arguments);var e=Z(t=this.handler).call(t,this);this.touch=new Vv(this.manager,e),this.mouse=new Iv(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function qv(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,Xv.call(this,e)):12&t&&Xv.call(this,e)}function Xv(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;yu((function(){var t=th(r).call(r,n);t>-1&&Tu(r).call(r,t,1)}),2500)}}function Yv(t){var e,n=t.srcEvent,r=n.clientX,i=n.clientY;return!!wp(e=this.lastTouches).call(e,(function(t){return Math.abs(r-t.x)<=25&&Math.abs(i-t.y)<=25}))}Zd(Wv,gv,{handler:function(t,e,n){var r=n.pointerType==hv,i=n.pointerType==fv;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)qv.call(this,e,n);else if(i&&Yv.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Gv=function(){var t="undefined"!=typeof document&&document.createElement("div");if(t)return av(t.style,"touchAction")},$v=function(){return void 0!==Gv()},Zv="compute",Kv="auto",Jv="manipulation",Qv="none",tg="pan-x",eg="pan-y";function ng(t,e){this.manager=t,this.set(e)}ng.prototype={set:function(t){var e;t==Zv&&(t=this.compute());var n=ig();$v()&&this.manager.element.style&&n[t]&&(this.manager.element.style[Gv()]=t),this.actions=Ph(e=t.toLowerCase()).call(e)},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t,e=[];return fn(t=this.manager.recognizers).call(t,(function(t){Kd(t.options.enable,[t])&&(e=Pa(e).call(e,t.getTouchAction()))})),function(t){if(nv(t,Qv))return Qv;var e=nv(t,tg),n=nv(t,eg);return e&&n?Qv:e||n?e?tg:eg:nv(t,Jv)?Jv:Kv}(e.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=ig(),o=nv(r,Qv)&&!i.none,a=nv(r,eg)&&!i["pan-y"],s=nv(r,tg)&&!i["pan-x"];if(o){var l=1===t.pointers.length,c=t.distance<2,u=t.deltaTime<250;if(l&&c&&u)return}if(!s||!a)return o||a&&6&n||s&&n&pv?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var rg=["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"];function ig(){if(!$v())return!1;var t="undefined"!=typeof window&&window.CSS&&window.CSS.supports;return td(rg).call(rg,(function(e,n){return e[n]=!t||window.CSS.supports("touch-action",n),e}),{})}var og=32;function ag(t){this.options=Hd(Hd({},this.defaults),t),this.id=sv++,this.manager=null,this.options.enable=Jd(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function sg(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function lg(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}ag.prototype={defaults:{},set:function(t){return hf(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(Gd(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=cg(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return Gd(t,"dropRecognizeWith",this)||(t=cg(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(Gd(t,"requireFailure",this))return this;var e=this.requireFail;return t=cg(t,this),-1===th(e).call(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){var e,n;if(Gd(t,"dropRequireFailure",this))return this;t=cg(t,this);var r=th(e=this.requireFail).call(e,t);return r>-1&&Tu(n=this.requireFail).call(n,r,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+sg(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+sg(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=og},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=Hd({},t);if(!Kd(this.options.enable,[this,e]))return this.reset(),void(this.state=og);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(){},getTouchAction:function(){},reset:function(){}};var cg=function(t,e){var n=e.manager;return n?n.get(t):t};function ug(){ag.apply(this,arguments)}function hg(){ug.apply(this,arguments),this.pX=null,this.pY=null}function fg(){ug.apply(this,arguments)}function pg(){ag.apply(this,arguments),this._timer=null,this._input=null}function dg(){ug.apply(this,arguments)}function vg(){ug.apply(this,arguments)}function gg(){ag.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function yg(t,e){return(e=e||{}).recognizers=Jd(e.recognizers,yg.defaults.preset),new mg(t,e)}Zd(ug,ag,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(8&n||!i)?16|e:r||i?4&n?8|e:2&e?4|e:2:og}}),Zd(hg,ug,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(eg),t&pv&&e.push(tg),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(6&e.direction?(i=0===o?1:o<0?2:4,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?1:a<0?8:16,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return ug.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=lg(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),Zd(fg,ug,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Qv]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),Zd(pg,ag,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Kv]},process:function(t){var e=this,n=this.options,r=t.pointers.length===n.pointers,i=t.distance<n.threshold,o=t.deltaTime>n.time;if(this._input=t,!i||!r||12&t.eventType&&!o)this.reset();else if(1&t.eventType)this.reset(),this._timer=yu((function(){e.state=8,e.tryEmit()}),n.time);else if(4&t.eventType)return 8;return og},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=Yd(),this.manager.emit(this.options.event,this._input)))}}),Zd(dg,ug,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Qv]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),Zd(vg,ug,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return hg.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:n&pv&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&Xd(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=lg(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),Zd(gg,ag,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Jv]},process:function(t){var e=this,n=this.options,r=t.pointers.length===n.pointers,i=t.distance<n.threshold,o=t.deltaTime<n.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(i&&o&&r){if(4!=t.eventType)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<n.interval,s=!this.pCenter||xv(this.pCenter,t.center)<n.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&a?this.count+=1:this.count=1,this._input=t,0===this.count%n.taps)return this.hasRequireFailures()?(this._timer=yu((function(){e.state=8,e.tryEmit()}),n.interval),2):8}return og},failTimeout:function(){var t=this;return this._timer=yu((function(){t.state=og}),this.options.interval),og},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),yg.VERSION="2.0.7",yg.defaults={domEvents:!1,touchAction:Zv,enable:!0,inputTarget:null,inputClass:null,preset:[[dg,{enable:!1}],[fg,{enable:!1},["rotate"]],[vg,{direction:6}],[hg,{direction:6},["swipe"]],[gg],[gg,{event:"doubletap",taps:2},["tap"]],[pg]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function mg(t,e){var n,r=this;(this.options=Hd(Hd({},yg.defaults),e),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=yv(this),this.touchAction=new ng(this,this.options.touchAction),bg(this,!0),this.options.recognizers)&&fn(n=this.options.recognizers).call(n,(function(t){var e=r.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}))}function bg(t,e){var n,r,i=t.element;i.style&&(fn(n=dd(t.options.cssProps)).call(n,(function(n){var o=Ld(n,2),a=o[0],s=o[1];r=av(i.style,s),e?(t.oldCssProps[r]=i.style[r],i.style[r]=a):i.style[r]=t.oldCssProps[r]||""})),e||(t.oldCssProps={}))}mg.prototype={set:function(t){return hf(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(r=e.curRecognizer=null),fn(n).call(n,(function(n){2===e.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&14&n.state&&(r=e.curRecognizer=n)}))}},get:function(t){var e;return t instanceof ag?t:wp(e=this.recognizers).call(e,(function(e){return e.options.event==t}))||null},add:function(t){if(Gd(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(Gd(t,"remove",this))return this;if(t=this.get(t)){var e,n,r=th(e=this.recognizers).call(e,t);if(-1!==r)Tu(n=this.recognizers).call(n,r,1),this.touchAction.update()}return this},on:function(t,e){var n;if(void 0!==t&&void 0!==e){var r=this.handlers;return fn(n=rv(t)).call(n,(function(t){r[t]=r[t]||[],r[t].push(e)})),this}},off:function(t,e){var n;if(void 0!==t){var r=this.handlers;return fn(n=rv(t)).call(n,(function(t){if(e){if(r[t]){var n,i;Tu(n=r[t]).call(n,th(i=r[t]).call(i,e),1)}}else delete r[t]})),this}},emit:function(t,e){var n;this.options.domEvents&&function(t,e){var n=document.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var r=this.handlers[t]&&sf(n=this.handlers[t]).call(n);r&&r.length&&(e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()},fn(r).call(r,(function(t){return t(e)})))},destroy:function(){this.element&&bg(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},hf(yg,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:og,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:pv,DIRECTION_ALL:30,Manager:mg,Input:gv,TouchAction:ng,TouchInput:Vv,MouseInput:Iv,PointerEventInput:Dv,TouchMouseInput:Wv,SingleTouchInput:Fv,Recognizer:ag,AttrRecognizer:ug,Tap:gg,Pan:hg,Swipe:vg,Pinch:fg,Rotate:dg,Press:pg,on:Qd,off:tv,each:$d,inherit:Zd,prefixed:av});var wg=yg,_g=function(){function t(e){var n,r,i,o,a,s,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Oa(this,t),this.el=e,this.options=l,this.swipeVelocity=null!==(n=this.options.swipeVelocity)&&void 0!==n?n:.3,this.swipeThreshold=null!==(r=this.options.swipeThreshold)&&void 0!==r?r:10,this.navigationDuration=null!==(i=this.options.navigationDuration)&&void 0!==i?i:240,this.navigationPanDuration=null!==(o=this.options.navigationPanDuration)&&void 0!==o?o:200,this.zoomDuration=null!==(a=this.options.zoomDuration)&&void 0!==a?a:200,this.doubleTapDelay=null!==(s=this.options.doubleTapDelay)&&void 0!==s?s:300,this.position=-1,this.pinching=!1,this.panning=!1,this.transform={left:0,top:0,scale:1},this.startTransform={left:0,top:0,scale:1},this.tap={count:0,delay:this.doubleTapDelay},this.started=!1,this.destroyed=!1,this._events={}}return La(t,[{key:"bind",value:function(t,e){return this._events[t]=this._events[t]||[],this._events[t].push(e)}},{key:"unbind",value:function(t,e){var n,r;if(this._events[t])return Tu(n=this._events[t]).call(n,th(r=this._events[t]).call(r,e),1)}},{key:"trigger",value:function(t){for(var e,n=this,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];null===(e=this._events[t])||void 0===e||fn(e).call(e,(function(t){return t.apply(n,i)}))}},{key:"start",value:function(){var t,e,n,r,i,o,a,s,l,c,u,h,f,p,d,v;this.scrollerEl=this.el.querySelector(".verso__scroller"),this.pageSpreadEls=this.el.querySelectorAll(".verso__page-spread"),this.pageSpreads=this.traversePageSpreads(this.pageSpreadEls),this.pageIds=this.buildPageIds(this.pageSpreads),this.animation=new hd(this.scrollerEl),this.hammer=new wg.Manager(this.scrollerEl,{touchAction:"none",enable:!1,inputClass:this.getHammerInputClass()}),this.hammer.add(new wg.Pan({threshold:5,direction:wg.DIRECTION_ALL})),this.hammer.add(new wg.Tap({event:"singletap",interval:0})),this.hammer.add(new wg.Pinch),this.hammer.add(new wg.Press({time:500})),this.hammer.on("panstart",Z(t=this.onPanStart).call(t,this)),this.hammer.on("panmove",Z(e=this.onPanMove).call(e,this)),this.hammer.on("panend",Z(n=this.onPanEnd).call(n,this)),this.hammer.on("pancancel",Z(r=this.onPanEnd).call(r,this)),this.hammer.on("singletap",Z(i=this.onSingletap).call(i,this)),this.hammer.on("pinchstart",Z(o=this.onPinchStart).call(o,this)),this.hammer.on("pinchmove",Z(a=this.onPinchMove).call(a,this)),this.hammer.on("pinchend",Z(s=this.onPinchEnd).call(s,this)),this.hammer.on("pinchcancel",Z(l=this.onPinchEnd).call(l,this)),this.hammer.on("press",Z(c=this.onPress).call(c,this)),this.scrollerEl.addEventListener("contextmenu",Z(u=this.onContextmenu).call(u,this),!1),this.scrollerEl.addEventListener("wheel",Z(h=this.onWheel).call(h,this),!1);var g=null!==(f=this.getPageSpreadPositionFromPageId(this.options.pageId))&&void 0!==f?f:0;return this.hammer.set({enable:!0}),this.started=!0,this.destroyed=!1,this.navigateTo(g,{duration:0}),this.resizeListener=Z(p=this.onResize).call(p,this),this.touchStartListener=Z(d=this.onTouchStart).call(d,this),this.touchEndListener=Z(v=this.onTouchEnd).call(v,this),this.el.addEventListener("touchstart",this.touchStartListener,!1),this.el.addEventListener("touchend",this.touchEndListener,!1),"undefined"!=typeof window&&null!==window&&window.addEventListener("resize",this.resizeListener,!1),this}},{key:"destroy",value:function(){var t,e;return this.started?this.destroyed?console.warn("You've called .destroy() on a viewer that has already been destroyed and not restarted, this is a no-op."):(this.scrollerEl.removeEventListener("contextmenu",Z(t=this.onContextmenu).call(t,this)),this.scrollerEl.removeEventListener("wheel",Z(e=this.onWheel).call(e,this)),this.hammer.destroy(),this.el.removeEventListener("touchstart",this.touchStartListener),this.el.removeEventListener("touchend",this.touchEndListener),window.removeEventListener("resize",this.resizeListener),this.started=!1,this.destroyed=!0,this):console.warn("You've called .destroy() on a viewer that was not started yet, this is a no-op.")}},{key:"first",value:function(t){return this.navigateTo(0,t)}},{key:"prev",value:function(t){return this.navigateTo(this.getPosition()-1,t)}},{key:"next",value:function(t){return this.navigateTo(this.getPosition()+1,t)}},{key:"last",value:function(t){return this.navigateTo(this.getPageSpreadCount()-1,t)}},{key:"navigateTo",value:function(t){var e,n,r,i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.destroyed)return console.warn("You've called a navigation method on a viewer that was previously destroyed, this is a no-op.\nPlease call viewer.start() again, if you want to reuse this Viewer instance.\n\nYou might have forgotten to remove an event handler that\ncalls first/prev/next/last/navigateTo on the viewer.");if(!this.started)return console.warn("\nYou've called a navigation method on a viewer that hasn't been started yet, this is a no-op.\nPlease call viewer.start() first.\n\nYou might have forgotten to remove an event handler that\ncalls .first()/.prev()/.next()/.last()/.navigateTo() on the viewer.\n");if(!(t<0||t>this.getPageSpreadCount()-1)){var a=this.getPosition(),s=this.getPageSpreadFromPosition(a),l=this.getPageSpreadFromPosition(t),c=this.getCarouselFromPageSpread(l),u=null!==(e=o.velocity)&&void 0!==e?e:1,h=null!==(n=o.duration)&&void 0!==n?n:this.navigationDuration;h/=Math.abs(u);var f=l.isScrollable()?"pan-y":"none";null==s||s.deactivate(),l.activate(),fn(r=c.visible).call(r,(function(t){return t.position().setVisibility("visible")})),this.hammer.set({touchAction:f}),this.transform.left=this.getLeftTransformFromPageSpread(t,l),this.setPosition(t),this.transform.scale>1&&(this.transform.top=0,this.transform.scale=1,this.trigger("zoomedOut",{position:a})),this.trigger("beforeNavigation",{currentPosition:a,newPosition:t}),this.animation.animate({x:"".concat(this.transform.left,"%"),duration:h},(function(){var t;c=i.getCarouselFromPageSpread(i.getActivePageSpread()),fn(t=c.gone).call(t,(function(t){return t.setVisibility("gone")})),i.trigger("afterNavigation",{newPosition:i.getPosition(),previousPosition:a})}))}}},{key:"getPosition",value:function(){return this.position}},{key:"setPosition",value:function(t){return this.position=t,this}},{key:"getLeftTransformFromPageSpread",value:function(t,e){var n=0;return t===this.getPageSpreadCount()-1?n=100-e.getWidth()-e.getLeft():t>0&&(n=(100-e.getWidth())/2-e.getLeft()),n}},{key:"getCarouselFromPageSpread",value:function(t){var e,n={visible:[],gone:[]};return fn(e=this.pageSpreads).call(e,(function(e){var r=!1;e.getLeft()<=t.getLeft()?e.getLeft()+e.getWidth()>t.getLeft()-100&&(r=!0):e.getLeft()-e.getWidth()<t.getLeft()+100&&(r=!0),!0===r?n.visible.push(e):n.gone.push(e)})),n}},{key:"traversePageSpreads",value:function(t){for(var e=[],n=0,r=0,i=Vp(t);r<i.length;r++){var o,a,s,l=i[r],c=l.getAttribute("data-id"),u=l.getAttribute("data-type"),h=(null===(o=l.getAttribute("data-page-ids"))||void 0===o?void 0:o.split(","))||[],f=Number(null!==(a=l.getAttribute("data-max-zoom-scale"))&&void 0!==a?a:1),p=Number(null!==(s=l.getAttribute("data-width"))&&void 0!==s?s:100),d=new fd(l,{id:c,type:u,pageIds:h,maxZoomScale:f,width:p,left:n});n+=p,e.push(d)}return e}},{key:"buildPageIds",value:function(t){var e={};return fn(t).call(t,(function(t){var n;fn(n=t.options.pageIds).call(n,(function(n){e[n]=t}))})),e}},{key:"isCoordinateInsideElement",value:function(t,e,n){var r=n.getBoundingClientRect();return t>=r.left&&t<=r.right&&e>=r.top&&e<=r.bottom}},{key:"getCoordinateInfo",value:function(t,e,n){for(var r,i={x:t-=this.el.offsetLeft,y:e-=this.el.offsetTop,contentX:0,contentY:0,pageX:0,pageY:0,overlayEls:[],pageEl:null,isInsideContentX:!1,isInsideContentY:!1,isInsideContent:!1},o=n.getContentRect(),a=n.getOverlayEls(),s=n.getPageEls(),l=0,c=Vp(a);l<c.length;l++){var u=c[l];this.isCoordinateInsideElement(t,e,u)&&i.overlayEls.push(u)}for(var h=0,f=Vp(s);h<f.length;h++)if(r=f[h],this.isCoordinateInsideElement(t,e,r)){i.pageEl=r;break}return i.contentX=(t-o.left)/Math.max(1,o.width),i.contentY=(e-o.top)/Math.max(1,o.height),i.pageEl&&(i.isInsideContentX=i.contentX>=0&&i.contentX<=1,i.isInsideContentY=i.contentY>=0&&i.contentY<=1,i.isInsideContent=i.isInsideContentX&&i.isInsideContentY),i}},{key:"getPageSpreadCount",value:function(){return this.pageSpreads.length}},{key:"getActivePageSpread",value:function(){return this.getPageSpreadFromPosition(this.getPosition())}},{key:"getPageSpreadFromPosition",value:function(t){return this.pageSpreads[t]}},{key:"getPageSpreadPositionFromPageId",value:function(t){for(var e=0;e<this.pageSpreads.length;e++){var n,r=this.pageSpreads[e];if(th(n=r.options.pageIds).call(n,t)>-1)return e}}},{key:"getPageSpreadBounds",value:function(t){var e=t.getRect(),n=t.getContentRect();return{left:(n.left-e.left)/e.width*100,top:(n.top-e.top)/e.height*100,width:n.width/e.width*100,height:n.height/e.height*100,pageSpreadRect:e,pageSpreadContentRect:n}}},{key:"clipCoordinate",value:function(t,e,n,r){return n*e<100?t=r*-e+50-n*e/2:(t=Math.min(t,r*-e),t=Math.max(t,r*-e-n*e+100)),t}},{key:"zoomTo",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,i=n.scale,o=this.transform.scale,a=this.getActivePageSpread(),s=this.getPageSpreadBounds(a),l=a.getLeft(),c=l*o,u=null!==(t=n.x)&&void 0!==t?t:0,h=null!==(e=n.y)&&void 0!==e?e:0;1!==i?(u-=s.pageSpreadRect.left,h-=s.pageSpreadRect.top,u=u/(s.pageSpreadRect.width/o)*100,h=h/(s.pageSpreadRect.height/o)*100,u=this.transform.left+c+u-u*i/o,h=this.transform.top+h-h*i/o,!1!==n.bounds&&i>1&&(u=this.clipCoordinate(u,i,s.width,s.left),h=this.clipCoordinate(h,i,s.height,s.top))):(u=0,h=0),u-=l*i,this.transform.left=u,this.transform.top=h,this.transform.scale=i,this.animation.animate({x:"".concat(u,"%"),y:"".concat(h,"%"),scale:i,easing:n.easing,duration:n.duration},r)}},{key:"refresh",value:function(){return this.pageSpreadEls=this.el.querySelectorAll(".verso__page-spread"),this.pageSpreads=this.traversePageSpreads(this.pageSpreadEls),this.pageIds=this.buildPageIds(this.pageSpreads),this}},{key:"getHammerInputClass",value:function(){return"undefined"!=typeof window&&"ontouchstart"in window&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent)?wg.TouchInput:null}},{key:"onPanStart",value:function(t){if(this.transform.scale>1||t.direction===wg.DIRECTION_LEFT||t.direction===wg.DIRECTION_RIGHT){var e=t.center.x,n=this.scrollerEl.offsetWidth;e>30&&e<n-30&&(this.startTransform.left=this.transform.left,this.startTransform.top=this.transform.top,this.panning=!0,this.trigger("panStart"))}}},{key:"onPanMove",value:function(t){var e;if(!0!==this.pinching&&!1!==this.panning)if(this.transform.scale>1){var n=this.getActivePageSpread(),r=n.getLeft()*this.transform.scale,i=this.getPageSpreadBounds(n),o=this.transform.scale;e=this.startTransform.left+r+t.deltaX/this.scrollerEl.offsetWidth*100;var a=this.startTransform.top+t.deltaY/this.scrollerEl.offsetHeight*100;e=this.clipCoordinate(e,o,i.width,i.left),a=this.clipCoordinate(a,o,i.height,i.top),e-=r,this.transform.left=e,this.transform.top=a,this.animation.animate({x:"".concat(e,"%"),y:"".concat(a,"%"),scale:o,easing:"linear"})}else e=this.transform.left+t.deltaX/this.scrollerEl.offsetWidth*100,this.animation.animate({x:"".concat(e,"%"),easing:"linear"})}},{key:"onPanEnd",value:function(t){if(!1!==this.panning&&(this.panning=!1,this.trigger("panEnd"),1===this.transform.scale&&!1===this.pinching)){var e=this.getPosition(),n=t.overallVelocityX;Math.abs(n)>=this.swipeVelocity&&Math.abs(t.deltaX)>=this.swipeThreshold&&(t.offsetDirection===wg.DIRECTION_LEFT?this.next({velocity:n,duration:this.navigationPanDuration}):t.offsetDirection===wg.DIRECTION_RIGHT&&this.prev({velocity:n,duration:this.navigationPanDuration})),e===this.getPosition()&&(this.animation.animate({x:"".concat(this.transform.left,"%"),duration:this.navigationPanDuration}),this.trigger("attemptedNavigation",{position:this.getPosition()}))}}},{key:"onPinchStart",value:function(){this.getActivePageSpread().isZoomable()&&(this.pinching=!0,this.el.setAttribute("data-pinching",!0),this.startTransform.scale=this.transform.scale)}},{key:"onPinchMove",value:function(t){!1!==this.pinching&&this.zoomTo({x:t.center.x,y:t.center.y,scale:this.startTransform.scale*t.scale,bounds:!1,easing:"linear"})}},{key:"onPinchEnd",value:function(t){var e=this;if(!1!==this.pinching){var n=this.getActivePageSpread().getMaxZoomScale(),r=Math.max(1,Math.min(this.transform.scale,n)),i=this.getPosition();1===this.startTransform.scale&&r>1?this.trigger("zoomedIn",{position:i}):this.startTransform.scale>1&&1===r&&this.trigger("zoomedOut",{position:i}),this.zoomTo({x:t.center.x,y:t.center.y,scale:r,duration:this.zoomDuration},(function(){e.pinching=!1,e.el.setAttribute("data-pinching",!1)}))}}},{key:"onPress",value:function(t){this.trigger("pressed",this.getCoordinateInfo(t.center.x,t.center.y,this.getActivePageSpread()))}},{key:"onContextmenu",value:function(t){return t.preventDefault(),this.trigger("contextmenu",this.getCoordinateInfo(t.clientX,t.clientY,this.getActivePageSpread())),!1}},{key:"onWheel",value:function(t){var e,n,r=this,i=this.getActivePageSpread();if(!1!==i.isZoomable()){var o=t.deltaY;event.webkitDirectionInvertedFromDevice&&(o=-o),o>0&&1===this.transform.scale?(n=i.getMaxZoomScale(),e=this.getPosition(),this.zoomTo({x:t.clientX,y:t.clientY,scale:n,duration:this.zoomDuration},(function(){r.trigger("zoomedIn",{position:e})}))):o<0&&this.transform.scale>1&&(e=this.getPosition(),this.zoomTo({x:t.clientX,y:t.clientY,scale:1,duration:this.zoomDuration},(function(){r.trigger("zoomedOut",{position:e})})))}}},{key:"onSingletap",value:function(t){var e=this,n=this.getActivePageSpread(),r=this.getCoordinateInfo(t.center.x,t.center.y,n);if(clearTimeout(this.tap.timeout),1===this.tap.count){if(this.tap.count=0,this.trigger("doubleClicked",r),n.isZoomable()){var i=n.getMaxZoomScale(),o=this.transform.scale>1,a=o?1:i,s=o?"zoomedOut":"zoomedIn",l=this.getPosition();this.zoomTo({x:t.center.x,y:t.center.y,scale:a,duration:this.zoomDuration},(function(){e.trigger(s,{position:l})}))}}else this.tap.count++,this.tap.timeout=yu((function(){e.tap.count=0,e.trigger("clicked",r)}),this.tap.delay)}},{key:"onTouchStart",value:function(t){this.getActivePageSpread().isScrollable()||t.preventDefault()}},{key:"onTouchEnd",value:function(t){this.getActivePageSpread().isScrollable()||t.preventDefault()}},{key:"onResize",value:function(){if(this.transform.scale>1){var t=this.getPosition(),e=this.getActivePageSpread();this.transform.left=this.getLeftTransformFromPageSpread(t,e),this.transform.top=0,this.transform.scale=1,this.zoomTo({x:this.transform.left,y:this.transform.top,scale:this.transform.scale,duration:0}),this.trigger("zoomedOut",{position:t})}}}]),t}();function Sg(t){var e=function(){if("undefined"==typeof Reflect||!Sr)return!1;if(Sr.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Sr(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ja(t);if(e){var i=Ja(this).constructor;n=Sr(r,arguments,i)}else n=r.apply(this,arguments);return $a(this,n)}}var xg=function(t){Fa(n,t);var e=Sg(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Oa(this,n),(t=e.call(this)).options=r,t.contentsRendered=!1,t.hotspotsRendered=!1,t.el=t.renderEl(),t}return La(n,[{key:"getId",value:function(){return this.options.id}},{key:"getEl",value:function(){return this.el}},{key:"getPages",value:function(){return this.options.pages}},{key:"renderEl",value:function(){var t,e=document.createElement("div"),n=ys(t=this.getPages()).call(t,(function(t){return t.id}));return e.className="verso__page-spread sgn-pp__page-spread",e.setAttribute("data-id",this.getId()),e.setAttribute("data-type","page"),e.setAttribute("data-width",this.options.width),e.setAttribute("data-page-ids",n.join(",")),e.setAttribute("data-max-zoom-scale",this.options.maxZoomScale),e.setAttribute("data-zoomable",!1),e}},{key:"renderContents",value:function(){var t=this,e=this.getId(),n=this.getEl(),r=this.getPages(),i=r.length,o=0,a=n.clientWidth*(window.devicePixelRatio||1);"double"===this.options.pageMode&&(a/=2);var s=a>700;return fn(r).call(r,(function(a,l){var c=a.images.medium;s&&(c=a.images.large);var u=document.createElement("div"),h=document.createElement("div");u.className="sgn-pp__page verso__page",null!=a.id&&u.setAttribute("data-id",a.id),2===i&&(u.className+=0===l?" verso-page--verso":" verso-page--recto"),u.appendChild(h),n.appendChild(u),h.className="sgn-pp-page__loader",h.innerHTML="<span>".concat(a.label,"</span>"),fh(c,(function(s,l,f){if(null==s){var p=++o===i;u.style.backgroundImage="url(".concat(c,")"),u.setAttribute("data-width",l),u.setAttribute("data-height",f),u.innerHTML="&nbsp;",p&&n.setAttribute("data-zoomable",!0),t.trigger("pageLoaded",{pageSpreadId:e,page:a}),p&&t.trigger("pagesLoaded",{pageSpreadId:e,pages:r})}else h.innerHTML="<span>!</span>"}))})),this.contentsRendered=!0,this}},{key:"clearContents",value:function(){return this.el.innerHTML="",this.contentsRendered=!1,this}},{key:"zoomIn",value:function(){var t=this,e=sf([]).call(this.el.querySelectorAll(".sgn-pp__page")),n=this.getPages();fn(e).call(e,(function(e){var r=e.getAttribute("data-id"),i=wp(n).call(n,(function(t){return t.id===r})).images.large;fh(i,(function(n){null==n&&"true"===t.el.getAttribute("data-active")&&(e.setAttribute("data-image",e.style.backgroundImage),e.style.backgroundImage="url(".concat(i,")"))}))}))}},{key:"zoomOut",value:function(){var t=Vp(this.el.querySelectorAll(".sgn-pp__page[data-image]"));fn(t).call(t,(function(t){t.style.backgroundImage=t.getAttribute("data-image"),t.removeAttribute("data-image")}))}}]),n}(ts);function kg(t){var e=function(){if("undefined"==typeof Reflect||!Sr)return!1;if(Sr.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Sr(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ja(t);if(e){var i=Ja(this).constructor;n=Sr(r,arguments,i)}else n=r.apply(this,arguments);return $a(this,n)}}var Eg=function(t){Fa(n,t);var e=kg(n);function n(t){var r;return Oa(this,n),(r=e.call(this)).options=t,r.collection=[],r.ids={},r}return La(n,[{key:"get",value:function(t){return this.ids[t]}},{key:"getFrag",value:function(){var t,e=document.createDocumentFragment();return fn(t=this.collection).call(t,(function(t){return e.appendChild(t.el)})),e}},{key:"update",value:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"single",r=[],i={},o=sf(t=this.options.pages).call(t),a=this.options,s=a.width,l=a.maxZoomScale;if("single"===n)fn(o).call(o,(function(t){return r.push([t])}));else{var c=o.shift(),u=o.length%2==1?o.pop():null,h=uh(o,2);c&&r.push([c]),fn(h).call(h,(function(t){return r.push(ys(t).call(t,(function(t){return t})))})),u&&r.push([u])}return this.collection=ys(r).call(r,(function(t,r){var o,a=Pa(o="".concat(n,"-")).call(o,r),c=new xg({width:s,pageMode:n,maxZoomScale:l,pages:t,id:a});return Z(c).call(c,"pageLoaded",(function(t){return e.trigger("pageLoaded",t)})),Z(c).call(c,"pagesLoaded",(function(t){return e.trigger("pagesLoaded",t)})),i[a]=c,c})),this.ids=i,this}}]),n}(ts);function Tg(t){var e=function(){if("undefined"==typeof Reflect||!Sr)return!1;if(Sr.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Sr(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ja(t);if(e){var i=Ja(this).constructor;n=Sr(r,arguments,i)}else n=r.apply(this,arguments);return $a(this,n)}}var Ag=function(t){Fa(n,t);var e=Tg(n);function n(t){var r,i,o,a,s,l,c,u,h,f,p,d,v,g,y,m,b,w,_,S,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Oa(this,n),(S=e.call(this)).beforeNavigation=Z(r=S.beforeNavigation).call(r,ja(S)),S.afterNavigation=Z(i=S.afterNavigation).call(i,ja(S)),S.attemptedNavigation=Z(o=S.attemptedNavigation).call(o,ja(S)),S.clicked=Z(a=S.clicked).call(a,ja(S)),S.doubleClicked=Z(s=S.doubleClicked).call(s,ja(S)),S.pressed=Z(l=S.pressed).call(l,ja(S)),S.contextmenu=Z(c=S.contextmenu).call(c,ja(S)),S.panStart=Z(u=S.panStart).call(u,ja(S)),S.panEnd=Z(h=S.panEnd).call(h,ja(S)),S.zoomedIn=Z(f=S.zoomedIn).call(f,ja(S)),S.zoomedOut=Z(p=S.zoomedOut).call(p,ja(S)),S.resize=Z(d=S.resize).call(d,ja(S)),S.unload=Z(v=S.unload).call(v,ja(S)),S.options=S.makeOptions(x,S.defaults),S.pageId=S.getOption("pageId"),S.els={root:t,pages:t.querySelector(".sgn-pp__pages"),verso:t.querySelector(".verso")},S.pageMode=S.getPageMode(),S.pageSpreads=new Eg({pages:S.getOption("pages"),maxZoomScale:S.getOption("pageSpreadMaxZoomScale"),width:S.getOption("pageSpreadWidth")}),Z(g=S.pageSpreads).call(g,"pageLoaded",Z(y=S.pageLoaded).call(y,ja(S))),Z(m=S.pageSpreads).call(m,"pagesLoaded",Z(b=S.pagesLoaded).call(b,ja(S))),S.setColor(S.getOption("color")),S.els.pages.parentNode.insertBefore(S.pageSpreads.update(S.pageMode).getFrag(),S.els.pages),S.verso=S.createVerso(),Z(S).call(S,"started",Z(w=S.start).call(w,ja(S))),Z(S).call(S,"destroyed",Z(_=S.destroy).call(_,ja(S))),S}return La(n,[{key:"start",value:function(){var t,e,n=this.getVerso();n.start(),fn(t=n.pageSpreads).call(t,Z(e=this.overridePageSpreadContentRect).call(e,this)),this.resizeListener=hh(this.resize,this.getOption("resizeDelay")),window.addEventListener("resize",this.resizeListener,!1),window.addEventListener("beforeunload",this.unload,!1),this.els.root.setAttribute("data-started",""),this.els.root.setAttribute("tabindex","-1"),this.els.root.focus()}},{key:"destroy",value:function(){var t,e=this.getVerso(),n=e.el.querySelectorAll(".sgn-pp__page-spread");this.els.root.removeAttribute("data-started"),this.els.root.removeAttribute("data-idle"),this.els.root.removeAttribute("data-navigating"),this.els.root.removeAttribute("data-color-brightness"),this.els.root.removeAttribute("data-zoomed-in"),this.els.root.style.backgroundColor="#ffffff",fn(t=Vp(n)).call(t,(function(t){t.parentNode.removeChild(t)})),e.destroy(),window.removeEventListener("resize",this.resizeListener,!1),window.removeEventListener("beforeunload",this.unload,!1)}},{key:"makeOptions",value:function(t,e){var n={};for(var r in t){var i;n[r]=null!==(i=t[r])&&void 0!==i?i:e[r]}return n}},{key:"getOption",value:function(t){return this.options[t]}},{key:"setColor",value:function(t){this.els.root.setAttribute("data-color-brightness",lh(t)),this.els.root.style.backgroundColor=t}},{key:"createVerso",value:function(){var t=new _g(this.els.verso,{pageId:this.pageId});return Z(t).call(t,"beforeNavigation",this.beforeNavigation),Z(t).call(t,"afterNavigation",this.afterNavigation),Z(t).call(t,"attemptedNavigation",this.attemptedNavigation),Z(t).call(t,"clicked",this.clicked),Z(t).call(t,"doubleClicked",this.doubleClicked),Z(t).call(t,"pressed",this.pressed),Z(t).call(t,"contextmenu",this.contextmenu),Z(t).call(t,"panStart",this.panStart),Z(t).call(t,"panEnd",this.panEnd),Z(t).call(t,"zoomedIn",this.zoomedIn),Z(t).call(t,"zoomedOut",this.zoomedOut),t}},{key:"getVerso",value:function(){return this.verso}},{key:"getContentRect",value:function(t){var e={top:0,left:0,right:0,bottom:0,width:0,height:0},n=t.getPageEls(),r=n[0],i=n.length;if(!i)return e;var o=this.getVerso().transform.scale,a=r.offsetWidth*i*o,s=r.offsetHeight*o,l=+r.getAttribute("data-height")/(+r.getAttribute("data-width")*i),c=s,u=c/l;c=(u=Math.min(a,u))*l;var h=r.getBoundingClientRect();return e.width=u,e.height=c,e.top=h.top+(s-c)/2,e.left=h.left+(a-u)/2,e.right=e.width+e.left,e.bottom=e.height+e.top,e}},{key:"formatProgressLabel",value:function(t){var e,n=null!==(e=null==t?void 0:t.options.pages)&&void 0!==e?e:[],r=ys(n).call(n,(function(t){return t.id})),i=ys(n).call(n,(function(t){return t.label})),o=this.getOption("pages").length;return r.length>0?i.join("-")+" / "+o:null}},{key:"renderPageSpreads",value:function(){var t,e=this;return fn(t=this.getVerso().pageSpreads).call(t,(function(t){var n=t.getVisibility(),r=e.pageSpreads.get(t.getId());if(r){var i,o;if("visible"===n&&!1===r.contentsRendered)yu(Z(i=r.renderContents).call(i,r),0);if("gone"===n&&!0===r.contentsRendered)yu(Z(o=r.clearContents).call(o,r),0)}})),this}},{key:"findPage",value:function(t){var e;return wp(e=this.getOption("pages")).call(e,(function(e){return e.id===t}))}},{key:"pageLoaded",value:function(t){this.trigger("pageLoaded",t)}},{key:"pagesLoaded",value:function(t){this.trigger("pagesLoaded",t)}},{key:"beforeNavigation",value:function(t){var e=t.newPosition,n=this.getVerso(),r=n.getPageSpreadFromPosition(e),i=this.pageSpreads.get(r.getId()),o=n.getPageSpreadCount(),a=n.pageSpreadEls[t.newPosition],s=e/(o-1)*100,l=this.formatProgressLabel(i);this.els.root.setAttribute("data-navigating",!0),this.renderPageSpreads(),this.resetIdleTimer(),this.startIdleTimer(),this.trigger("beforeNavigation",{verso:t,pageSpread:i,newSpreadEl:a,progress:s,progressLabel:l,pageSpreadCount:o,newPositionIsEnd:t.newPosition+1===o})}},{key:"afterNavigation",value:function(t){var e=t.newPosition,n=this.getVerso(),r=n.getPageSpreadFromPosition(e),i=this.pageSpreads.get(r.getId()),o=n.getPageSpreadCount(),a=n.pageSpreadEls[t.newPosition];this.els.root.setAttribute("data-navigating",!1),this.trigger("afterNavigation",{verso:t,pageSpread:i,pageSpreadCount:o,newSpreadEl:a,newPositionIsEnd:t.newPosition+1===o})}},{key:"attemptedNavigation",value:function(t){this.trigger("attemptedNavigation",{verso:t})}},{key:"clicked",value:function(t){if(t.isInsideContent){var e=t.pageEl.getAttribute("data-id"),n=this.findPage(e);this.trigger("clicked",{verso:t,page:n})}}},{key:"doubleClicked",value:function(t){if(t.isInsideContent){var e=t.pageEl.getAttribute("data-id"),n=this.findPage(e);this.trigger("doubleClicked",{verso:t,page:n})}}},{key:"pressed",value:function(t){if(t.isInsideContent){var e=t.pageEl.getAttribute("data-id"),n=this.findPage(e);this.trigger("pressed",{verso:t,page:n})}}},{key:"contextmenu",value:function(t){if(t.isInsideContent){var e=t.pageEl.getAttribute("data-id"),n=this.findPage(e);this.trigger("contextmenu",{verso:t,page:n})}}},{key:"panStart",value:function(){this.resetIdleTimer(),this.trigger("panStart",{scale:this.getVerso().transform.scale})}},{key:"panEnd",value:function(){this.startIdleTimer(),this.trigger("panEnd")}},{key:"zoomedIn",value:function(t){var e=t.position,n=this.getVerso().getPageSpreadFromPosition(e),r=this.pageSpreads.get(n.getId());null==r||r.zoomIn(),this.els.root.setAttribute("data-zoomed-in",!0),this.trigger("zoomedIn",{verso:t,pageSpread:r})}},{key:"zoomedOut",value:function(t){var e=t.position,n=this.getVerso().getPageSpreadFromPosition(e),r=this.pageSpreads.get(n.getId());null==r||r.zoomOut(),this.els.root.setAttribute("data-zoomed-in",!1),this.trigger("zoomedOut",{verso:t,pageSpread:r})}},{key:"getPageMode",value:function(){var t=this.getOption("pageMode");if(null==t){var e=this.els.root.offsetWidth;t=this.els.root.offsetHeight/e<.8?"double":"single"}return t}},{key:"resetIdleTimer",value:function(){return clearTimeout(this.idleTimeout),this.els.root.setAttribute("data-idle",!1),this}},{key:"startIdleTimer",value:function(){var t=this;return this.idleTimeout=yu((function(){t.els.root.setAttribute("data-idle",!0)}),this.getOption("idleDelay")),this}},{key:"switchPageMode",value:function(t){var e,n,r;if(this.pageMode===t)return this;var i=this.getVerso(),o=i.getPageSpreadFromPosition(i.getPosition()).getPageIds(),a=this.getVerso().el.querySelectorAll(".sgn-pp__page-spread");return this.pageMode=t,this.pageSpreads.update(this.pageMode),fn(e=Vp(a)).call(e,(function(t){t.parentNode.removeChild(t)})),this.els.pages.parentNode.insertBefore(this.pageSpreads.getFrag(),this.els.pages),i.refresh(),i.navigateTo(i.getPageSpreadPositionFromPageId(o[0]),{duration:0}),fn(n=i.pageSpreads).call(n,Z(r=this.overridePageSpreadContentRect).call(r,this)),this}},{key:"overridePageSpreadContentRect",value:function(t){var e=this;if("page"===t.getType())return t.getContentRect=function(){return e.getContentRect(t)}}},{key:"resize",value:function(){var t=this.getPageMode();null==this.getOption("pageMode")&&t!==this.pageMode?this.switchPageMode(t):this.trigger("resized")}},{key:"unload",value:function(){this.trigger("disappeared")}}]),n}(ts);function Pg(t){var e=function(){if("undefined"==typeof Reflect||!Sr)return!1;if(Sr.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Sr(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ja(t);if(e){var i=Ja(this).constructor;n=Sr(r,arguments,i)}else n=r.apply(this,arguments);return $a(this,n)}}Ag.prototype.defaults={pages:[],pageSpreadWidth:100,pageSpreadMaxZoomScale:2.3,idleDelay:1e3,resizeDelay:400,color:"#ffffff"};var Og=function(t){Fa(n,t);var e=Pg(n);function n(t,r){var i,o,a,s,l,c,u,h;return Oa(this,n),(h=e.call(this)).eventTracker=t,h.id=r,h.hidden=!0,h.pageSpread=null,Z(h).call(h,"appeared",Z(i=h.appeared).call(i,ja(h))),Z(h).call(h,"disappeared",Z(o=h.disappeared).call(o,ja(h))),Z(h).call(h,"beforeNavigation",Z(a=h.beforeNavigation).call(a,ja(h))),Z(h).call(h,"afterNavigation",Z(s=h.afterNavigation).call(s,ja(h))),Z(h).call(h,"attemptedNavigation",Z(l=h.attemptedNavigation).call(l,ja(h))),Z(h).call(h,"panStart",Z(c=h.panStart).call(c,ja(h))),Z(h).call(h,"destroyed",Z(u=h.destroy).call(u,ja(h))),h}return La(n,[{key:"destroy",value:function(){this.pageSpreadDisappeared()}},{key:"trackOpened",value:function(){return null==this.eventTracker||this.eventTracker.trackPagedPublicationOpened({"pp.id":this.id,vt:this.eventTracker.createViewToken(this.id)}),this}},{key:"trackPageSpreadDisappeared",value:function(t){var e=this;return null==this.eventTracker||fn(t).call(t,(function(t){e.eventTracker.trackPagedPublicationPageDisappeared({"pp.id":e.id,"ppp.n":t,vt:e.eventTracker.createViewToken(e.id,t)})})),this}},{key:"appeared",value:function(t){this.pageSpreadAppeared(t.pageSpread)}},{key:"disappeared",value:function(){this.pageSpreadDisappeared()}},{key:"beforeNavigation",value:function(){this.pageSpreadDisappeared()}},{key:"afterNavigation",value:function(t){this.pageSpreadAppeared(t.pageSpread)}},{key:"attemptedNavigation",value:function(t){this.pageSpreadAppeared(t.pageSpread)}},{key:"panStart",value:function(t){1===t.scale&&this.pageSpreadDisappeared()}},{key:"pageSpreadAppeared",value:function(t){t&&!0===this.hidden&&(this.pageSpread=t,this.hidden=!1)}},{key:"pageSpreadDisappeared",value:function(){var t;this.pageSpread&&!1===this.hidden&&(this.trackPageSpreadDisappeared(ys(t=this.pageSpread.getPages()).call(t,(function(t){return t.pageNumber}))),this.hidden=!0,this.pageSpread=null)}}]),n}(ts);function Ig(t){var e=function(){if("undefined"==typeof Reflect||!Sr)return!1;if(Sr.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Sr(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ja(t);if(e){var i=Ja(this).constructor;n=Sr(r,arguments,i)}else n=r.apply(this,arguments);return $a(this,n)}}var Cg=function(t){Fa(n,t);var e=Ig(n);function n(){var t,r,i,o,a;return Oa(this,n),(a=e.call(this)).currentPageSpreadId=null,a.pageSpreadsLoaded={},a.cache={},Z(a).call(a,"hotspotsReceived",Z(t=a.hotspotsReceived).call(t,ja(a))),Z(a).call(a,"afterNavigation",Z(r=a.afterNavigation).call(r,ja(a))),Z(a).call(a,"pagesLoaded",Z(i=a.pagesLoaded).call(i,ja(a))),Z(a).call(a,"resized",Z(o=a.resized).call(o,ja(a))),a}return La(n,[{key:"renderHotspots",value:function(t){var e,n=document.createDocumentFragment(),r=t.versoPageSpread.getContentRect(),i=t.pageSpread.getEl(),o=i.querySelectorAll(".sgn-pp__hotspot"),a=i.getBoundingClientRect();for(var s in fn(e=Vp(o)).call(e,(function(t){t.parentNode.removeChild(t)})),t.hotspots){var l=t.hotspots[s],c=this.getPosition(t.pages,t.ratio,l),u=this.renderHotspot(l,c,r,a);n.appendChild(u)}return i.appendChild(n),this}},{key:"renderHotspot",value:function(t,e,n,r){var i=document.createElement("div"),o=Math.round(n.height/100*e.top),a=Math.round(n.width/100*e.left),s=Math.round(n.width/100*e.width),l=Math.round(n.height/100*e.height);return o+=Math.round(n.top),a+=Math.round(n.left),o-=r.top,a-=r.left,i.className="sgn-pp__hotspot verso__overlay",null!=t.id&&i.setAttribute("data-id",t.id),null!=t.type&&i.setAttribute("data-type",t.type),i.innerHTML=Xh.render("",t),i.style.top="".concat(o,"px"),i.style.left="".concat(a,"px"),i.style.width="".concat(s,"px"),i.style.height="".concat(l,"px"),i}},{key:"getPosition",value:function(t,e,n){var r=null,i=null,o=null,a=null,s=ys(t).call(t,(function(t){return t.pageNumber}));for(var l in n.locations){var c;-1!==th(s).call(s,+l)&&fn(c=n.locations[l]).call(c,(function(e){var n=Ld(e,2),c=n[0],u=n[1];if(t[1]&&s[1]===+l&&(c+=1),c/=t.length,null==r&&(r=o=c,i=a=u),c<r&&(r=c),c>o&&(o=c),u<i&&(i=u),u>a)return a=u}))}return{top:i/e*100,left:100*r,width:100*(o-r),height:(a-i)/e*100}}},{key:"requestHotspots",value:function(t,e){this.trigger("hotspotsRequested",{id:t,pages:e})}},{key:"hotspotsReceived",value:function(t){var e=t.pageSpread.getId();this.setCache(e,t),this.renderHotspots(t)}},{key:"getCache",value:function(t){return this.cache[t]}},{key:"setCache",value:function(t,e){return this.cache[t]=e,this}},{key:"afterNavigation",value:function(t){if(null!=t.pageSpread){var e=t.pageSpread.getId();this.currentPageSpreadId=e,this.pageSpreadsLoaded[e]&&this.requestHotspots(e,t.pageSpread.getPages())}}},{key:"pagesLoaded",value:function(t){this.pageSpreadsLoaded[t.pageSpreadId]=!0,this.currentPageSpreadId===t.pageSpreadId&&this.requestHotspots(t.pageSpreadId,t.pages)}},{key:"resized",value:function(){var t=this.getCache(this.currentPageSpreadId);t&&this.renderHotspots(t)}}]),n}(ts);function Lg(t,e){var n;if(void 0===zp||null==Mp(t)){if(hs(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return jg(t,e);var r=sf(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Vp(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jg(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=Np(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function jg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Rg(t){var e=function(){if("undefined"==typeof Reflect||!Sr)return!1;if(Sr.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Sr(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ja(t);if(e){var i=Ja(this).constructor;n=Sr(r,arguments,i)}else n=r.apply(this,arguments);return $a(this,n)}}function Dg(t,e,n,r){var i;return $h({el:n,header:sd("paged_publication.hotspot_picker.header"),x:e.verso.x,y:e.verso.y,items:ys(i=In(t).call(t,(function(t){return"offer"===t.type}))).call(i,(function(t){return{id:t.id,title:t.offer.heading,subtitle:t.offer.pricing.currency+""+t.offer.pricing.price}}))},(function(e){return r(wp(t).call(t,(function(t){return t.id===e.id})))})).destroy}var Ng=function(t){Fa(n,t);var e=Rg(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Oa(this,n),(r=e.call(this)).el=t,r.options=i,r._core=new Ag(r.el,{id:r.options.id,pages:r.options.pages,pageSpreadWidth:r.options.pageSpreadWidth,pageSpreadMaxZoomScale:r.options.pageSpreadMaxZoomScale,pageId:r.options.pageId,idleDelay:r.options.idleDelay,resizeDelay:r.options.resizeDelay,color:r.options.color}),r._hotspots=new Cg,r._controls=new ud(r.el,{keyboard:r.options.keyboard}),r._eventTracking=new Og(r.options.eventTracker,r.options.id),r.viewSession=ih(),r.hotspots=null,r.hotspotQueue=[],r.popover=null,r._setupEventListeners(),r}return La(n,[{key:"start",value:function(){return this._eventTracking.trackOpened(),this._core.trigger("started"),this}},{key:"destroy",value:function(){return this._core.trigger("destroyed"),this._hotspots.trigger("destroyed"),this._controls.trigger("destroyed"),this._eventTracking.trigger("destroyed"),this.trigger("destroyed"),this}},{key:"navigateTo",value:function(t,e){return this.navigateToIndex(t,e),this}},{key:"navigateToIndex",value:function(t,e){return this._core.getVerso().navigateTo(t,e),this}},{key:"navigateToPageId",value:function(t,e){var n=this._core.getVerso().getPageSpreadPositionFromPageId(t);return this._core.getVerso().navigateTo(n,e)}},{key:"first",value:function(t){return this._core.getVerso().first(t),this}},{key:"prev",value:function(t){return this._core.getVerso().prev(t),this}},{key:"next",value:function(t){return this._core.getVerso().next(t),this}},{key:"last",value:function(t){return this._core.getVerso().last(t),this}},{key:"_setupEventListeners",value:function(){var t,e,n,r,i,o,a,s,l,c,u,h,f,p,d,v,g,y,m,b,w,_,S,x,k,E,T=this;Z(t=this._controls).call(t,"prev",(function(t){T.prev(t)})),Z(e=this._controls).call(e,"next",(function(t){T.next(t)})),Z(n=this._controls).call(n,"first",(function(t){T.first(t)})),Z(r=this._controls).call(r,"last",(function(t){T.last(t)})),Z(i=this._controls).call(i,"close",(function(t){T.destroy(t)})),Z(o=this._hotspots).call(o,"hotspotsRequested",(function(t){T.trigger("hotspotsRequested",t)})),Z(a=this._core).call(a,"appeared",(function(t){T._eventTracking.trigger("appeared",t),T.trigger("appeared",t)})),Z(s=this._core).call(s,"disappeared",(function(t){T._eventTracking.trigger("disappeared",t),T.trigger("disappeared",t)})),Z(l=this._core).call(l,"beforeNavigation",(function(t){T._eventTracking.trigger("beforeNavigation",t),T._controls.trigger("beforeNavigation",t),T.trigger("beforeNavigation",t)})),Z(c=this._core).call(c,"afterNavigation",(function(t){T._eventTracking.trigger("afterNavigation",t),T._hotspots.trigger("afterNavigation",t),T.trigger("afterNavigation",t)})),Z(u=this._core).call(u,"attemptedNavigation",(function(t){T._eventTracking.trigger("attemptedNavigation",t),T.trigger("attemptedNavigation",t)})),Z(h=this._core).call(h,"clicked",(function(t){T._eventTracking.trigger("clicked",t),T.trigger("clicked",t)})),Z(f=this._core).call(f,"doubleClicked",(function(t){T._eventTracking.trigger("doubleClicked",t),T.trigger("doubleClicked",t)})),Z(p=this._core).call(p,"contextmenu",(function(t){T.trigger("contextmenu",t)})),Z(d=this._core).call(d,"pressed",(function(t){T._eventTracking.trigger("pressed",t),T.trigger("pressed",t)})),Z(v=this._core).call(v,"panStart",(function(t){T._eventTracking.trigger("panStart",t),T.trigger("panStart",t)})),Z(g=this._core).call(g,"zoomedIn",(function(t){T._eventTracking.trigger("zoomedIn",t),T.trigger("zoomedIn",t)})),Z(y=this._core).call(y,"zoomedOut",(function(t){T._eventTracking.trigger("zoomedOut",t),T.trigger("zoomedOut",t)})),Z(m=this._core).call(m,"pageLoaded",(function(t){T._eventTracking.trigger("pageLoaded",t),T.trigger("pageLoaded",t)})),Z(b=this._core).call(b,"pagesLoaded",(function(t){T._hotspots.trigger("pagesLoaded",t),T.trigger("pagesLoaded",t)})),Z(w=this._core).call(w,"resized",(function(t){T._hotspots.trigger("resized"),T.trigger("resized",t)})),Z(this).call(this,"hotspotsRequested",Z(_=this.hotspotsRequested).call(_,this)),Z(this).call(this,"beforeNavigation",Z(S=this.beforeNavigation).call(S,this)),Z(this).call(this,"clicked",Z(x=this.clicked).call(x,this)),Z(this).call(this,"contextmenu",Z(k=this.contextmenu).call(k,this)),Z(this).call(this,"pressed",Z(E=this.pressed).call(E,this))}},{key:"pickHotspot",value:function(t,e){var n,r=this;if(null!=this.hotspots){var i,o;if(null!=this.popover)null===(i=(o=this.popover).destroy)||void 0===i||i.call(o),this.popover=null;var a=ys(n=t.verso.overlayEls).call(n,(function(t){return r.hotspots[t.getAttribute("data-id")]}));1===a.length?e(a[0]):a.length>1&&(this.popover={destroy:(this.options.pickHotspot||Dg)(a,t,this.el,e)})}}},{key:"processHotspotQueue",value:function(){var t,e=this;null!=this.hotspots&&(this.hotspotQueue=In(t=this.hotspotQueue).call(t,(function(t){var n,r,i={},o=wp(n=e._core.getVerso().pageSpreads).call(n,(function(e){return e.getId()===t.id}));for(r in e.hotspots){var a=e.hotspots[r];if(!i[r]){var s,l=Lg(t.pages);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(a.locations[c.pageNumber]){i[r]={type:a.type,id:a.id,locations:a.locations};break}}}catch(t){l.e(t)}finally{l.f()}}}return e._hotspots.trigger("hotspotsReceived",{pageSpread:e._core.pageSpreads.get(t.id),versoPageSpread:o,ratio:e.options.hotspotRatio,pages:t.pages,hotspots:i}),!1})))}},{key:"hotspotsRequested",value:function(t){this.hotspotQueue.push(t),this.processHotspotQueue()}},{key:"applyHotspots",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.hotspots=t,this.processHotspotQueue()}},{key:"beforeNavigation",value:function(){var t,e;null===(t=this.popover)||void 0===t||null===(e=t.destroy)||void 0===e||e.call(t)}},{key:"clicked",value:function(t){var e=this;this.pickHotspot(t,(function(t){e.trigger("hotspotClicked",t)}))}},{key:"contextmenu",value:function(t){var e=this;this.pickHotspot(t,(function(t){e.trigger("hotspotContextmenu",t)}))}},{key:"pressed",value:function(t){var e=this;this.pickHotspot(t,(function(t){e.trigger("hotspotPressed",t)}))}}]),n}(ts),Mg=Cr.Promise,zg=ii("iterator"),Fg=Array.prototype,Ug=function(t,e,n){if(mh(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},Bg=ii("iterator"),Vg=function(t){var e=t.return;if(void 0!==e)return zr(e.call(t)).value},Hg=function(t,e){this.stopped=t,this.result=e},Wg=function(t,e,n){var r,i,o,a,s,l,c,u,h=n&&n.that,f=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),v=Ug(e,h,1+f+d),g=function(t){return r&&Vg(r),new Hg(!0,t)},y=function(t){return f?(zr(t),d?v(t[0],t[1],g):v(t[0],t[1])):d?v(t,g):v(t)};if(p)r=t;else{if("function"!=typeof(i=function(t){if(null!=t)return t[Bg]||t["@@iterator"]||Ri[Zo(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(u=i)&&(Ri.Array===u||Fg[zg]===u)){for(o=0,a=ci(t.length);a>o;o++)if((s=y(t[o]))&&s instanceof Hg)return s;return new Hg(!1)}r=i.call(t)}for(l=r.next;!(c=l.call(r)).done;){try{s=y(c.value)}catch(t){throw Vg(r),t}if("object"==typeof s&&s&&s instanceof Hg)return s}return new Hg(!1)},qg=ii("iterator"),Xg=!1;try{var Yg=0,Gg={next:function(){return{done:!!Yg++}},return:function(){Xg=!0}};Gg[qg]=function(){return this},Array.from(Gg,(function(){throw 2}))}catch(rh){}var $g,Zg,Kg,Jg=Si("navigator","userAgent")||"",Qg=/(iphone|ipod|ipad).*applewebkit/i.test(Jg),ty="process"==Er(Cr.process),ey=Cr.location,ny=Cr.setImmediate,ry=Cr.clearImmediate,iy=Cr.process,oy=Cr.MessageChannel,ay=Cr.Dispatch,sy=0,ly={},cy="onreadystatechange",uy=function(t){if(ly.hasOwnProperty(t)){var e=ly[t];delete ly[t],e()}},hy=function(t){return function(){uy(t)}},fy=function(t){uy(t.data)},py=function(t){Cr.postMessage(t+"",ey.protocol+"//"+ey.host)};ny&&ry||(ny=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return ly[++sy]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},$g(sy),sy},ry=function(t){delete ly[t]},ty?$g=function(t){iy.nextTick(hy(t))}:ay&&ay.now?$g=function(t){ay.now(hy(t))}:oy&&!Qg?(Kg=(Zg=new oy).port2,Zg.port1.onmessage=fy,$g=Ug(Kg.postMessage,Kg,1)):Cr.addEventListener&&"function"==typeof postMessage&&!Cr.importScripts&&ey&&"file:"!==ey.protocol&&!xr(py)?($g=py,Cr.addEventListener("message",fy,!1)):$g=cy in Nr("script")?function(t){xi.appendChild(Nr("script")).onreadystatechange=function(){xi.removeChild(this),uy(t)}}:function(t){setTimeout(hy(t),0)});var dy,vy,gy,yy,my,by,wy,_y,Sy={set:ny,clear:ry},xy=/web0s(?!.*chrome)/i.test(Jg),ky=no.f,Ey=Sy.set,Ty=Cr.MutationObserver||Cr.WebKitMutationObserver,Ay=Cr.document,Py=Cr.process,Oy=Cr.Promise,Iy=ky(Cr,"queueMicrotask"),Cy=Iy&&Iy.value;Cy||(dy=function(){var t,e;for(ty&&(t=Py.domain)&&t.exit();vy;){e=vy.fn,vy=vy.next;try{e()}catch(t){throw vy?yy():gy=void 0,t}}gy=void 0,t&&t.enter()},Qg||ty||xy||!Ty||!Ay?Oy&&Oy.resolve?(wy=Oy.resolve(void 0),_y=wy.then,yy=function(){_y.call(wy,dy)}):yy=ty?function(){Py.nextTick(dy)}:function(){Ey.call(Cr,dy)}:(my=!0,by=Ay.createTextNode(""),new Ty(dy).observe(by,{characterData:!0}),yy=function(){by.data=my=!my}));var Ly,jy,Ry=Cy||function(t){var e={fn:t,next:void 0};gy&&(gy.next=e),vy||(vy=e,yy()),gy=e},Dy=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=mh(e),this.reject=mh(n)},Ny={f:function(t){return new Dy(t)}},My=function(t,e){if(zr(t),jr(e)&&e.constructor===t)return e;var n=Ny.f(t);return(0,n.resolve)(e),n.promise},zy=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Fy=Cr.process,Uy=Fy&&Fy.versions,By=Uy&&Uy.v8;By?jy=(Ly=By.split("."))[0]+Ly[1]:Jg&&(!(Ly=Jg.match(/Edge\/(\d+)/))||Ly[1]>=74)&&(Ly=Jg.match(/Chrome\/(\d+)/))&&(jy=Ly[1]);var Vy,Hy,Wy,qy,Xy=jy&&+jy,Yy=Sy.set,Gy=ii("species"),$y="Promise",Zy=Ki.get,Ky=Ki.set,Jy=Ki.getterFor($y),Qy=Mg,tm=Cr.TypeError,em=Cr.document,nm=Cr.process,rm=Si("fetch"),im=Ny.f,om=im,am=!!(em&&em.createEvent&&Cr.dispatchEvent),sm="function"==typeof PromiseRejectionEvent,lm="unhandledrejection",cm=go($y,(function(){if(!(Fi(Qy)!==String(Qy))){if(66===Xy)return!0;if(!ty&&!sm)return!0}if(Xy>=51&&/native code/.test(Qy))return!1;var t=Qy.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[Gy]=e,!(t.then((function(){}))instanceof e)})),um=cm||!function(t,e){if(!e&&!Xg)return!1;var n=!1;try{var r={};r[qg]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}((function(t){Qy.all(t).catch((function(){}))})),hm=function(t){var e;return!(!jr(t)||"function"!=typeof(e=t.then))&&e},fm=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;Ry((function(){for(var r=t.value,i=1==t.state,o=0;n.length>o;){var a,s,l,c=n[o++],u=i?c.ok:c.fail,h=c.resolve,f=c.reject,p=c.domain;try{u?(i||(2===t.rejection&&gm(t),t.rejection=1),!0===u?a=r:(p&&p.enter(),a=u(r),p&&(p.exit(),l=!0)),a===c.promise?f(tm("Promise-chain cycle")):(s=hm(a))?s.call(a,h,f):h(a)):f(r)}catch(t){p&&!l&&p.exit(),f(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&dm(t)}))}},pm=function(t,e,n){var r,i;am?((r=em.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),Cr.dispatchEvent(r)):r={promise:e,reason:n},!sm&&(i=Cr["on"+t])?i(r):t===lm&&function(t,e){var n=Cr.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},dm=function(t){Yy.call(Cr,(function(){var e,n=t.facade,r=t.value;if(vm(t)&&(e=zy((function(){ty?nm.emit("unhandledRejection",r,n):pm(lm,n,r)})),t.rejection=ty||vm(t)?2:1,e.error))throw e.value}))},vm=function(t){return 1!==t.rejection&&!t.parent},gm=function(t){Yy.call(Cr,(function(){var e=t.facade;ty?nm.emit("rejectionHandled",e):pm("rejectionhandled",e,t.value)}))},ym=function(t,e,n){return function(r){t(e,r,n)}},mm=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,fm(t,!0))},bm=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw tm("Promise can't be resolved itself");var r=hm(e);r?Ry((function(){var n={done:!1};try{r.call(e,ym(bm,n,t),ym(mm,n,t))}catch(e){mm(n,e,t)}})):(t.value=e,t.state=1,fm(t,!1))}catch(e){mm({done:!1},e,t)}}};cm&&(Qy=function(t){!function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}(this,Qy,$y),mh(t),Vy.call(this);var e=Zy(this);try{t(ym(bm,e),ym(mm,e))}catch(t){mm(e,t)}},(Vy=function(t){Ky(this,{type:$y,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(t,e,n){for(var r in e)ro(t,r,e[r],n);return t}(Qy.prototype,{then:function(t,e){var n=Jy(this),r=im(wh(this,Qy));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=ty?nm.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&fm(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Hy=function(){var t=new Vy,e=Zy(t);this.promise=t,this.resolve=ym(bm,e),this.reject=ym(mm,e)},Ny.f=im=function(t){return t===Qy||t===Wy?new Hy(t):om(t)},"function"==typeof Mg&&(qy=Mg.prototype.then,ro(Mg.prototype,"then",(function(t,e){var n=this;return new Qy((function(t,e){qy.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof rm&&mo({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return My(Qy,rm.apply(Cr,arguments))}}))),mo({global:!0,wrap:!0,forced:cm},{Promise:Qy}),Io(Qy,$y,!1),zs($y),Wy=Si($y),mo({target:$y,stat:!0,forced:cm},{reject:function(t){var e=im(this);return e.reject.call(void 0,t),e.promise}}),mo({target:$y,stat:!0,forced:cm},{resolve:function(t){return My(this,t)}}),mo({target:$y,stat:!0,forced:um},{all:function(t){var e=this,n=im(e),r=n.resolve,i=n.reject,o=zy((function(){var n=mh(e.resolve),o=[],a=0,s=1;Wg(t,(function(t){var l=a++,c=!1;o.push(void 0),s++,n.call(e,t).then((function(t){c||(c=!0,o[l]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=im(e),r=n.reject,i=zy((function(){var i=mh(e.resolve);Wg(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var wm=bl.charAt,_m="String Iterator",Sm=Ki.set,xm=Ki.getterFor(_m);Bo(String,"String",(function(t){Sm(this,{type:_m,string:String(t),index:0})}),(function(){var t,e=xm(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=wm(n,r),e.index+=t.length,{value:t,done:!1})}));var km=e((function(t){var e=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),a=new P(r||[]);return o._invoke=function(t,e,n){var r=h;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var l=u(t,e,n);if("normal"===l.type){if(r=n.done?d:f,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=d,n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h="suspendedStart",f="suspendedYield",p="executing",d="completed",v={};function g(){}function y(){}function m(){}var b={};b[o]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(O([])));_&&_!==n&&r.call(_,o)&&(b=_);var S=m.prototype=g.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(i,o,a,s){var l=u(t[i],t,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function E(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=u(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function O(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:I}}function I(){return{value:e,done:!0}}return y.prototype=S.constructor=m,m.constructor=y,y.displayName=l(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},x(k.prototype),k.prototype[a]=function(){return this},t.AsyncIterator=k,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new k(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(S),l(S,s,"Generator"),S[o]=function(){return this},S.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=O,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));V({target:"Promise",stat:!0},{try:function(t){var e=Dc.f(this),n=Mc(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}});var Em=fu;function Tm(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Em.resolve(l).then(r,i)}var Am=function(t){return function(){var e=this,n=arguments;return new Em((function(r,i){var o=t.apply(e,n);function a(t){Tm(o,r,i,a,s,"next",t)}function s(t){Tm(o,r,i,a,s,"throw",t)}a(void 0)}))}};function Pm(t,e){var n=gr(t);if(dr){var r=dr(t);e&&(r=In(r).call(r,(function(e){return yn(t,e).enumerable}))),n.push.apply(n,r)}return n}var Om=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Oa(this,t),Qa(this,"fetchDetails",(function(t){return Vh({url:"/v2/catalogs/".concat(e.options.id)},t)})),Qa(this,"fetchPages",(function(t){return Vh({url:"/v2/catalogs/".concat(e.options.id,"/pages")},t)})),Qa(this,"fetchHotspots",(function(t){return Vh({url:"/v2/catalogs/".concat(e.options.id,"/hotspots")},t)})),this.options=n}var e;return La(t,[{key:"createViewer",value:function(t,e){return new Ng(this.options.el,function(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)fn(n=Pm(Object(r),!0)).call(n,(function(e){Qa(t,e,r[e])}));else if(xt)vt(t,xt(r));else{var i;fn(i=Pm(Object(r))).call(i,(function(e){J(t,e,yn(r,e))}))}}return t}({id:this.options.id,ownedBy:t.details.dealer_id,color:"#"+t.details.branding.pageflip.color,hotspotRatio:t.details.dimensions.height,keyboard:!0,pageId:this.options.pageId,eventTracker:this.options.eventTracker,pages:this.transformPages(t.pages)},e))}},{key:"transformPages",value:function(t){return ys(t).call(t,(function(t,e){var n=e+1;return{id:"page"+n,label:n+"",pageNumber:n,images:{medium:t.view,large:t.zoom}}}))}},{key:"applyHotspots",value:function(t,e){var n={};fn(e).call(e,(function(t){return n[t.id]=t})),t.applyHotspots(n)}},{key:"fetch",value:(e=Am(km.mark((function t(e){var n,r,i,o;return km.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pu.all([this.fetchDetails(),this.fetchPages()]);case 3:if(n=t.sent,r=Ld(n,2),i=r[0],o=r[1],!i||!o){t.next=11;break}e(null,{details:i,pages:o}),t.next=12;break;case 11:throw new Error;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),e(t.t0);case 17:case"end":return t.stop()}}),t,this,[[0,14]])}))),function(t){return e.apply(this,arguments)})}]),t}(),Im=Object.freeze({__proto__:null,Viewer:Ng,Bootstrapper:Om}),Cm="sgn-",Lm=function(){try{var t=window.sessionStorage;return t["".concat(Cm,"test-storage")]="foobar",delete t["".concat(Cm,"test-storage")],t}catch(t){return{}}}();var jm,Rm=Object.freeze({__proto__:null,get:function(t){try{var e;return JSON.parse(Lm[Pa(e="".concat(Cm)).call(e,t)])}catch(t){}},set:function(t,e){try{var n;Lm[Pa(n="".concat(Cm)).call(n,t)]=ks(e)}catch(t){}}}),Dm={config:new as,util:dh,translations:ld};Dm.storage={local:Sf,session:Rm,cookie:Ch},Dm.EventsKit=If,Dm.CoreKit=Hh,Dm.PagedPublicationKit=Im,Dm.IncitoPublicationKit=od,Dm.CoreUIKit=Zh;var Nm=Dm.storage.cookie.get("session");if("object"==typeof Nm&&Dm.config.set({coreSessionToken:Nm.token,coreSessionClientId:Nm.client_id}),Z(jm=Dm.config).call(jm,"change",(function(t){var e,n=t.eventTracker,r=t.appKey;if((r||n)&&(null===(e=n||Dm.config.get("eventTracker"))||void 0===e?void 0:e.trackId)===(r||Dm.config.get("appKey")))throw rh(new Error("Track identifier must not be identical to app key. Go to https://shopgun.com/developers/apps to get a track identifier for your app"));null!=n&&(n.eventsTrackUrl||n.setEventsTrackUrl(Dm.config.get("eventsTrackUrl")));var i=t.eventsTrackUrl;i&&Dm.config.get("eventTracker")&&Dm.config.get("eventTracker").setEventsTrackUrl(i)})),eh()){var Mm=document.getElementById("sgn-sdk");if(Mm){var zm=Mm.getAttribute("data-app-key"),Fm=Mm.getAttribute("data-track-id"),Um={};zm&&(Um.appKey=zm),Fm&&(Um.eventTracker=new Dm.EventsKit.Tracker({trackId:Fm})),Dm.config.set(Um)}}return Dm}));
//# sourceMappingURL=sgn-sdk.min.js.map
