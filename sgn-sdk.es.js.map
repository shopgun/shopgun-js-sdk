{"version":3,"file":"sgn-sdk.es.js","sources":["../lib/coffeescript/util.coffee","../lib/coffeescript/config.coffee","../lib/coffeescript/translations.coffee","../lib/coffeescript/core.coffee","../lib/coffeescript/sgn.coffee","../lib/coffeescript/storage/client-local.coffee","../lib/coffeescript/storage/client-session.coffee","../lib/coffeescript/storage/client-cookie.coffee","../lib/coffeescript/kits/events/tracker.coffee","../lib/coffeescript/kits/events/index.coffee","../lib/coffeescript/kits/core/request.coffee","../lib/coffeescript/kits/core/session.coffee","../lib/coffeescript/kits/core/index.coffee","../lib/coffeescript/kits/paged-publication/page-spread.coffee","../lib/coffeescript/kits/paged-publication/page-spreads.coffee","../lib/coffeescript/kits/paged-publication/core.coffee","../lib/coffeescript/kits/paged-publication/hotspots.coffee","../lib/coffeescript/key-codes.coffee","../lib/coffeescript/kits/paged-publication/controls.coffee","../lib/coffeescript/kits/paged-publication/event-tracking.coffee","../lib/coffeescript/kits/paged-publication/viewer.coffee","../lib/coffeescript/kits/paged-publication/bootstrapper.coffee","../lib/coffeescript/kits/paged-publication/index.coffee","../lib/coffeescript/kits/incito-publication/event-tracking.coffee","../lib/coffeescript/kits/incito-publication/viewer.coffee","../lib/coffeescript/kits/incito-publication/controls.coffee","../lib/coffeescript/kits/incito-publication/bootstrapper.coffee","../lib/coffeescript/kits/incito-publication/index.coffee","../vendor/gator.js","../lib/coffeescript/kits/core-ui/offer-details.coffee","../lib/coffeescript/kits/core-ui/popover.coffee","../lib/coffeescript/kits/core-ui/single-choice-popover.coffee","../lib/coffeescript/kits/core-ui/index.coffee","../lib/coffeescript/index.coffee"],"sourcesContent":["util =\n    isBrowser: ->\n        typeof window is 'object' and typeof document is 'object'\n\n    isNode: ->\n        typeof process is 'object'\n\n    error: (err, options) ->\n        err.message = err.message or null\n\n        if typeof options is 'string'\n            err.message = options\n        else if typeof options is 'object' and options?\n            for key, value of options\n                err[key] = value\n\n            err.message = options.message if options.message?\n            err.code = options.code or options.name if options.code? or options.message?\n            err.stack = options.stack if options.stack?\n\n        err.name = options and options.name or err.name or err.code or 'Error'\n        err.time = new Date()\n\n        err\n\n    uuid: ->\n        'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace /[xy]/g, (c) ->\n            r = Math.random() * 16 | 0\n            v = if c is 'x' then r else (r & 0x3|0x8)\n\n            v.toString 16\n\n    getQueryParam: (field, url) ->\n        href = if url then url else window.location.href\n        reg = new RegExp '[?&]' + field + '=([^&#]*)', 'i'\n        string = reg.exec href\n\n        if string then string[1] else undefined\n\n    getRandomNumberBetween: (from, to) ->\n        Math.floor(Math.random() * to) + from\n\n    getOS: ->\n        name = null\n        ua = window.navigator.userAgent\n\n        if ua.indexOf('Windows') > -1\n            name = 'Windows'\n        else if ua.indexOf('Mac') > -1\n            name = 'macOS'\n        else if ua.indexOf('X11') > -1\n            name = 'unix'\n        else if ua.indexOf('Linux') > -1\n            name = 'Linux'\n        else if ua.indexOf('iOS') > -1\n            name = 'iOS'\n        else if ua.indexOf('Android') > -1\n            name = 'Android'\n\n        name\n    \n    getDeviceCategory: ->\n        deviceCategory = 'desktop'\n\n        if navigator.platform is 'iPod' or navigator.platform is 'iPhone'\n            deviceCategory = 'mobile'\n        else if navigator.platform is 'iPad'\n            deviceCategory = 'tablet'\n        else if navigator.platform is 'Android' or /android/gi.test(navigator.userAgent)\n            if /tablet/gi.test(navigator.userAgent)\n                deviceCategory = 'tablet'\n            else\n                deviceCategory = 'mobile'\n\n        deviceCategory\n    \n    getPointer: ->\n        pointer = 'fine'\n\n        pointer = 'coarse' if matchMedia('(pointer:coarse)').matches\n\n        pointer\n    \n    getOrientation: (width, height) ->\n        if width is height\n            'quadratic'\n        else if width > height\n            'horizontal'\n        else\n            'vertical'\n\n    getScreenDimensions: ->\n        density = window.devicePixelRatio ? 1\n        logical =\n            width: window.screen.width\n            height: window.screen.height\n        physical =\n            width: Math.round logical.width * density\n            height: Math.round logical.height * density\n\n        density: density\n        logical: logical\n        physical: physical\n\n    getUtcOffsetSeconds: ->\n        now = new Date()\n        jan1 = new Date now.getFullYear(), 0, 1, 0, 0, 0, 0\n        tmp = jan1.toGMTString()\n        jan2 = new Date tmp.substring(0, tmp.lastIndexOf(' ') - 1)\n        stdTimeOffset = (jan1 - jan2) / 1000\n\n        stdTimeOffset\n\n    getUtcDstOffsetSeconds: ->\n        new Date().getTimezoneOffset() * 60 * -1\n\n    getColorBrightness: (color) ->\n        color = color.replace '#', ''\n        hex = parseInt (hex + '').replace(/[^a-f0-9]/gi, ''), 16\n        rgb = []\n        sum = 0\n        x = 0\n\n        while x < 3\n            s = parseInt(color.substring(2 * x, 2), 16)\n            rgb[x] = s\n\n            sum += s if s > 0\n\n            ++x\n\n        if sum <= 381 then 'dark' else 'light'\n\n    btoa: (str) ->\n        if util.isBrowser()\n            btoa str\n        else\n            buffer = null\n\n            if str instanceof Buffer\n                buffer = str\n            else\n                buffer = new Buffer str.toString(), 'binary'\n\n            buffer.toString 'base64'\n\n    chunk: (arr, size) ->\n        results = []\n\n        while arr.length\n            results.push arr.splice(0, size)\n\n        results\n\n    throttle: (fn, threshold = 250, scope) ->\n        last = undefined\n        deferTimer = undefined\n\n        ->\n            context = scope or @\n            now = new Date().getTime()\n            args = arguments\n\n            if last and now < last + threshold\n                clearTimeout deferTimer\n\n                deferTimer = setTimeout ->\n                    last = now\n                    \n                    fn.apply context, args\n                \n                    return\n                , threshold\n            else\n                last = now\n                fn.apply context, args\n\n            return\n\n    loadImage: (src, callback) ->\n        img = new Image()\n\n        img.onload = -> callback null, img.width, img.height\n        img.onerror = -> callback new Error()\n        img.src = src\n\n        img\n\n    distance: (lat1, lng1, lat2, lng2) ->\n        radlat1 = Math.PI * lat1 / 180\n        radlat2 = Math.PI * lat2 / 180\n        theta = lng1 - lng2\n        radtheta = Math.PI * theta / 180\n        dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta)\n        dist = Math.acos(dist)\n        dist = dist * 180 / Math.PI\n        dist = dist * 60 * 1.1515\n        dist = dist * 1.609344 * 1000\n\n        dist\n\n    async:\n        parallel: (asyncCalls, sharedCallback) ->\n            counter = asyncCalls.length\n            allResults = []\n            k = 0\n\n            makeCallback = (index) ->\n                ->\n                    results = []\n                    i = 0\n\n                    counter--\n\n                    while i < arguments.length\n                        results.push arguments[i]\n                        i++\n\n                    allResults[index] = results\n\n                    sharedCallback allResults if counter is 0\n\n                    return\n\n            while k < asyncCalls.length\n                asyncCalls[k] makeCallback(k)\n                k++\n\n            return\n\n    # Method for wrapping a function that takes a callback in any position\n    # to return promises if no callback is given in a call.\n    # The second argument, cbParameterIndex, is the position of the callback in the original functions parameter list.\n    # CoffeeScript optional parameters messes with this function arity detection,\n    # not sure what to do about that, other than always setting cbParameterIndex at callsites.\n    promiseCallbackInterop: (fun, cbParameterIndex = fun.length - 1) ->\n        # This is the function that actually wraps and calls a method to return a promise.\n        makePromise = (fun, cbParameterIndex, parameters) ->\n            new Promise(\n                (resolve, reject) ->\n                    neoCallback = (error, result) ->\n                        if error then reject error else resolve result\n\n                    callParameters = []\n                    for i in [0...((Math.max parameters.length, cbParameterIndex) + 1)]\n                        callParameters.push if i is cbParameterIndex then neoCallback else parameters[i]\n\n                    fun.apply this, callParameters\n            )\n        # Wrapper function that decides what to do per-call.\n        (...parameters) ->\n            if typeof parameters[cbParameterIndex] is 'function'\n                # Callback given, do a regular old call.\n                fun.apply null, parameters\n            else if typeof Promise is 'function'\n                # No callback given, and we have promise support, use makePromise to wrap the call.\n                makePromise fun, cbParameterIndex, parameters\n            else\n                # Ain't got callback, ain't got promise support; we gotta tell the developer.\n                throw new Error(\"\"\"To be able to use this asynchronous method you should:\nSupply a callback function as argument ##{1+cbParameterIndex}.\nThis callback function will be called with the method call response.\nAlternatively, when supported, it can return a Promise if no callback function is given.\n                \"\"\")\n\nmodule.exports = util\n","MicroEvent = require 'microevent'\nConfig = class Config\n    keys: [\n        'appVersion',\n        'appKey',\n        'appSecret',\n        'authToken',\n        'eventTracker',\n        'locale',\n        'coreSessionToken',\n        'coreSessionClientId',\n        'coreUrl',\n        'eventsTrackUrl'\n    ]\n\n    constructor: ->\n        @attrs = {}\n\n        return\n\n    set: (config = {}) ->\n        changedAttributes = {}\n\n        for key, value of config\n            if key in @keys\n                @attrs[key] = value\n                changedAttributes[key] = value\n\n        @trigger 'change', changedAttributes\n\n        return\n\n    get: (option) ->\n        @attrs[option]\n\nMicroEvent.mixin Config\n\nmodule.exports = Config\n","Mustache = require 'mustache'\npairs =\n    'paged_publication.hotspot_picker.header': 'Which offer did you mean?'\n    'incito_publication.product_picker.header': 'Which product?'\n\nmodule.exports =\n    t: (key, view) ->\n        template = pairs[key] ? ''\n\n        Mustache.render template, view\n\n    update: (translations) ->\n        for key, value of translations\n            pairs[key] = value\n\n        return\n","Config = require './config'\ntranslations = require './translations'\nutil = require './util'\nconfig = new Config()\n\n# Set default values.\nconfig.set\n    locale: 'en_US'\n    coreUrl: 'https://squid-api.tjek.com'\n    eventsTrackUrl: 'https://wolf-api.tjek.com/sync'\n\nmodule.exports =\n    config: config\n\n    translations: translations\n\n    util: util\n","module.exports = require './core'\n","SGN = require '../sgn'\nprefixKey = 'sgn-'\n\nmodule.exports =\n    key: 'sgn-'\n\n    storage: do ->\n        try\n            storage = window.localStorage\n\n            storage[\"#{prefixKey}test-storage\"] = 'foobar'\n            delete storage[\"#{prefixKey}test-storage\"]\n\n            storage\n        catch\n            {}\n\n    get: (key) ->\n        try\n            JSON.parse @storage[\"#{prefixKey}#{key}\"]\n\n    set: (key, value) ->\n        try\n            @storage[\"#{prefixKey}#{key}\"] = JSON.stringify value\n\n        @\n","SGN = require '../sgn'\nprefixKey = 'sgn-'\n\nmodule.exports =\n    key: 'sgn-'\n\n    storage: do ->\n        try\n            storage = window.sessionStorage\n\n            storage[\"#{prefixKey}test-storage\"] = 'foobar'\n            delete storage[\"#{prefixKey}test-storage\"]\n\n            storage\n        catch\n            {}\n\n    get: (key) ->\n        try\n            JSON.parse @storage[\"#{prefixKey}#{key}\"]\n\n    set: (key, value) ->\n        try\n            @storage[\"#{prefixKey}#{key}\"] = JSON.stringify value\n\n        @\n","SGN = require '../sgn'\nprefixKey = 'sgn-'\n\nmodule.exports =\n    get: (key) ->\n        return if SGN.util.isNode()\n\n        try\n            name = \"#{prefixKey}#{key}=\"\n            ca = document.cookie.split ';'\n\n            for c in ca\n                ct = c.trim()\n\n                value = ct.substring(name.length, ct.length) if ct.indexOf(name) is 0\n\n            value = JSON.parse value\n        catch err\n            value = {}\n\n        value\n\n    set: (key, value) ->\n        return if SGN.util.isNode()\n\n        try\n            days = 365\n            date = new Date()\n            str = JSON.stringify value\n\n            date.setTime date.getTime() + days * 24 * 60 * 60 * 1000\n\n            document.cookie = \"#{prefixKey}#{key}=#{str};expires=#{date.toUTCString()};path=/\"\n        catch err\n\n        return\n\n\n","fetch = require 'cross-fetch'\nmd5 = require 'md5'\nSGN = require '../../sgn'\nclientLocalStorage = require '../../storage/client-local'\n\ngetPool = ->\n    data = clientLocalStorage.get 'event-tracker-pool'\n    data = [] if Array.isArray(data) is false\n    data = data.filter (evt) ->\n        typeof evt._i is 'string'\n\n    data\n\npool = getPool()\n\nmodule.exports = class Tracker\n    defaultOptions:\n        trackId: null\n        poolLimit: 1000\n\n    constructor: (options = {}) ->\n        for key, value of @defaultOptions\n            @[key] = options[key] or value\n\n        @location =\n            geohash: null\n            time: null\n            country: null\n        @dispatching = false\n\n        dispatch()\n\n        return\n\n    trackEvent: (type, properties = {}, version = 2) ->\n        throw SGN.util.error(new Error('Event type is required')) if typeof type isnt 'number'\n        return if not @trackId?\n\n        if SGN.config.get('appKey') is @trackId\n            # coffeelint: disable=max_line_length\n            throw SGN.util.error(new Error('Track identifier must not be identical to app key. Go to https://shopgun.com/developers/apps to get a track identifier for your app'))\n        \n        now = new Date().getTime()\n        evt = Object.assign {}, properties, {\n            '_e': type\n            '_v': version\n            '_i': SGN.util.uuid()\n            '_t': Math.round(new Date().getTime() / 1000)\n            '_a': @trackId\n        }\n\n        evt['l.h'] = @location.geohash if @location.geohash?\n        evt['l.ht'] = @location.time if @location.time?\n        evt['l.c'] = @location.country if @location.country?\n\n        pool.push evt\n        pool.shift() while pool.length > @poolLimit\n\n        dispatch()\n\n        @\n\n    setLocation: (location = {}) ->\n        for key, value of location\n            if @location.hasOwnProperty(key)\n                @location[key] = value\n\n        @\n\n    trackPagedPublicationOpened: (properties, version) ->\n        @trackEvent 1, properties, version\n    \n    trackPagedPublicationPageDisappeared: (properties, version) ->\n        @trackEvent 2, properties, version\n    \n    trackOfferOpened: (properties, version) ->\n        @trackEvent 3, properties, version\n    \n    trackSearched: (properties, version) ->\n        @trackEvent 5, properties, version\n\n    trackIncitoPublicationOpened: (properties, version) ->\n        @trackEvent 11, properties, version\n    \n    createViewToken: (...parts) ->\n        str = [SGN.client.id].concat(parts).join ''\n        viewToken = SGN.util.btoa String.fromCharCode.apply(null, (md5(str, {asBytes: true})).slice(0,8))\n\n        viewToken\n\ndispatching = false\ndispatchLimit = 100\n\nship = (events = []) ->\n    req = fetch SGN.config.get('eventsTrackUrl'),\n        method: 'post'\n        timeout: 1000 * 20\n        headers:\n            'Content-Type': 'application/json; charset=utf-8'\n        body: JSON.stringify(events: events)\n    \n    req.then (response) -> response.json()\n\ndispatchRetryInterval = null\n_dispatch = ->\n    return if dispatching is true or pool.length is 0\n\n    events = pool.slice 0, dispatchLimit\n    nacks = 0\n    dispatching = true\n\n    ship(events)\n        .then (response) ->\n            dispatching = false\n            if dispatchRetryInterval\n                clearInterval dispatchRetryInterval\n                dispatchRetryInterval = null\n\n            response.events.forEach (resEvent) ->\n                if resEvent.status is 'validation_error' or resEvent.status is 'ack'\n                    pool = pool.filter (poolEvent) -> poolEvent._i isnt resEvent.id\n                else if 'nack'\n                    nacks++\n\n                return\n\n            # Keep dispatching until the pool size reaches a sane level.\n            dispatch() if pool.length >= dispatchLimit and nacks is 0\n\n            return\n        .catch (err) ->\n            dispatching = false\n            # Try dispatching again in 20 seconds, if we aren't already trying\n            if not dispatchRetryInterval\n                # coffeelint: disable=max_line_length\n                console.warn \"We're gonna keep trying, but there was an error while dispatching events:\", err\n\n                dispatchRetryInterval = setInterval dispatch, 20000\n\n            return\n    \n    return\ndispatch = SGN.util.throttle _dispatch, 4000\n\nclientLocalStorage.set 'event-tracker-pool', []\n\ntry\n    window.addEventListener 'beforeunload', (e) ->\n        pool = pool.concat getPool()\n\n        clientLocalStorage.set 'event-tracker-pool', pool\n\n        return\n    , false\n","module.exports =\n    Tracker: require './tracker'","fetch = require 'cross-fetch'\nSGN = require '../../sgn'\n{promiseCallbackInterop} = require '../../util'\n\nrequest = (options = {}, callback, secondTime) ->\n    SGN.CoreKit.session.ensure (err) ->\n        return callback(err) if err?\n\n        url = SGN.config.get('coreUrl') + (options.url ? '')\n        headers = options.headers ? {}\n        json = if typeof options.json is 'boolean' then options.json else true\n        token = SGN.config.get 'coreSessionToken'\n        appKey = SGN.config.get 'appKey'\n        appVersion = SGN.config.get 'appVersion'\n        appSecret = SGN.config.get 'appSecret'\n        locale = SGN.config.get 'locale'\n        qs = options.qs ? {}\n        geo = options.geolocation\n        body = options.body\n        \n        headers['X-Api-Key'] = appKey\n        headers['X-Token'] = token\n        headers['X-Signature'] = SGN.CoreKit.session.sign appSecret, token if appSecret?\n\n        if json\n            headers['Content-Type'] = 'application/json'\n            headers['Accept'] = 'application/json'\n\n            if body\n                body = JSON.stringify(body)\n\n        qs.r_locale = locale if locale?\n        qs.api_av = appVersion if appVersion?\n\n        if geo?\n            qs.r_lat = geo.latitude if geo.latitude? and not qs.r_lat?\n            qs.r_lng = geo.longitude if geo.longitude? and not qs.r_lng?\n            qs.r_radius = geo.radius if geo.radius? and not qs.r_radius?\n            qs.r_sensor = geo.sensor if geo.sensor? and not qs.r_sensor?\n        \n        if Object.keys(qs).length\n            url += '?' + (Object.keys(qs).map (k) ->\n                if Array.isArray k\n                    return qs[k].map((val) -> \"#{encodeURIComponent(k)}[]=#{encodeURIComponent(val)}\").join '&'\n                \n                \"#{encodeURIComponent(k)}=#{encodeURIComponent(qs[k])}\"\n            ).join '&'\n\n        req = fetch url,\n            method: options.method\n            body: body\n            headers: headers\n        \n        req\n            .then (response) ->\n                response.json().then (json) ->\n                    token = SGN.config.get 'coreSessionToken'\n                    responseToken = response.headers.get 'x-token'\n\n                    SGN.CoreKit.session.saveToken responseToken if responseToken and token isnt responseToken\n\n                    if response.status >= 200 and response.status < 300 or response.status is 304\n                        callback null, json\n                    else\n                        if secondTime isnt true and json?.code in [1101, 1107, 1108]\n                            SGN.config.set coreSessionToken: undefined\n\n                            request options, callback, true\n                        else\n                            callback SGN.util.error(new Error('Core API error'),\n                                code: 'CoreAPIError'\n                                statusCode: response.status\n                            ), json\n                    \n                    return\n            .catch callback\n\n    return\n\nmodule.exports = promiseCallbackInterop request, 1\n","fetch = require 'cross-fetch'\nsha256 = require 'sha256'\nSGN = require '../../sgn'\nclientCookieStorage = require '../../storage/client-cookie'\ncallbackQueue = []\nrenewed = false\n\nsession =\n    ttl: 1 * 60 * 60 * 24 * 60\n\n    saveToken: (token) ->\n        throw new Error('No token provided for saving') if not token\n\n        SGN.config.set coreSessionToken: token\n\n        session.saveCookie()\n\n        return\n\n    saveClientId: (clientId) ->\n        SGN.config.set coreSessionClientId: clientId\n\n        session.saveCookie()\n\n        return\n\n    saveCookie: ->\n        clientCookieStorage.set 'session',\n            token: SGN.config.get 'coreSessionToken'\n            client_id: SGN.config.get 'coreSessionClientId'\n\n        return\n\n    create: (callback) ->\n        key = SGN.config.get 'appKey'\n        ttl = session.ttl\n\n        req = fetch SGN.config.get('coreUrl') + \"/v2/sessions?api_key=#{key}&token_ttl=#{ttl}\",\n            method: 'post'\n\n        req\n            .then (response) ->\n                response.json().then (json) ->\n                    if response.status is 201\n                        session.saveToken json.token\n                        session.saveClientId json.client_id\n\n                        callback null, json\n                    else\n                        callback new Error('Could not create session')\n                    \n                    return\n            .catch (err) ->\n                callback err\n\n                return\n        \n        return\n    \n    update: (callback) ->\n        headers = {}\n        token = SGN.config.get 'coreSessionToken'\n        appSecret = SGN.config.get 'appSecret'\n\n        headers['X-Token'] = token\n        headers['X-Signature'] = session.sign appSecret, token if appSecret?\n\n        req = fetch SGN.config.get('coreUrl') + '/v2/sessions',\n            method: 'put'\n            headers: headers\n\n        req\n            .then (response) ->\n                response.json().then (json) ->\n                    if response.status is 200\n                        session.saveToken json.token\n                        session.saveClientId json.client_id\n\n                        callback null, json\n                    else\n                        callback new Error('Could not update session')\n                    \n                    return\n            .catch (err) ->\n                callback err\n\n                return\n\n        return\n\n    renew: (callback) ->\n        headers = {}\n        token = SGN.config.get 'coreSessionToken'\n        appSecret = SGN.config.get 'appSecret'\n\n        headers['X-Token'] = token\n        headers['X-Signature'] = session.sign appSecret, token if appSecret\n\n        req = fetch SGN.config.get('coreUrl') + '/v2/sessions',\n            method: 'put'\n            headers: headers\n\n        req\n            .then (response) ->\n                response.json().then (json) ->\n                    if response.status is 200\n                        session.saveToken json.token\n                        session.saveClientId json.client_id\n\n                        callback null, json\n                    else\n                        callback new Error('Could not renew session')\n                    \n                    return\n            .catch (err) ->\n                callback err\n\n                return\n\n        return\n\n    ensure: (callback) ->\n        queueCount = callbackQueue.length\n        complete = (err) ->\n            callbackQueue = callbackQueue.filter (fn) ->\n                fn err\n\n                false\n\n            return\n\n        callbackQueue.push callback\n\n        if queueCount is 0\n            if not SGN.config.get('coreSessionToken')?\n                session.create complete\n            else if renewed is false\n                renewed = true\n                session.renew (err) ->\n                    if err?\n                        session.create complete\n                    else\n                        complete()\n                    \n                    return\n            else\n                complete()\n\n        return\n\n    sign: (appSecret, token) ->\n        sha256 [appSecret, token].join('')\n\nmodule.exports = session\n","SGN = require '../../sgn'\nrequest = require './request'\nsession = require './session'\n\nmodule.exports =\n    request: request\n\n    session: session\n","MicroEvent = require 'microevent'\nSGN = require '../../sgn'\n\nclass PagedPublicationPageSpread\n    constructor: (@options = {}) ->\n        @contentsRendered = false\n        @hotspotsRendered = false\n        @el = @renderEl()\n\n        return\n\n    getId: ->\n        @options.id\n\n    getEl: ->\n        @el\n\n    getPages: ->\n        @options.pages\n\n    renderEl: ->\n        el = document.createElement 'div'\n        pageIds = @getPages().map (page) -> page.id\n\n        el.className = 'verso__page-spread sgn-pp__page-spread'\n\n        el.setAttribute 'data-id', @getId()\n        el.setAttribute 'data-type', 'page'\n        el.setAttribute 'data-width', @options.width\n        el.setAttribute 'data-page-ids', pageIds.join(',')\n        el.setAttribute 'data-max-zoom-scale', @options.maxZoomScale\n        el.setAttribute 'data-zoomable', false\n\n        el\n\n    renderContents: ->\n        id = @getId()\n        el = @getEl()\n        pages = @getPages()\n        pageCount = pages.length\n        imageLoads = 0\n\n        pages.forEach (page, i) =>\n            image = page.images.medium\n            pageEl = document.createElement 'div'\n            loaderEl = document.createElement 'div'\n\n            pageEl.className = 'sgn-pp__page verso__page'\n            pageEl.setAttribute('data-id', page.id) if page.id?\n\n            if pageCount is 2\n                pageEl.className += if i is 0 then ' verso-page--verso' else ' verso-page--recto'\n\n            pageEl.appendChild loaderEl\n            el.appendChild pageEl\n\n            loaderEl.className = 'sgn-pp-page__loader'\n            loaderEl.innerHTML = \"<span>#{page.label}</span>\"\n\n            SGN.util.loadImage image, (err, width, height) =>\n                if not err?\n                    isComplete = ++imageLoads is pageCount\n\n                    pageEl.style.backgroundImage = \"url(#{image})\"\n                    pageEl.setAttribute 'data-width', width\n                    pageEl.setAttribute 'data-height', height\n                    pageEl.innerHTML = '&nbsp;'\n\n                    el.setAttribute('data-zoomable', true) if isComplete\n\n                    @trigger 'pageLoaded', pageSpreadId: id, page: page\n                    @trigger 'pagesLoaded', pageSpreadId: id, pages: pages if isComplete\n                else\n                    loaderEl.innerHTML = '<span>!</span>'\n\n                return\n\n            return\n\n        @contentsRendered = true\n\n        @\n\n    clearContents: (pageSpread, versoPageSpread) ->\n        @el.innerHTML = ''\n        @contentsRendered = false\n\n        @\n\n    zoomIn: ->\n        pageEls = [].slice.call @el.querySelectorAll('.sgn-pp__page')\n        pages = @getPages()\n\n        pageEls.forEach (pageEl) =>\n            id = pageEl.getAttribute 'data-id'\n            page = pages.find (page) -> page.id is id\n            image = page.images.large\n\n            SGN.util.loadImage image, (err) =>\n                if not err? and @el.getAttribute('data-active') is 'true'\n                    pageEl.setAttribute 'data-image', pageEl.style.backgroundImage\n                    pageEl.style.backgroundImage = \"url(#{image})\"\n\n                return\n\n            return\n\n        return\n\n    zoomOut: ->\n        pageEls = [].slice.call @el.querySelectorAll('.sgn-pp__page[data-image]')\n\n        pageEls.forEach (pageEl) ->\n            pageEl.style.backgroundImage = pageEl.getAttribute 'data-image'\n            \n            pageEl.removeAttribute 'data-image'\n\n            return\n\n        return\n\nMicroEvent.mixin PagedPublicationPageSpread\n\nmodule.exports = PagedPublicationPageSpread\n","MicroEvent = require 'microevent'\nPageSpread = require './page-spread'\nSGN = require '../../sgn'\n\nclass PagedPublicationPageSpreads\n    constructor: (@options) ->\n        @collection = []\n        @ids = {}\n\n        return\n\n    get: (id) ->\n        @ids[id]\n\n    getFrag: ->\n        frag = document.createDocumentFragment()\n\n        @collection.forEach (pageSpread) -> frag.appendChild pageSpread.el\n\n        frag\n\n    update: (pageMode = 'single') ->\n        pageSpreads = []\n        ids = {}\n        pages = @options.pages.slice()\n        width = @options.width\n        maxZoomScale = @options.maxZoomScale\n\n        if pageMode is 'single'\n            pages.forEach (page) -> pageSpreads.push [page]\n        else\n            firstPage = pages.shift()\n            lastPage = if pages.length % 2 is 1 then pages.pop() else null\n            midstPageSpreads = SGN.util.chunk pages, 2\n\n            pageSpreads.push [firstPage] if firstPage?\n            midstPageSpreads.forEach (midstPages) -> pageSpreads.push midstPages.map (page) -> page\n            pageSpreads.push [lastPage] if lastPage?\n\n        @collection = pageSpreads.map (pages, i) =>\n            id = \"#{pageMode}-#{i}\"\n            pageSpread = new PageSpread\n                width: width\n                maxZoomScale: maxZoomScale\n                pages: pages\n                id: id\n\n            pageSpread.bind 'pageLoaded', (e) => @trigger 'pageLoaded', e\n            pageSpread.bind 'pagesLoaded', (e) => @trigger 'pagesLoaded', e\n\n            ids[id] = pageSpread\n\n            pageSpread\n        @ids = ids\n\n        @\n\nMicroEvent.mixin PagedPublicationPageSpreads\n\nmodule.exports = PagedPublicationPageSpreads\n","MicroEvent = require 'microevent'\nVerso = require 'verso-browser'\nPageSpreads = require './page-spreads'\nclientLocalStorage = require '../../storage/client-local'\nSGN = require '../../sgn'\n\nclass PagedPublicationCore\n    defaults:\n        pages: []\n        pageSpreadWidth: 100\n        pageSpreadMaxZoomScale: 2.3\n        idleDelay: 1000\n        resizeDelay: 400\n        color: '#ffffff'\n\n    constructor: (el, options = {}) ->\n        @options = @makeOptions options, @defaults\n        @pageId = @getOption 'pageId'\n        @els =\n            root: el\n            pages: el.querySelector '.sgn-pp__pages'\n            verso: el.querySelector '.verso'\n        @pageMode = @getPageMode()\n        @pageSpreads = new PageSpreads\n            pages: @getOption 'pages'\n            maxZoomScale: @getOption 'pageSpreadMaxZoomScale'\n            width: @getOption 'pageSpreadWidth'\n\n        @pageSpreads.bind 'pageLoaded', @pageLoaded.bind(@)\n        @pageSpreads.bind 'pagesLoaded', @pagesLoaded.bind(@)\n\n        @setColor @getOption('color')\n\n        # It's important to insert the page spreads before instantiating Verso.\n        @els.pages.parentNode.insertBefore @pageSpreads.update(@pageMode).getFrag(), @els.pages\n\n        @verso = @createVerso()\n\n        @bind 'started', @start.bind(@)\n        @bind 'destroyed', @destroy.bind(@)\n\n        return\n\n    start: ->\n        verso = @getVerso()\n        verso.start()\n    \n        verso.pageSpreads.forEach @overridePageSpreadContentRect.bind(@)\n\n        @resizeListener = SGN.util.throttle @resize, @getOption('resizeDelay')\n\n        window.addEventListener 'resize', @resizeListener, false\n        window.addEventListener 'beforeunload', @unload, false\n\n        @els.root.setAttribute 'data-started', ''\n        @els.root.setAttribute 'tabindex', '-1'\n        @els.root.focus()\n        \n        return\n\n    destroy: ->\n        verso = @getVerso()\n        pageSpreadEls = verso.el.querySelectorAll '.sgn-pp__page-spread'\n\n        @els.root.removeAttribute 'data-started'\n        @els.root.removeAttribute 'data-idle'\n        @els.root.removeAttribute 'data-navigating'\n        @els.root.removeAttribute 'data-color-brightness'\n        @els.root.removeAttribute 'data-zoomed-in'\n\n        @els.root.style.backgroundColor = '#ffffff'\n\n        pageSpreadEl.parentNode.removeChild pageSpreadEl for pageSpreadEl in pageSpreadEls\n\n        verso.destroy()\n\n        window.removeEventListener 'resize', @resizeListener, false\n        window.removeEventListener 'beforeunload', @unload, false\n\n        return\n\n    makeOptions: (options, defaults) ->\n        opts = {}\n\n        opts[key] = options[key] ? defaults[key] for key, value of options\n\n        opts\n\n    getOption: (key) ->\n        @options[key]\n\n    setColor: (color) ->\n        @els.root.setAttribute 'data-color-brightness', SGN.util.getColorBrightness(color)\n        @els.root.style.backgroundColor = color\n\n        return\n\n    createVerso: ->\n        verso = new Verso @els.verso, pageId: @pageId\n\n        verso.bind 'beforeNavigation', @beforeNavigation\n        verso.bind 'afterNavigation', @afterNavigation\n        verso.bind 'attemptedNavigation', @attemptedNavigation\n        verso.bind 'clicked', @clicked\n        verso.bind 'doubleClicked', @doubleClicked\n        verso.bind 'pressed', @pressed\n        verso.bind 'contextmenu', @contextmenu\n        verso.bind 'panStart', @panStart\n        verso.bind 'panEnd', @panEnd\n        verso.bind 'zoomedIn', @zoomedIn\n        verso.bind 'zoomedOut', @zoomedOut\n\n        verso\n\n    getVerso: ->\n        @verso\n\n    getContentRect: (pageSpread) ->\n        rect =\n            top: 0\n            left: 0\n            right: 0\n            bottom: 0\n            width: 0\n            height: 0\n        pageEls = pageSpread.getPageEls()\n        pageEl = pageEls[0]\n        pageCount = pageEls.length\n\n        return rect if not pageCount\n        \n        scale = @getVerso().transform.scale\n        pageWidth = pageEl.offsetWidth * pageCount * scale\n        pageHeight = pageEl.offsetHeight * scale\n        imageRatio = +pageEl.getAttribute('data-height') / (+pageEl.getAttribute('data-width') * pageCount)\n        actualHeight = pageHeight\n        actualWidth = actualHeight / imageRatio\n        actualWidth = Math.min pageWidth, actualWidth\n        actualHeight = actualWidth * imageRatio\n        clientRect = pageEl.getBoundingClientRect()\n\n        rect.width = actualWidth\n        rect.height = actualHeight\n        rect.top = clientRect.top + (pageHeight - actualHeight) / 2\n        rect.left = clientRect.left + (pageWidth - actualWidth) / 2\n        rect.right = rect.width + rect.left\n        rect.bottom = rect.height + rect.top\n\n        rect\n\n    formatProgressLabel: (pageSpread) ->\n        pages = pageSpread?.options.pages ? []\n        pageIds = pages.map (page) -> page.id\n        pageLabels = pages.map (page) -> page.label\n        pageCount = @getOption('pages').length\n        label = if pageIds.length > 0 then pageLabels.join('-') + ' / ' + pageCount else null\n\n        label\n\n    renderPageSpreads: ->\n        @getVerso().pageSpreads.forEach (pageSpread) =>\n            visibility = pageSpread.getVisibility()\n            match = @pageSpreads.get pageSpread.getId()\n\n            if match?\n                if visibility is 'visible' and match.contentsRendered is false\n                    setTimeout match.renderContents.bind(match), 0\n                if visibility is 'gone' and match.contentsRendered is true\n                    setTimeout match.clearContents.bind(match), 0\n\n            return\n\n        @\n\n    findPage: (pageId) ->\n        @getOption('pages').find (page) -> page.id is pageId\n\n    pageLoaded: (e) ->\n        @trigger 'pageLoaded', e\n\n        return\n\n    pagesLoaded: (e) ->\n        @trigger 'pagesLoaded', e\n\n        return\n\n    beforeNavigation: (e) =>\n        position = e.newPosition\n        theVerso = @getVerso()\n        versoPageSpread = theVerso.getPageSpreadFromPosition position\n        pageSpread = @pageSpreads.get versoPageSpread.getId()\n        pageSpreadCount = theVerso.getPageSpreadCount()\n        newSpreadEl = theVerso.pageSpreadEls[e.newPosition]\n        progress = position / (pageSpreadCount - 1) * 100\n        progressLabel = @formatProgressLabel pageSpread\n\n        @els.root.setAttribute 'data-navigating', true\n\n        @renderPageSpreads()\n        @resetIdleTimer()\n        @startIdleTimer()\n        @trigger 'beforeNavigation',\n            verso: e\n            pageSpread: pageSpread\n            newSpreadEl: newSpreadEl\n            progress: progress\n            progressLabel: progressLabel\n            pageSpreadCount: pageSpreadCount\n            newPositionIsEnd: e.newPosition + 1 == pageSpreadCount\n\n        return\n\n    afterNavigation: (e) =>\n        position = e.newPosition\n        theVerso = @getVerso()\n        versoPageSpread = theVerso.getPageSpreadFromPosition position\n        pageSpread = @pageSpreads.get versoPageSpread.getId()\n        pageSpreadCount = theVerso.getPageSpreadCount()\n        newSpreadEl = theVerso.pageSpreadEls[e.newPosition]\n\n        @els.root.setAttribute 'data-navigating', false\n\n        @trigger 'afterNavigation',\n            verso: e\n            pageSpread: pageSpread\n            pageSpreadCount: pageSpreadCount\n            newSpreadEl: newSpreadEl\n            newPositionIsEnd: e.newPosition + 1 == pageSpreadCount\n\n        return\n\n    attemptedNavigation: (e) =>\n        @trigger 'attemptedNavigation', verso: e\n\n        return\n\n    clicked: (e) =>\n        if e.isInsideContent\n            pageId = e.pageEl.getAttribute 'data-id'\n            page = @findPage pageId\n\n            @trigger 'clicked', verso: e, page: page\n\n        return\n\n    doubleClicked: (e) =>\n        if e.isInsideContent\n            pageId = e.pageEl.getAttribute 'data-id'\n            page = @findPage pageId\n\n            @trigger 'doubleClicked', verso: e, page: page\n\n        return\n\n    pressed: (e) =>\n        if e.isInsideContent\n            pageId = e.pageEl.getAttribute 'data-id'\n            page = @findPage pageId\n\n            @trigger 'pressed', verso: e, page: page\n\n        return\n\n    contextmenu: (e) =>\n        if e.isInsideContent\n            pageId = e.pageEl.getAttribute 'data-id'\n            page = @findPage pageId\n\n            @trigger 'contextmenu', verso: e, page: page\n\n        return\n\n    panStart: =>\n        @resetIdleTimer()\n        @trigger 'panStart', scale: @getVerso().transform.scale\n\n        return\n\n    panEnd: =>\n        @startIdleTimer()\n        @trigger 'panEnd'\n\n        return\n\n    zoomedIn: (e) =>\n        position = e.position\n        versoPageSpread = @getVerso().getPageSpreadFromPosition position\n        pageSpread = @pageSpreads.get versoPageSpread.getId()\n\n        pageSpread.zoomIn() if pageSpread?\n\n        @els.root.setAttribute 'data-zoomed-in', true\n        @trigger 'zoomedIn', verso: e, pageSpread: pageSpread\n\n        return\n\n    zoomedOut: (e) =>\n        position = e.position\n        versoPageSpread = @getVerso().getPageSpreadFromPosition position\n        pageSpread = @pageSpreads.get versoPageSpread.getId()\n\n        pageSpread.zoomOut() if pageSpread?\n\n        @els.root.setAttribute 'data-zoomed-in', false\n        @trigger 'zoomedOut', verso: e, pageSpread: pageSpread\n\n        return\n\n    getPageMode: ->\n        pageMode = @getOption 'pageMode'\n\n        if not pageMode?\n            width = @els.root.offsetWidth\n            height = @els.root.offsetHeight\n\n            pageMode = if height / width < 0.8 then 'double' else 'single'\n\n        pageMode\n\n    resetIdleTimer: ->\n        clearTimeout @idleTimeout\n\n        @els.root.setAttribute 'data-idle', false\n\n        @\n\n    startIdleTimer: ->\n        @idleTimeout = setTimeout =>\n            @els.root.setAttribute 'data-idle', true\n\n            return\n        , @getOption('idleDelay')\n\n        @\n\n    switchPageMode: (pageMode) ->\n        return @ if @pageMode is pageMode\n\n        verso = @getVerso()\n        pageIds = verso.getPageSpreadFromPosition(verso.getPosition()).getPageIds()\n        pageSpreadEls = @getVerso().el.querySelectorAll '.sgn-pp__page-spread'\n\n        @pageMode = pageMode\n\n        @pageSpreads.update @pageMode\n\n        pageSpreadEl.parentNode.removeChild pageSpreadEl for pageSpreadEl in pageSpreadEls\n        @els.pages.parentNode.insertBefore @pageSpreads.getFrag(), @els.pages\n\n        verso.refresh()\n        verso.navigateTo verso.getPageSpreadPositionFromPageId(pageIds[0]), duration: 0\n        verso.pageSpreads.forEach @overridePageSpreadContentRect.bind(@)\n\n        @\n\n    overridePageSpreadContentRect: (pageSpread) ->\n        if pageSpread.getType() is 'page'\n            pageSpread.getContentRect = => @getContentRect pageSpread\n\n    resize: =>\n        pageMode = @getPageMode()\n\n        if not @getOption('pageMode')? and pageMode isnt @pageMode\n            @switchPageMode pageMode\n        else\n            @trigger 'resized'\n\n        return\n\n    unload: =>\n        @trigger 'disappeared'\n\n        return\n\nMicroEvent.mixin PagedPublicationCore\n\nmodule.exports = PagedPublicationCore\n","MicroEvent = require 'microevent'\nMustache = require 'mustache'\n\nclass PagedPublicationHotspots\n    constructor: ->\n        @currentPageSpreadId = null\n        @pageSpreadsLoaded = {}\n        @cache = {}\n\n        @bind 'hotspotsReceived', @hotspotsReceived.bind(@)\n        @bind 'afterNavigation', @afterNavigation.bind(@)\n        @bind 'pagesLoaded', @pagesLoaded.bind(@)\n        @bind 'resized', @resized.bind(@)\n\n        return\n\n    renderHotspots: (data) ->\n        frag = document.createDocumentFragment()\n        contentRect = data.versoPageSpread.getContentRect()\n        pageSpreadEl = data.pageSpread.getEl()\n        hotspotEls = pageSpreadEl.querySelectorAll '.sgn-pp__hotspot'\n        boundingRect = pageSpreadEl.getBoundingClientRect()\n\n        hotspotEl.parentNode.removeChild hotspotEl for hotspotEl in hotspotEls\n\n        for id, hotspot of data.hotspots\n            position = @getPosition data.pages, data.ratio, hotspot\n            el = @renderHotspot hotspot, position, contentRect, boundingRect\n            \n            frag.appendChild el\n\n        pageSpreadEl.appendChild frag\n\n        @\n\n    renderHotspot: (hotspot, position, contentRect, boundingRect) ->\n        el = document.createElement 'div'\n        top = Math.round contentRect.height / 100 * position.top\n        left = Math.round contentRect.width / 100 * position.left\n        width = Math.round contentRect.width / 100 * position.width\n        height = Math.round contentRect.height / 100 * position.height\n\n        top += Math.round contentRect.top\n        left += Math.round contentRect.left\n        top -= boundingRect.top\n        left -= boundingRect.left\n\n        el.className = 'sgn-pp__hotspot verso__overlay'\n        el.setAttribute 'data-id', hotspot.id if hotspot.id?\n        el.setAttribute 'data-type', hotspot.type if hotspot.type?\n        el.innerHTML = Mustache.render '', hotspot\n\n        el.style.top = \"#{top}px\"\n        el.style.left = \"#{left}px\"\n        el.style.width = \"#{width}px\"\n        el.style.height = \"#{height}px\"\n\n        el\n\n    getPosition: (pages, ratio, hotspot) ->\n        minX = null\n        minY = null\n        maxX = null\n        maxY = null\n        pageNumbers = pages.map (page) -> page.pageNumber\n\n        for pageNumber of hotspot.locations\n            continue if pageNumbers.indexOf(+pageNumber) is -1\n\n            hotspot.locations[pageNumber].forEach (coords) ->\n                x = coords[0]\n                y = coords[1]\n\n                x +=1 if pages[1] and pageNumbers[1] is +pageNumber\n                x /= pages.length\n\n                if not minX?\n                    minX = maxX = x\n                    minY = maxY = y\n\n                minX = x if x < minX\n                maxX = x if x > maxX\n                minY = y if y < minY\n                maxY = y if y > maxY\n\n        width = maxX - minX\n        height = maxY - minY\n\n        top: minY / ratio * 100\n        left: minX * 100\n        width: width * 100\n        height: height / ratio * 100\n\n    requestHotspots: (pageSpreadId, pages) ->\n        @trigger 'hotspotsRequested',\n            id: pageSpreadId\n            pages: pages\n\n        return\n\n    hotspotsReceived: (e) ->\n        pageSpreadId = e.pageSpread.getId()\n\n        @setCache pageSpreadId, e\n        @renderHotspots e\n\n        return\n\n    getCache: (pageSpreadId) ->\n        @cache[pageSpreadId]\n\n    setCache: (pageSpreadId, data) ->\n        @cache[pageSpreadId] = data\n\n        @\n\n    afterNavigation: (e) ->\n        return if not e.pageSpread?\n\n        id = e.pageSpread.getId()\n\n        @currentPageSpreadId = id\n        @requestHotspots id, e.pageSpread.getPages() if @pageSpreadsLoaded[id]\n\n        return\n\n    pagesLoaded: (e) ->\n        @pageSpreadsLoaded[e.pageSpreadId] = true\n        @requestHotspots e.pageSpreadId, e.pages if @currentPageSpreadId is e.pageSpreadId\n\n        return\n\n    resized: (e) ->\n        data = @getCache @currentPageSpreadId\n\n        @renderHotspots data if data?\n\n        return\n\nMicroEvent.mixin PagedPublicationHotspots\n\nmodule.exports = PagedPublicationHotspots\n\n\n","module.exports =\n    ESC: 27\n    ARROW_RIGHT: 39\n    ARROW_LEFT: 37\n    SPACE: 32\n    NUMBER_ONE: 49\n","MicroEvent = require 'microevent'\nSGN = require '../../sgn'\nkeyCodes = require '../../key-codes'\n\nclass PagedPublicationControls\n    constructor: (el, @options = {}) ->\n        @els =\n            root: el\n            progress: el.querySelector '.sgn-pp__progress'\n            progressBar: el.querySelector '.sgn-pp-progress__bar'\n            progressLabel: el.querySelector '.sgn-pp__progress-label'\n            prevControl: el.querySelector '.sgn-pp__control[data-direction=prev]'\n            nextControl: el.querySelector '.sgn-pp__control[data-direction=next]'\n            close: el.querySelector '.sgn-pp--close'\n\n        @keyDownHandler = SGN.util.throttle @keyDown, 150, @\n        @els.root.addEventListener 'keydown', @keyDownHandler, false if @options.keyboard is true\n        @els.prevControl.addEventListener 'mousedown', @prevClicked, false if @els.prevControl?\n        @els.nextControl.addEventListener 'mousedown', @nextClicked, false if @els.nextControl?\n        @els.close.addEventListener 'mousedown', @closeClicked, false if @els.close?\n\n        @bind 'beforeNavigation', @beforeNavigation\n        @bind 'destroyed', @destroy\n\n        return\n\n    destroy: =>\n        @els.root.removeEventListener 'keydown', @keyDownHandler, false if @options.keyboard is true\n        @els.prevControl.removeEventListener 'mousedown', @prevClicked, false if @els.prevControl?\n        @els.nextControl.removeEventListener 'mousedown', @nextClicked, false if @els.nextControl?\n        @els.close.removeEventListener 'mousedown', @closeClicked, false if @els.close?\n\n        return\n\n    beforeNavigation: (e) =>\n        showProgress = typeof e.progressLabel is 'string' and e.progressLabel.length > 0\n        visibilityClassName = 'sgn-pp--hidden'\n\n        if @els.progress? and @els.progressBar?\n            @els.progressBar.style.width = \"#{e.progress}%\"\n\n            if showProgress is true\n                @els.progress.classList.remove visibilityClassName\n            else\n                @els.progress.classList.add visibilityClassName\n\n        if @els.progressLabel?\n            if showProgress is true\n                @els.progressLabel.textContent = e.progressLabel\n                @els.progressLabel.classList.remove visibilityClassName\n            else\n                @els.progressLabel.classList.add visibilityClassName\n\n        if @els.prevControl?\n            if e.verso.newPosition is 0\n                @els.prevControl.classList.add visibilityClassName\n            else\n                @els.prevControl.classList.remove visibilityClassName\n\n        if @els.nextControl?\n            if e.verso.newPosition is e.pageSpreadCount - 1\n                @els.nextControl.classList.add visibilityClassName\n            else\n                @els.nextControl.classList.remove visibilityClassName\n\n        return\n\n    prevClicked: (e) =>\n        e.preventDefault()\n\n        @trigger 'prev'\n\n        return\n\n    nextClicked: (e) =>\n        e.preventDefault()\n\n        @trigger 'next'\n\n        return\n    \n    closeClicked: (e) =>\n        e.preventDefault()\n\n        @trigger 'close'\n\n        return\n\n    keyDown: (e) =>\n        keyCode = e.keyCode\n\n        if keyCodes.ARROW_LEFT is keyCode\n            @trigger 'prev', duration: 0\n        else if keyCodes.ARROW_RIGHT is keyCode or keyCodes.SPACE is keyCode\n            @trigger 'next', duration: 0\n        else if keyCodes.NUMBER_ONE is keyCode\n            @trigger 'first', duration: 0\n\n        return\n\nMicroEvent.mixin PagedPublicationControls\n\nmodule.exports = PagedPublicationControls\n","MicroEvent = require 'microevent'\n\nclass PagedPublicationEventTracking\n    constructor: (@eventTracker, @id) ->\n        @hidden = true\n        @pageSpread = null\n\n        @bind 'appeared', @appeared.bind(@)\n        @bind 'disappeared', @disappeared.bind(@)\n        @bind 'beforeNavigation', @beforeNavigation.bind(@)\n        @bind 'afterNavigation', @afterNavigation.bind(@)\n        @bind 'attemptedNavigation', @attemptedNavigation.bind(@)\n        @bind 'panStart', @panStart.bind(@)\n        @bind 'destroyed', @destroy.bind(@)\n\n        return\n\n    destroy: ->\n        @pageSpreadDisappeared()\n\n        return\n\n    trackOpened: (properties) ->\n        return @ if not @eventTracker?\n\n        @eventTracker.trackPagedPublicationOpened\n            'pp.id': @id\n            'vt': @eventTracker.createViewToken(@id)\n\n        @\n\n    trackPageSpreadDisappeared: (pageNumbers) ->\n        return @ if not @eventTracker?\n        \n        pageNumbers.forEach (pageNumber) =>\n            @eventTracker.trackPagedPublicationPageDisappeared\n                'pp.id': @id\n                'ppp.n': pageNumber\n                'vt': @eventTracker.createViewToken(@id, pageNumber)\n            \n            return\n\n        @\n\n    appeared: (e) ->\n        @pageSpreadAppeared e.pageSpread\n\n        return\n\n    disappeared: ->\n        @pageSpreadDisappeared()\n\n        return\n\n    beforeNavigation: ->\n        @pageSpreadDisappeared()\n\n        return\n\n    afterNavigation: (e) ->\n        @pageSpreadAppeared e.pageSpread\n\n        return\n\n    attemptedNavigation: (e) ->\n        @pageSpreadAppeared e.pageSpread\n\n        return\n\n    panStart: (e) ->\n        @pageSpreadDisappeared() if e.scale is 1\n\n        return\n\n    pageSpreadAppeared: (pageSpread) ->\n        if pageSpread? and @hidden is true\n            @pageSpread = pageSpread\n            @hidden = false\n\n        return\n\n    pageSpreadDisappeared: ->\n        if @pageSpread? and @hidden is false\n            @trackPageSpreadDisappeared @pageSpread.getPages().map (page) -> page.pageNumber\n\n            @hidden = true\n            @pageSpread = null\n\n        return\n\nMicroEvent.mixin PagedPublicationEventTracking\n\nmodule.exports = PagedPublicationEventTracking","MicroEvent = require 'microevent'\nSGN = require '../../sgn'\nCore = require './core'\nHotspots = require './hotspots'\nControls = require './controls'\nEventTracking = require './event-tracking'\n\n\ndefaultPickHotspot = (hotspots, e, el, callback) ->\n    popover = SGN.CoreUIKit.singleChoicePopover\n        el: el\n        header: SGN.translations.t 'paged_publication.hotspot_picker.header'\n        x: e.verso.x\n        y: e.verso.y\n        items: hotspots\n            .filter (hotspot) -> hotspot.type is 'offer'\n            .map (hotspot) ->\n                id: hotspot.id\n                title: hotspot.offer.heading\n                subtitle: hotspot.offer.pricing.currency + '' + hotspot.offer.pricing.price\n    , (picked) ->\n        callback hotspots.find((hotspot) -> hotspot.id == picked.id)\n    \n    return popover.destroy\n\nclass Viewer\n    constructor: (@el, @options = {}) ->\n        @_core = new Core @el,\n            id: @options.id\n            pages: @options.pages\n            pageSpreadWidth: @options.pageSpreadWidth\n            pageSpreadMaxZoomScale: @options.pageSpreadMaxZoomScale\n            pageId: @options.pageId\n            idleDelay: @options.idleDelay\n            resizeDelay: @options.resizeDelay\n            color: @options.color\n        @_hotspots = new Hotspots()\n        @_controls = new Controls @el, keyboard: @options.keyboard\n        @_eventTracking = new EventTracking @options.eventTracker, @options.id\n        @viewSession = SGN.util.uuid()\n        @hotspots = null\n        @hotspotQueue = []\n        @popover = null\n\n        @_setupEventListeners()\n\n        return\n\n    start: ->\n        @_eventTracking.trackOpened()\n        @_core.trigger 'started'\n\n        @\n\n    destroy: ->\n        @_core.trigger 'destroyed'\n        @_hotspots.trigger 'destroyed'\n        @_controls.trigger 'destroyed'\n        @_eventTracking.trigger 'destroyed'\n\n        @trigger 'destroyed'\n\n        @\n\n    navigateTo: (position, options) ->\n        @navigateToIndex position, options\n\n        @\n\n    navigateToIndex: (position, options) ->\n        @_core.getVerso().navigateTo position, options\n\n        @\n    \n    navigateToPageId: (pageId, options) ->\n        position = @_core.getVerso().getPageSpreadPositionFromPageId pageId\n        \n        @_core.getVerso().navigateTo position, options\n\n    first: (options) ->\n        @_core.getVerso().first options\n\n        @\n\n    prev: (options) ->\n        @_core.getVerso().prev options\n\n        @\n\n    next: (options) ->\n        @_core.getVerso().next options\n\n        @\n\n    last: (options) ->\n        @_core.getVerso().last options\n\n        @\n\n    _setupEventListeners: ->\n        @_controls.bind 'prev', (e) =>\n            @prev e\n            \n            return\n        @_controls.bind 'next', (e) =>\n            @next e\n            \n            return\n        @_controls.bind 'first', (e) =>\n            @first e\n            \n            return\n        @_controls.bind 'last', (e) =>\n            @last e\n            \n            return\n        @_controls.bind 'close', (e) =>\n            @destroy e\n\n            return\n        @_hotspots.bind 'hotspotsRequested', (e) =>\n            @trigger 'hotspotsRequested', e\n\n            return\n\n        @_core.bind 'appeared', (e) =>\n            @_eventTracking.trigger 'appeared', e\n            @trigger 'appeared', e\n\n            return\n        @_core.bind 'disappeared', (e) =>\n            @_eventTracking.trigger 'disappeared', e\n            @trigger 'disappeared', e\n\n            return\n        @_core.bind 'beforeNavigation', (e) =>\n            @_eventTracking.trigger 'beforeNavigation', e\n            @_controls.trigger 'beforeNavigation', e\n            @trigger 'beforeNavigation', e\n\n            return\n        @_core.bind 'afterNavigation', (e) =>\n            @_eventTracking.trigger 'afterNavigation', e\n            @_hotspots.trigger 'afterNavigation', e\n            @trigger 'afterNavigation', e\n\n            return\n        @_core.bind 'attemptedNavigation', (e) =>\n            @_eventTracking.trigger 'attemptedNavigation', e\n            @trigger 'attemptedNavigation', e\n\n            return\n        @_core.bind 'clicked', (e) =>\n            @_eventTracking.trigger 'clicked', e\n            @trigger 'clicked', e\n\n            return\n        @_core.bind 'doubleClicked', (e) =>\n            @_eventTracking.trigger 'doubleClicked', e\n            @trigger 'doubleClicked', e\n\n            return\n        @_core.bind 'contextmenu', (e) =>\n            @trigger 'contextmenu', e\n\n            return\n        @_core.bind 'pressed', (e) =>\n            @_eventTracking.trigger 'pressed', e\n            @trigger 'pressed', e\n\n            return\n        @_core.bind 'panStart', (e) =>\n            @_eventTracking.trigger 'panStart', e\n            @trigger 'panStart', e\n\n            return\n        @_core.bind 'zoomedIn', (e) =>\n            @_eventTracking.trigger 'zoomedIn', e\n            @trigger 'zoomedIn', e\n\n            return\n        @_core.bind 'zoomedOut', (e) =>\n            @_eventTracking.trigger 'zoomedOut', e\n            @trigger 'zoomedOut', e\n\n            return\n        @_core.bind 'pageLoaded', (e) =>\n            @_eventTracking.trigger 'pageLoaded', e\n            @trigger 'pageLoaded', e\n\n            return\n        @_core.bind 'pagesLoaded', (e) =>\n            @_hotspots.trigger 'pagesLoaded', e\n            @trigger 'pagesLoaded', e\n\n            return\n        @_core.bind 'resized', (e) =>\n            @_hotspots.trigger 'resized'\n            @trigger 'resized', e\n\n            return\n\n        @bind 'hotspotsRequested', @hotspotsRequested.bind(@)\n        @bind 'beforeNavigation', @beforeNavigation.bind(@)\n        @bind 'clicked', @clicked.bind(@)\n        @bind 'contextmenu', @contextmenu.bind(@)\n        @bind 'pressed', @pressed.bind(@)\n\n        return\n\n    pickHotspot: (e, callback) ->\n        return if not @hotspots?\n\n        if @popover?\n            @popover?.destroy?()\n            @popover = null\n        \n        hotspots = e.verso.overlayEls.map (overlayEl) =>\n            @hotspots[overlayEl.getAttribute('data-id')]\n\n        if hotspots.length is 1\n            callback hotspots[0]\n        else if hotspots.length > 1\n            @popover =\n                destroy: (@options.pickHotspot || defaultPickHotspot)(hotspots, e, @el, callback)\n        \n        return\n\n    processHotspotQueue: ->\n        return if not @hotspots?\n\n        @hotspotQueue = @hotspotQueue.filter (hotspotRequest) =>\n            hotspots = {}\n            versoPageSpread = @_core.getVerso().pageSpreads.find (pageSpread) ->\n                pageSpread.getId() is hotspotRequest.id\n\n            for id, hotspot of @hotspots\n                continue if hotspots[id]?\n\n                for page in hotspotRequest.pages\n                    if hotspot.locations[page.pageNumber]?\n                        hotspots[id] =\n                            type: hotspot.type\n                            id: hotspot.id\n                            locations: hotspot.locations\n                        \n                        break\n\n            @_hotspots.trigger 'hotspotsReceived',\n                pageSpread: @_core.pageSpreads.get hotspotRequest.id\n                versoPageSpread: versoPageSpread\n                ratio: @options.hotspotRatio\n                pages: hotspotRequest.pages\n                hotspots: hotspots\n\n            false\n\n        return\n\n    hotspotsRequested: (e) ->\n        @hotspotQueue.push e\n        @processHotspotQueue()\n\n        return\n    \n    applyHotspots: (hotspots = {}) ->\n        @hotspots = hotspots\n\n        @processHotspotQueue()\n\n        return\n    \n    beforeNavigation: ->\n        @popover?.destroy?()\n\n        return\n    \n    clicked: (e) ->\n        @pickHotspot e, (hotspot) =>\n            @trigger 'hotspotClicked', hotspot\n\n            return\n            \n        return\n    \n    contextmenu: (e) ->\n        @pickHotspot e, (hotspot) =>\n            @trigger 'hotspotContextmenu', hotspot\n\n            return\n        \n        return\n    \n    pressed: (e) ->\n        @pickHotspot e, (hotspot) =>\n            @trigger 'hotspotPressed', hotspot\n\n            return\n            \n        return\n\nMicroEvent.mixin Viewer\n\nmodule.exports = Viewer\n","MicroEvent = require 'microevent'\nSGN = require '../../core'\n\nmodule.exports = class Bootstrapper\n    constructor: (@options = {}) ->\n        return\n\n    createViewer: (data, viewerOptions) ->\n        new SGN.PagedPublicationKit.Viewer @options.el, {\n            id: @options.id\n            ownedBy: data.details.dealer_id\n            color: '#' + data.details.branding.pageflip.color\n            hotspotRatio: data.details.dimensions.height\n            keyboard: true\n            pageId: @options.pageId\n            eventTracker: @options.eventTracker\n            pages: @transformPages data.pages\n            ...viewerOptions\n        }\n\n    transformPages: (pages) ->\n        pages.map (page, i) ->\n            pageNumber = i + 1\n\n            id: 'page' + pageNumber\n            label: pageNumber + ''\n            pageNumber: pageNumber\n            images:\n                medium: page.view\n                large: page.zoom\n\n    applyHotspots: (viewer, hotspots) ->\n        obj = {}\n\n        hotspots.forEach (hotspot) -> obj[hotspot.id] = hotspot\n        \n        viewer.applyHotspots obj\n\n        return\n    \n    fetch: (callback) ->\n        SGN.util.async.parallel [@fetchDetails, @fetchPages], (result) ->\n            data =\n                details: result[0][1]\n                pages: result[1][1]\n\n            if result[0][0]?\n                callback result[0][0]\n            else if result[1][0]?\n                callback result[1][0]\n            else if data.details? and data.pages?\n                callback null, data\n            else\n                callback new Error()\n\n            return\n        \n        return\n\n    fetchDetails: (callback) =>\n        SGN.CoreKit.request\n            url: \"/v2/catalogs/#{@options.id}\"\n        , callback\n\n        return\n\n    fetchPages: (callback) =>\n        SGN.CoreKit.request\n            url: \"/v2/catalogs/#{@options.id}/pages\"\n        , callback\n\n        return\n\n    fetchHotspots: (callback) =>\n        SGN.CoreKit.request\n            url: \"/v2/catalogs/#{@options.id}/hotspots\"\n        , callback\n\n        return","module.exports =\n    Viewer: require './viewer'\n\n    Bootstrapper: require './bootstrapper'\n","MicroEvent = require 'microevent'\n\nclass IncitoPublicationEventTracking\n    constructor: (@eventTracker, @details) ->\n        return\n\n    trackOpened: (properties) ->\n        return @ if not @eventTracker? or not @details?\n\n        @eventTracker.trackIncitoPublicationOpened\n            'ip.paged': @details.types.indexOf('paged') > -1\n            'ip.id': @details.id\n            'vt': @eventTracker.createViewToken(@details.id)\n\n        @\n\nMicroEvent.mixin IncitoPublicationEventTracking\n\nmodule.exports = IncitoPublicationEventTracking\n","Incito = require 'incito-browser'\nMicroEvent = require 'microevent'\nEventTracking = require './event-tracking'\n\nclass Viewer\n    @Incito: Incito\n\n    constructor: (@el, @options = {}) ->\n        @incito = new Incito @el,\n            incito: @options.incito\n            renderLaziness: @options.renderLaziness\n        @_eventTracking = new EventTracking @options.eventTracker, @options.details\n\n        return\n    \n    start: ->\n        @incito.start()\n        @el.classList.add 'sgn-incito--started'\n        @_eventTracking.trackOpened()\n\n        @\n    \n    destroy: ->\n        @incito.destroy()\n\n        return\n\nMicroEvent.mixin Viewer\n\nmodule.exports = Viewer\n","module.exports = class Controls\n    constructor: (@viewer) ->\n        @progressEl = @viewer.el.querySelector '.sgn-incito__progress'\n        @isScrolling = false\n\n        if @progressEl?\n            @progressEl.textContent = \"0 %\"\n\n            window.addEventListener 'scroll', @scroll, false\n\n            @viewer.bind 'destroyed', =>\n                window.removeEventListener 'scroll', @scroll, false\n\n                return\n\n        return\n    \n    scroll: =>\n        winHeight = window.innerHeight\n        rect = @viewer.el.getBoundingClientRect()\n        progress = Math.min 100, Math.round(Math.abs(rect.top - winHeight) / rect.height * 100)\n\n        clearTimeout @scrollTimeout\n        @scrollTimeout = setTimeout =>\n            @isScrolling = false\n\n            @viewer.el.classList.remove 'sgn-incito--scrolling'\n\n            return\n        , 1000\n\n        if @isScrolling is false\n            @viewer.el.classList.add 'sgn-incito--scrolling'\n\n            @isScrolling = true\n\n        @progressEl.textContent = \"#{progress} %\"\n        @viewer.trigger 'progress', progress: progress\n\n        return","fetch = require 'cross-fetch'\nutil = require '../../util'\nSGN = require '../../core'\nControls = require './controls'\nclientLocalStorage = require '../../storage/client-local'\n\nmodule.exports = class Bootstrapper\n    constructor: (@options = {}) ->\n        @deviceCategory = @getDeviceCategory()\n        @pixelRatio = @getPixelRatio()\n        @pointer = @getPointer()\n        @orientation = @getOrientation()\n        @time = @getTime()\n        @locale = @getLocale()\n        @maxWidth = @getMaxWidth()\n        @featureLabels = @getFeatureLabels()\n        @versionsSupported = ['1.0.0']\n\n        return\n    \n    getDeviceCategory: ->\n        util.getDeviceCategory()\n    \n    getPixelRatio: ->\n        window.devicePixelRatio or 1\n    \n    getPointer: ->\n        util.getPointer()\n    \n    getOrientation: ->\n        orientation = util.getOrientation screen.width, screen.height\n        orientation = 'horizontal' if orientation is 'quadratic'\n\n        orientation\n    \n    getTime: ->\n        new Date().toISOString()\n    \n    getLocale: ->\n        localeChain = []\n        locale = null\n\n        if Array.isArray(navigator.languages) and navigator.languages.length > 0\n            localeChain = localeChain.concat navigator.languages\n        else if typeof navigator.language == 'string' and navigator.language.length > 0\n            localeChain.push navigator.language\n        else if typeof navigator.browserLanguage == 'string' and navigator.browserLanguage.length > 0\n            localeChain.push navigator.browserLanguage\n\n        localeChain.push 'en_US'\n\n        for prefLocale in localeChain\n            continue if not prefLocale?\n\n            prefLocale = prefLocale.replace '-', '_'\n\n            if /[a-z][a-z]_[A-Z][A-Z]/g.test prefLocale\n                locale = prefLocale\n                \n                break\n\n        locale\n    \n    getMaxWidth: ->\n        if Math.abs(window.orientation) is 90\n            Math.min @options.el.offsetWidth, screen.width\n        else\n            @options.el.offsetWidth\n    \n    getFeatureLabels: ->\n        featureLabels = clientLocalStorage.get 'incito-feature-labels'\n        featureLabels = [] if Array.isArray(featureLabels) is false\n\n        featureLabels\n    \n    anonymizeFeatureLabels: ->\n        count = @featureLabels.length\n        vector = @featureLabels.reduce (acc, cur) ->\n            if !acc[cur]\n                acc[cur] = {\n                    key: cur\n                    value: 0\n                }\n            \n            acc[cur].value++\n            \n            acc\n        , {}\n\n        Object.values(vector).map (featureLabel) ->\n            key: featureLabel.key\n            value: Math.round(featureLabel.value / count * 100) / 100\n\n    fetch: (callback) ->\n        @fetchDetails @options.id, (err, details) =>\n            if err?\n                callback err\n            else\n                @fetchIncito details.incito_publication_id, (err1, incito) ->\n                    if err1?\n                        callback err1\n                    else\n                        callback null,\n                            details: details\n                            incito: incito\n                    \n                    return\n            \n            return\n        \n        return\n\n    fetchDetails: (id, callback) =>\n        SGN.CoreKit.request\n            url: \"/v2/catalogs/#{@options.id}\"\n        , callback\n\n        return\n\n    fetchIncito: (id, callback) ->\n        res = fetch SGN.config.get('coreUrl') + '/v4/rpc/generate_incito_from_publication',\n            method: 'post'\n            headers:\n                'X-Api-Key': SGN.config.get 'appKey'\n                'Content-Type': 'application/json'\n                'Accept': 'application/json'\n            body: JSON.stringify\n                id: id\n                device_category: @deviceCategory\n                pointer: @pointer\n                orientation: @orientation\n                pixel_ratio: @pixelRatio\n                max_width: @maxWidth\n                versions_supported: @versionsSupported\n                locale_code: @locale\n                time: @time\n                feature_labels: @anonymizeFeatureLabels @featureLabels\n        \n        res\n            .then (response) ->\n                response.json()\n            .then (incito) ->\n                callback null, incito\n\n                return\n            .catch (err) ->\n                callback err\n\n                return\n\n        return\n    \n    createViewer: (data) ->\n        if not data.incito?\n            throw util.error new Error(), 'You need to supply valid Incito to create a viewer'\n\n        viewer = new SGN.IncitoPublicationKit.Viewer @options.el,\n            id: @options.id\n            details: data.details\n            incito: data.incito\n            eventTracker: @options.eventTracker\n        controls = new Controls viewer\n        self = @\n\n        # Persist clicks on feature labels for later anonymization.\n        SGN.CoreUIKit.on viewer.el, 'click', '.incito__view[data-feature-labels]', ->\n            featureLabels = this.getAttribute('data-feature-labels').split ','\n\n            self.featureLabels = self.featureLabels.concat featureLabels\n\n            while self.featureLabels.length > 1000\n                self.featureLabels.shift()\n            \n            clientLocalStorage.set 'incito-feature-labels', self.featureLabels\n            \n            return\n\n        viewer\n","module.exports =\n    Viewer: require './viewer'\n\n    Bootstrapper: require './bootstrapper'","/**\n * Copyright 2014 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * GATOR.JS\n * Simple Event Delegation\n *\n * @version 1.2.4\n *\n * Compatible with IE 9+, FF 3.6+, Safari 5+, Chrome\n *\n * Include legacy.js for compatibility with older browsers\n *\n *             .-._   _ _ _ _ _ _ _ _\n *  .-''-.__.-'00  '-' ' ' ' ' ' ' ' '-.\n * '.___ '    .   .--_'-' '-' '-' _'-' '._\n *  V: V 'vv-'   '_   '.       .'  _..' '.'.\n *    '=.____.=_.--'   :_.__.__:_   '.   : :\n *            (((____.-'        '-.  /   : :\n *                              (((-'\\ .' /\n *                            _____..'  .'\n *                           '-._____.-'\n */\nvar _matcher,\n  _level = 0,\n  _id = 0,\n  _handlers = {},\n  _gatorInstances = {};\n\nfunction _addEvent(gator, type, callback) {\n  // blur and focus do not bubble up but if you use event capturing\n  // then you will get them\n  var useCapture = type == \"blur\" || type == \"focus\";\n  gator.element.addEventListener(type, callback, useCapture);\n}\n\nfunction _cancel(e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\n\n/**\n     * returns function to use for determining if an element\n     * matches a query selector\n     *\n     * @returns {Function}\n     */\nfunction _getMatcher(element) {\n  if (_matcher) {\n    return _matcher;\n  }\n\n  if (element.matches) {\n    _matcher = element.matches;\n    return _matcher;\n  }\n\n  if (element.webkitMatchesSelector) {\n    _matcher = element.webkitMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.mozMatchesSelector) {\n    _matcher = element.mozMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.msMatchesSelector) {\n    _matcher = element.msMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.oMatchesSelector) {\n    _matcher = element.oMatchesSelector;\n    return _matcher;\n  }\n\n  // if it doesn't match a native browser method\n  // fall back to the gator function\n  _matcher = Gator.matchesSelector;\n  return _matcher;\n}\n\n/**\n     * determines if the specified element matches a given selector\n     *\n     * @param {Node} element - the element to compare against the selector\n     * @param {string} selector\n     * @param {Node} boundElement - the element the listener was attached to\n     * @returns {void|Node}\n     */\nfunction _matchesSelector(element, selector, boundElement) {\n  // no selector means this event was bound directly to this element\n  if (selector == \"_root\") {\n    return boundElement;\n  }\n\n  // if we have moved up to the element you bound the event to\n  // then we have come too far\n  if (element === boundElement) {\n    return;\n  }\n\n  // if this is a match then we are done!\n  if (_getMatcher(element).call(element, selector)) {\n    return element;\n  }\n\n  // if this element did not match but has a parent we should try\n  // going up the tree to see if any of the parent elements match\n  // for example if you are looking for a click on an <a> tag but there\n  // is a <span> inside of the a tag that it is the target,\n  // it should still work\n  if (element.parentNode) {\n    _level++;\n    return _matchesSelector(element.parentNode, selector, boundElement);\n  }\n}\n\nfunction _addHandler(gator, event, selector, callback) {\n  if (!_handlers[gator.id]) {\n    _handlers[gator.id] = {};\n  }\n\n  if (!_handlers[gator.id][event]) {\n    _handlers[gator.id][event] = {};\n  }\n\n  if (!_handlers[gator.id][event][selector]) {\n    _handlers[gator.id][event][selector] = [];\n  }\n\n  _handlers[gator.id][event][selector].push(callback);\n}\n\nfunction _removeHandler(gator, event, selector, callback) {\n  // if there are no events tied to this element at all\n  // then don't do anything\n  if (!_handlers[gator.id]) {\n    return;\n  }\n\n  // if there is no event type specified then remove all events\n  // example: Gator(element).off()\n  if (!event) {\n    for (var type in _handlers[gator.id]) {\n      if (_handlers[gator.id].hasOwnProperty(type)) {\n        _handlers[gator.id][type] = {};\n      }\n    }\n    return;\n  }\n\n  // if no callback or selector is specified remove all events of this type\n  // example: Gator(element).off('click')\n  if (!callback && !selector) {\n    _handlers[gator.id][event] = {};\n    return;\n  }\n\n  // if a selector is specified but no callback remove all events\n  // for this selector\n  // example: Gator(element).off('click', '.sub-element')\n  if (!callback) {\n    delete _handlers[gator.id][event][selector];\n    return;\n  }\n\n  // if we have specified an event type, selector, and callback then we\n  // need to make sure there are callbacks tied to this selector to\n  // begin with.  if there aren't then we can stop here\n  if (!_handlers[gator.id][event][selector]) {\n    return;\n  }\n\n  // if there are then loop through all the callbacks and if we find\n  // one that matches remove it from the array\n  for (var i = 0; i < _handlers[gator.id][event][selector].length; i++) {\n    if (_handlers[gator.id][event][selector][i] === callback) {\n      _handlers[gator.id][event][selector].splice(i, 1);\n      break;\n    }\n  }\n}\n\nfunction _handleEvent(id, e, type) {\n  if (!_handlers[id][type]) {\n    return;\n  }\n\n  var target = e.target || e.srcElement,\n    selector,\n    match,\n    matches = {},\n    i = 0,\n    j = 0;\n\n  // find all events that match\n  _level = 0;\n  for (selector in _handlers[id][type]) {\n    if (_handlers[id][type].hasOwnProperty(selector)) {\n      match = _matchesSelector(target, selector, _gatorInstances[id].element);\n\n      if (\n        match &&\n        Gator.matchesEvent(\n          type,\n          _gatorInstances[id].element,\n          match,\n          selector == \"_root\",\n          e\n        )\n      ) {\n        _level++;\n        _handlers[id][type][selector].match = match;\n        matches[_level] = _handlers[id][type][selector];\n      }\n    }\n  }\n\n  // stopPropagation() fails to set cancelBubble to true in Webkit\n  // @see http://code.google.com/p/chromium/issues/detail?id=162270\n  e.stopPropagation = function() {\n    e.cancelBubble = true;\n  };\n\n  for (i = 0; i <= _level; i++) {\n    if (matches[i]) {\n      for (j = 0; j < matches[i].length; j++) {\n        if (matches[i][j].call(matches[i].match, e) === false) {\n          Gator.cancel(e);\n          return;\n        }\n\n        if (e.cancelBubble) {\n          return;\n        }\n      }\n    }\n  }\n}\n\n/**\n     * binds the specified events to the element\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @param {boolean=} remove\n     * @returns {Object}\n     */\nfunction _bind(events, selector, callback, remove) {\n  // fail silently if you pass null or undefined as an alement\n  // in the Gator constructor\n  if (!this.element) {\n    return;\n  }\n\n  if (!(events instanceof Array)) {\n    events = [events];\n  }\n\n  if (!callback && typeof selector == \"function\") {\n    callback = selector;\n    selector = \"_root\";\n  }\n\n  var id = this.id,\n    i;\n\n  function _getGlobalCallback(type) {\n    return function(e) {\n      _handleEvent(id, e, type);\n    };\n  }\n\n  for (i = 0; i < events.length; i++) {\n    if (remove) {\n      _removeHandler(this, events[i], selector, callback);\n      continue;\n    }\n\n    if (!_handlers[id] || !_handlers[id][events[i]]) {\n      Gator.addEvent(this, events[i], _getGlobalCallback(events[i]));\n    }\n\n    _addHandler(this, events[i], selector, callback);\n  }\n\n  return this;\n}\n\n/**\n     * Gator object constructor\n     *\n     * @param {Node} element\n     */\nfunction Gator(element, id) {\n  // called as function\n  if (!(this instanceof Gator)) {\n    // only keep one Gator instance per node to make sure that\n    // we don't create a ton of new objects if you want to delegate\n    // multiple events from the same node\n    //\n    // for example: Gator(document).on(...\n    for (var key in _gatorInstances) {\n      if (_gatorInstances[key].element === element) {\n        return _gatorInstances[key];\n      }\n    }\n\n    _id++;\n    _gatorInstances[_id] = new Gator(element, _id);\n\n    return _gatorInstances[_id];\n  }\n\n  this.element = element;\n  this.id = id;\n}\n\n/**\n     * adds an event\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @returns {Object}\n     */\nGator.prototype.on = function(events, selector, callback) {\n  return _bind.call(this, events, selector, callback);\n};\n\n/**\n     * removes an event\n     *\n     * @param {string|Array} events\n     * @param {string} selector\n     * @param {Function} callback\n     * @returns {Object}\n     */\nGator.prototype.off = function(events, selector, callback) {\n  return _bind.call(this, events, selector, callback, true);\n};\n\nGator.matchesSelector = function() {};\nGator.cancel = _cancel;\nGator.addEvent = _addEvent;\nGator.matchesEvent = function() {\n  return true;\n};\n\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports = Gator;\n}\n\nif (typeof window !== \"undefined\" && window.exports) {\n  window.Gator = Gator;\n}\n","module.exports = class OfferDetails\n    constructor: ({@minWidth = 300, @maxWidth = '100vw', @anchorEl, @contentEl}) ->\n        @elInner = document.createElement 'div'\n        @elInner.className = 'sgn-offer-details-inner'\n\n        @el = document.createElement 'div'\n\n        @el.className = 'sgn-offer-details'\n        @el.setAttribute 'tabindex', -1\n        @el.appendChild @elInner\n        @el.appendChild @contentEl\n\n        @position()\n\n        return\n    \n    appendTo: (el) ->\n        el.appendChild @el\n\n        @el.offsetWidth\n\n        @show()\n\n        @\n    \n    show: ->\n        @el.className += ' in'\n\n        window.addEventListener 'resize', @resize, false\n\n        @\n    \n    destroy: ->\n        window.removeEventListener 'resize', @resize, false\n\n        @el.parentNode.removeChild @el\n\n        return\n    \n    position: ->\n        rect = @anchorEl.getBoundingClientRect()\n        top = window.pageYOffset + rect.top + @anchorEl.offsetHeight\n        left = window.pageXOffset + rect.left\n        width = @anchorEl.offsetWidth\n        \n        @el.style.top = top + 'px'\n\n        rightAligned = rect.left >= (window.outerWidth / 2)\n        left = window.pageXOffset + rect.left\n        right = window.pageXOffset + (window.outerWidth - rect.right)\n\n        if rightAligned\n            @el.style.left = 'auto'\n            @el.style.right = right + 'px'\n\n            @elInner.style.left = 'auto'\n            @elInner.style.right = 0\n        else\n            @el.style.left = left + 'px'\n            @el.style.right = 'auto'\n\n            @elInner.style.left = 0\n            @elInner.style.right = 'auto'\n\n        @el.style.minWidth = if typeof @minWidth == 'number' then Math.max(width, @minWidth) + 'px' else @minWidth\n        @el.style.maxWidth = @maxWidth\n\n        @elInner.style.width = (width - 8) + 'px'\n\n        return\n    \n    resize: =>\n        @position()\n\n        return\n","MicroEvent = require 'microevent'\nGator = require '../../../../vendor/gator'\nMustache = require 'mustache'\nkeyCodes = require '../../key-codes'\n\ntemplate = \"\"\"\n<div class=\"sgn-popover__background\" data-close></div>\n<div class=\"sgn-popover__menu\">\n    {{#header}}\n        <div class=\"sgn-popover__header\">{{header}}</div>\n    {{/header}}\n    <div class=\"sgn-popover__content\">\n        <ul>\n            {{#singleChoiceItems}}\n                <li data-index=\"{{index}}\">\n                    <p class=\"sgn-popover-item__title\">{{item.title}}</p>\n                    {{#item.subtitle}}\n                        <p class=\"sgn-popover-item__subtitle\">{{item.subtitle}}</p>\n                    {{/item.subtitle}}\n                </li>\n            {{/singleChoiceItems}}\n        </ul>\n    </div>\n</div>\n\"\"\"\n\nclass Popover\n    constructor: (@options = {}) ->\n        @el = document.createElement 'div'\n        @backgroundEl = document.createElement 'div'\n\n        return\n\n    render: ->\n        width = @options.width ? 100\n        header = @options.header\n        template = @options.template if @options.template?\n        view =\n            header: header\n            singleChoiceItems: @options.singleChoiceItems?.map (item, i) ->\n                item: item\n                index: i\n\n        @el.className = 'sgn-popover'\n        @el.setAttribute 'tabindex', -1\n        @el.innerHTML = Mustache.render template, view\n\n        @position()\n        @addEventListeners()\n\n        @\n\n    destroy: ->\n        Gator(@el).off()\n\n        window.removeEventListener 'resize', @resize, false\n        window.removeEventListener 'scroll', @scroll, false\n\n        if @el.parentNode?\n            @el.parentNode.removeChild @el\n\n            @trigger 'destroyed'\n\n        return\n    \n    position: ->\n        top = @options.y\n        left = @options.x\n\n        menuEl = @el.querySelector '.sgn-popover__menu'\n\n        width = menuEl.offsetWidth\n        height = menuEl.offsetHeight\n        parentWidth = @el.parentNode.offsetWidth\n        parentHeight = @el.parentNode.offsetHeight\n        boundingRect = @el.parentNode.getBoundingClientRect()\n\n        top -= boundingRect.top\n        left -= boundingRect.left\n\n        top -= window.pageYOffset\n        left -= window.pageXOffset\n\n        if top + height > parentHeight\n            menuEl.style.top = parentHeight - height + 'px'\n        else\n            menuEl.style.top = top + 'px'\n\n        if left + width > parentWidth\n            menuEl.style.left = parentWidth - width + 'px'\n        else\n            menuEl.style.left = left + 'px'\n        \n        return\n    \n    addEventListeners: ->\n        trigger = @trigger.bind @\n\n        @el.addEventListener 'keyup', @keyUp\n\n        Gator(@el).on 'click', '[data-index]', (e) ->\n            e.preventDefault()\n            e.stopPropagation()\n\n            trigger 'selected', index: +@getAttribute 'data-index'\n\n            return\n\n        Gator(@el).on 'click', '[data-close]', (e) =>\n            e.preventDefault()\n            e.stopPropagation()\n            \n            @destroy()\n\n            return\n\n        Gator(@el).on 'click', '.sgn-popover__menu', (e) ->\n            e.stopPropagation()\n\n            return\n\n        window.addEventListener 'resize', @resize, false\n        window.addEventListener 'scroll', @scroll, false\n\n        return\n\n    keyUp: (e) =>\n        @destroy() if e.keyCode is keyCodes.ESC\n        \n        return\n\n    resize: =>\n        @destroy()\n\n        return\n\n    scroll: =>\n        @destroy()\n\n        return\n\nMicroEvent.mixin Popover\n\nmodule.exports = Popover\n","Popover = require './popover'\n\nmodule.exports = (ctx, callback) ->\n    items = ctx.items\n    popover = null\n\n    if items.length is 1\n        callback items[0]\n    else if items.length > 1\n        popover = new Popover\n            header: ctx.header,\n            x: ctx.x\n            y: ctx.y\n            singleChoiceItems: items\n\n        popover.bind 'selected', (e) ->\n            callback items[e.index]\n\n            popover.destroy()\n\n            return\n\n        popover.bind 'destroyed', ->\n            ctx.el.focus()\n\n            return\n\n        ctx.el.appendChild popover.el\n        popover.render().el.focus()\n\n    destroy: ->\n        popover.destroy() if popover?\n\n        return","Gator = require '../../../../vendor/gator'\n\nmodule.exports =\n    OfferDetails: require './offer-details'\n\n    Popover: require './popover'\n\n    singleChoicePopover: require './single-choice-popover'\n\n    on: (el, events, selector, callback) ->\n        Gator(el).on events, selector, callback\n\n    off: (el, events, selector, callback) ->\n        Gator(el).off events, selector, callback","{isBrowser} = require './util'\n\nSGN = require './core'\n\n# Expose storage backends.\nSGN.storage =\n    local: require './storage/client-local'\n    session: require './storage/client-session'\n    cookie: require './storage/client-cookie'\n\n# Expose the different kits.\nSGN.EventsKit = require './kits/events'\nSGN.CoreKit = require './kits/core'\nSGN.PagedPublicationKit = require './kits/paged-publication'\nSGN.IncitoPublicationKit = require './kits/incito-publication'\nSGN.CoreUIKit = require './kits/core-ui'\n\n# Set the core session from the cookie store if possible.\nsession = SGN.storage.cookie.get 'session'\n\nif typeof session is 'object'\n    SGN.config.set\n        coreSessionToken: session.token\n        coreSessionClientId: session.client_id\n\nSGN.client = do ->\n    id = SGN.storage.local.get 'client-id'\n    id = id.data if id?.data\n\n    if not id?\n        id = SGN.util.uuid()\n        \n        SGN.storage.local.set 'client-id', id\n\n    id: id\n\nif isBrowser()\n    # Autoconfigure the SDK.\n    scriptEl = document.getElementById 'sgn-sdk'\n\n    if scriptEl?\n        appKey = scriptEl.getAttribute 'data-app-key'\n        trackId = scriptEl.getAttribute 'data-track-id'\n        config = {}\n\n        config.appKey = appKey if appKey?\n        config.eventTracker = new SGN.EventsKit.Tracker(trackId: trackId) if trackId?\n\n        SGN.config.set config\n\nmodule.exports = SGN\n"],"names":["util","isBrowser","window","document","isNode","process","error","err","options","key","value","message","code","name","stack","time","Date","uuid","replace","c","r","v","Math","random","toString","getQueryParam","field","url","href","reg","string","location","RegExp","exec","getRandomNumberBetween","from","to","floor","getOS","ua","navigator","userAgent","indexOf","getDeviceCategory","deviceCategory","platform","test","getPointer","pointer","matchMedia","matches","getOrientation","width","height","getScreenDimensions","density","logical","physical","ref","screen","round","getUtcOffsetSeconds","jan1","jan2","now","stdTimeOffset","tmp","getFullYear","toGMTString","substring","lastIndexOf","getUtcDstOffsetSeconds","getTimezoneOffset","getColorBrightness","color","hex","rgb","s","sum","x","parseInt","btoa","str","buffer","Buffer","chunk","arr","size","results","length","push","splice","throttle","fn","threshold","scope","deferTimer","last","args","context","getTime","arguments","clearTimeout","setTimeout","apply","loadImage","src","callback","img","Image","onload","onerror","Error","distance","lat1","lng1","lat2","lng2","dist","radlat1","radlat2","radtheta","theta","PI","sin","cos","acos","async","parallel","asyncCalls","sharedCallback","allResults","counter","k","makeCallback","index","i","promiseCallbackInterop","fun","cbParameterIndex","makePromise","parameters","Promise","resolve","reject","callParameters","j","neoCallback","result","Config","MicroEvent","require$$0","attrs","config","changedAttributes","keys","trigger","option","mixin","Mustache","pairs","t","view","template","render","update","translations","require$$1","require$$2","set","locale","coreUrl","eventsTrackUrl","SGN","prefixKey","storage","localStorage","get","JSON","parse","stringify","sessionStorage","ca","ct","len","cookie","split","trim","date","days","setTime","toUTCString","Tracker","_dispatch","clientLocalStorage","dispatch","dispatchLimit","dispatchRetryInterval","dispatching","fetch","getPool","md5","pool","ship","require$$3","data","Array","isArray","filter","evt","_i","geohash","country","type","properties","version","trackId","Object","assign","poolLimit","shift","hasOwnProperty","trackEvent","viewToken","parts","client","id","concat","join","String","fromCharCode","asBytes","slice","defaultOptions","events","req","method","timeout","headers","body","then","response","json","nacks","clearInterval","forEach","resEvent","status","poolEvent","catch","console","warn","setInterval","addEventListener","e","request","secondTime","CoreKit","session","ensure","appKey","appSecret","appVersion","geo","qs","ref1","ref2","token","geolocation","sign","r_locale","api_av","r_lat","latitude","r_lng","longitude","r_radius","radius","r_sensor","sensor","map","val","encodeURIComponent","ref3","responseToken","saveToken","coreSessionToken","statusCode","callbackQueue","clientCookieStorage","renewed","sha256","ttl","saveCookie","saveClientId","clientId","coreSessionClientId","client_id","create","renew","complete","queueCount","PagedPublicationPageSpread","contentsRendered","hotspotsRendered","el","renderEl","pages","pageIds","createElement","getPages","page","className","setAttribute","getId","maxZoomScale","imageLoads","pageCount","getEl","image","loaderEl","pageEl","images","medium","appendChild","innerHTML","label","isComplete","style","backgroundImage","pageSpreadId","pageSpread","versoPageSpread","pageEls","call","querySelectorAll","getAttribute","find","large","removeAttribute","PageSpread","PagedPublicationPageSpreads","collection","ids","frag","createDocumentFragment","pageMode","firstPage","lastPage","midstPageSpreads","pageSpreads","pop","midstPages","bind","PageSpreads","PagedPublicationCore","Verso","require$$4","beforeNavigation","afterNavigation","attemptedNavigation","clicked","doubleClicked","pressed","contextmenu","panStart","panEnd","zoomedIn","zoomedOut","resize","unload","makeOptions","defaults","pageId","getOption","els","root","querySelector","verso","getPageMode","pageLoaded","pagesLoaded","setColor","parentNode","insertBefore","getFrag","createVerso","start","destroy","getVerso","overridePageSpreadContentRect","resizeListener","focus","pageSpreadEl","pageSpreadEls","backgroundColor","removeChild","removeEventListener","opts","actualHeight","actualWidth","clientRect","imageRatio","pageHeight","pageWidth","rect","scale","top","left","right","bottom","getPageEls","transform","offsetWidth","offsetHeight","min","getBoundingClientRect","pageLabels","match","visibility","getVisibility","renderContents","clearContents","newSpreadEl","pageSpreadCount","position","progress","progressLabel","theVerso","newPosition","getPageSpreadFromPosition","getPageSpreadCount","formatProgressLabel","renderPageSpreads","resetIdleTimer","startIdleTimer","newPositionIsEnd","isInsideContent","findPage","zoomIn","zoomOut","idleTimeout","getPosition","getPageIds","refresh","navigateTo","getPageSpreadPositionFromPageId","duration","getType","getContentRect","switchPageMode","pageSpreadWidth","pageSpreadMaxZoomScale","idleDelay","resizeDelay","PagedPublicationHotspots","currentPageSpreadId","pageSpreadsLoaded","cache","hotspotsReceived","resized","boundingRect","contentRect","hotspot","hotspotEl","hotspotEls","ratio","renderHotspot","maxX","maxY","minX","minY","pageNumber","pageNumbers","locations","coords","y","setCache","renderHotspots","requestHotspots","getCache","ESC","ARROW_RIGHT","ARROW_LEFT","SPACE","NUMBER_ONE","PagedPublicationControls","keyCodes","prevClicked","nextClicked","closeClicked","keyDown","progressBar","prevControl","nextControl","close","keyDownHandler","keyboard","showProgress","visibilityClassName","classList","remove","add","textContent","preventDefault","keyCode","PagedPublicationEventTracking","eventTracker","hidden","appeared","disappeared","pageSpreadDisappeared","trackPagedPublicationOpened","createViewToken","trackPagedPublicationPageDisappeared","pageSpreadAppeared","trackPageSpreadDisappeared","Controls","Core","EventTracking","Hotspots","Viewer","defaultPickHotspot","require$$5","hotspots","popover","CoreUIKit","singleChoicePopover","header","items","title","offer","heading","subtitle","pricing","currency","price","picked","_core","_hotspots","_controls","_eventTracking","viewSession","hotspotQueue","_setupEventListeners","trackOpened","navigateToIndex","first","prev","next","hotspotsRequested","overlayEls","overlayEl","pickHotspot","hotspotRequest","hotspotRatio","processHotspotQueue","Bootstrapper","fetchDetails","fetchPages","fetchHotspots","viewerOptions","PagedPublicationKit","ownedBy","details","dealer_id","branding","pageflip","dimensions","transformPages","zoom","viewer","obj","applyHotspots","IncitoPublicationEventTracking","trackIncitoPublicationOpened","types","Incito","incito","renderLaziness","scroll","progressEl","isScrolling","winHeight","innerHeight","abs","scrollTimeout","pixelRatio","getPixelRatio","orientation","getLocale","maxWidth","getMaxWidth","featureLabels","getFeatureLabels","versionsSupported","devicePixelRatio","toISOString","localeChain","prefLocale","languages","language","browserLanguage","count","vector","reduce","acc","cur","values","featureLabel","fetchIncito","incito_publication_id","err1","res","device_category","pixel_ratio","max_width","versions_supported","locale_code","feature_labels","anonymizeFeatureLabels","controls","self","IncitoPublicationKit","on","_matcher","_level","_id","_handlers","_gatorInstances","_addEvent","gator","useCapture","element","_cancel","stopPropagation","_getMatcher","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","Gator","matchesSelector","_matchesSelector","selector","boundElement","_addHandler","event","_removeHandler","_handleEvent","target","srcElement","matchesEvent","cancelBubble","cancel","_bind","_getGlobalCallback","addEvent","prototype","off","module","exports","OfferDetails","minWidth","anchorEl","contentEl","elInner","show","rightAligned","pageYOffset","pageXOffset","outerWidth","max","Popover","keyUp","backgroundEl","singleChoiceItems","item","addEventListeners","menuEl","parentHeight","parentWidth","ctx","scriptEl","local","EventsKit","require$$6","require$$7","require$$8","require$$9","getElementById"],"mappings":"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"}